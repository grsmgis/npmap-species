/**
 * NPMap.js 4.0.1
 * Built on 04/22/2020 at 01:48PM MDT
 * Copyright 2020 National Park Service
 * Licensed under MIT (https://github.com/nationalparkservice/npmap.js/blob/master/LICENSE.md)
 */
!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){b.exports=[{name:"Circle stroked",tags:["circle","disc","shape","shapes","geometric","stroke","round"],icon:"circle-stroked"},{name:"Circle solid",tags:["circle","shape","shapes","geometric","round"],icon:"circle"},{name:"Square stroked",tags:["box","square","shapes","shape","geometric","stroke"],icon:"square-stroked"},{name:"Square solid",tags:["box","square","shape","shapes","geometric"],icon:"square"},{name:"Triangle stroked",tags:["triangle","shape","shapes","geometric","stroke"],icon:"triangle-stroked"},{name:"Triangle solid",tags:["triangle","shape","shapes","geometric"],icon:"triangle"},{name:"Star stroked",tags:["star","shape","shapes","geometric","stroke"],icon:"star-stroked"},{name:"Star solid",tags:["star","shape","shapes","geometric"],icon:"star"},{name:"Cross",tags:["cross","x","ex","shape","shapes","geometric"],icon:"cross"},{name:"Marker Stroke",tags:["marker","point","shape","shapes","stroke"],icon:"marker-stroked"},{name:"Marker Solid",tags:["marker","point","shape","shapes"],icon:"marker"},{name:"Religious Jewish",tags:["jewish","judaism","hebrew","star","david","religious","religion","temple","synagogue"],icon:"religious-jewish"},{name:"Religious Christian",tags:["christian","cross","religious","religion","church","cathedral"],icon:"religious-christian"},{name:"Religious Muslim",tags:["muslim","crescent","star","religious","religion","mosque"],icon:"religious-muslim"},{name:"Cemetery",tags:["cemetery","graveyard","funeral","religious","religion","memorial"],icon:"cemetery"},{name:"Rocket",tags:["rocket","space","launch","transportation"],icon:"rocket"},{name:"Airport",tags:["airplane","plane","airport","transportation"],icon:"airport"},{name:"Heliport",tags:["heliport","helicopter","transportation"],icon:"heliport"},{name:"Rail",tags:["rail","train","transportation"],icon:"rail"},{name:"Rail Metro",tags:["rail","train","metro","subway","rapid-transit","transportation"],icon:"rail-metro"},{name:"Rail Light",tags:["rail","train","light-rail","transportation"],icon:"rail-light"},{name:"Bus",tags:["vehicle","bus","transportation"],icon:"bus"},{name:"Fuel",tags:["petrol","fuel","gas","transportation","station"],icon:"fuel"},{name:"Parking",tags:["parking","transportation"],icon:"parking"},{name:"Parking Garage",tags:["parking","transportation","garage"],icon:"parking-garage"},{name:"Airfield",tags:["airfield","airport","plane","landing strip"],icon:"airfield"},{name:"Roadblock",tags:["roadblock","stop","warning","dead end"],icon:"roadblock"},{name:"Ferry",tags:["ship","boat","water","ferry","transportation"],icon:"ferry"},{name:"Harbor",tags:["marine","dock","water","wharf"],icon:"harbor"},{name:"Bicycle",tags:["cycling","cycle","transportation"],icon:"bicycle"},{name:"Park",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park"},{name:"Park 2",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park2"},{name:"Museum",tags:["recreation","museum","tourism"],icon:"museum"},{name:"Lodging",tags:["lodging","hotel","recreation","motel","tourism"],icon:"lodging"},{name:"Monument",tags:["recreation","statue","monument","tourism"],icon:"monument"},{name:"Zoo",tags:["recreation","zoo","animal","giraffe"],icon:"zoo"},{name:"Garden",tags:["recreation","garden","park","flower","nature"],icon:"garden"},{name:"Campsite",tags:["recreation","campsite","camp","camping","tent","nature"],icon:"campsite"},{name:"Theatre",tags:["recreation","theatre","theater","entertainment","play","performance"],icon:"theatre"},{name:"Art gallery",tags:["art","center","museum","gallery","creative","recreation","entertainment","studio"],icon:"art-gallery"},{name:"Pitch",tags:["pitch","track","athletic","sports","field"],icon:"pitch"},{name:"Soccer",tags:["soccer","sports"],icon:"soccer"},{name:"American Football",tags:["football","sports"],icon:"america-football"},{name:"Tennis",tags:["tennis","court","ball","sports"],icon:"tennis"},{name:"Basketball",tags:["basketball","ball","sports"],icon:"basketball"},{name:"Baseball",tags:["baseball","softball","ball","sports"],icon:"baseball"},{name:"Golf",tags:["golf","sports","course"],icon:"golf"},{name:"Swimming",tags:["swimming","water","swim","sports"],icon:"swimming"},{name:"Cricket",tags:["cricket","sports"],icon:"cricket"},{name:"Skiing",tags:["winter","skiing","ski","sports"],icon:"skiing"},{name:"School",tags:["school","highschool","elementary","children","amenity","middle"],icon:"school"},{name:"College",tags:["college","school","amenity","university"],icon:"college"},{name:"Library",tags:["library","books","amenity"],icon:"library"},{name:"Post",tags:["post","office","amenity","mail","letter"],icon:"post"},{name:"Fire station",tags:["fire","station","amenity"],icon:"fire-station"},{name:"Town hall",tags:["townhall","mayor","building","amenity","government"],icon:"town-hall"},{name:"Police",tags:["police","jail","arrest","amenity","station"],icon:"police"},{name:"Prison",tags:["prison","jail","amenity"],icon:"prison"},{name:"Embassy",tags:["embassy","diplomacy","consulate","amenity","flag"],icon:"embassy"},{name:"Beer",tags:["bar","beer","drink","commercial","biergarten","pub"],icon:"beer"},{name:"Restaurant",tags:["restaurant","commercial"],icon:"restaurant"},{name:"Cafe",tags:["cafe","coffee","commercial","tea"],icon:"cafe"},{name:"Shop",tags:["shop","mall","commercial","store"],icon:"shop"},{name:"Fast Food",tags:["food","fast","commercial","burger","drive-through"],icon:"fast-food"},{name:"Bar",tags:["bar","drink","commercial","club","martini","lounge"],icon:"bar"},{name:"Bank",tags:["bank","atm","commercial","money"],icon:"bank"},{name:"Grocery",tags:["food","grocery","commercial","store","market"],icon:"grocery"},{name:"Cinema",tags:["cinema","theatre","film","movie","commercial","theater","entertainment"],icon:"cinema"},{name:"Pharmacy",tags:["pharmacy","drugs","medication","social","medicine","prescription"],icon:"pharmacy"},{name:"Hospital",tags:["hospital","health","medication","social","medicine","medical","clinic"],icon:"hospital"},{name:"Danger",tags:["minefield","landmine","disaster","dangerous","hazard"],icon:"danger"},{name:"Industrial",tags:["industrial","factory","property","building"],icon:"industrial"},{name:"Warehouse",tags:["warehouse","property","storage","building"],icon:"warehouse"},{name:"Commercial",tags:["commercial","property","business","building"],icon:"commercial"},{name:"Building",tags:["building","property","structure","business","building"],icon:"building"},{name:"Place of worship",tags:["religion","ceremony","religious","nondenominational","church","temple"],icon:"place-of-worship"},{name:"Alcohol shop",tags:["alcohol","liquor","store","shop","beer","wine","vodka"],icon:"alcohol-shop"},{name:"Logging",tags:["logger","chainsaw","woods","industry"],icon:"logging"},{name:"Oil well",tags:["oil","natural","environment","industry","resources"],icon:"oil-well"},{name:"Slaughterhouse",tags:["cows","cattle","food","meat","industry","resources"],icon:"slaughterhouse"},{name:"Dam",tags:["water","natural","hydro","hydroelectric","energy","environment","industry","resources"],icon:"dam"},{name:"Water",tags:["water","natural","hydro","lake","river","ocean","resources"],icon:"water"},{name:"Wetland",tags:["water","swamp","natural"],icon:"wetland"},{name:"Disability",tags:["handicap","wheelchair","access"],icon:"disability"},{name:"Telephone",tags:["payphone","call"],icon:"telephone"},{name:"Emergency Telephone",tags:["payphone","danger","safety","call"],icon:"emergency-telephone"},{name:"Toilets",tags:["bathroom","men","women","sink","washroom","lavatory"],icon:"toilets"},{name:"Waste Basket",tags:["trash","rubbish","bin","garbage"],icon:"waste-basket"},{name:"Music",tags:["stage","performance","band","concert","venue"],icon:"music"},{name:"Land Use",tags:["zoning","usage","area"],icon:"land-use"},{name:"City",tags:["area","point","place","urban"],icon:"city"},{name:"Town",tags:["area","point","place","small"],icon:"town"},{name:"Village",tags:["area","point","place","small","rural"],icon:"village"},{name:"Farm",tags:["building","farming","crops","plants","agriculture","rural"],icon:"farm"},{name:"Bakery",tags:["bakery","pastry","croissant","food","shop","bread"],icon:"bakery"},{name:"Dog Park",tags:["dog","pet"],icon:"dog-park"},{name:"Lighthouse",tags:["building","navigation","nautical","ocean","logistics"],icon:"lighthouse"},{name:"Clothing Store",tags:["clothing","store","shop"],icon:"clothing-store"},{name:"Polling Place",tags:["poll","polling","vote"],icon:"polling-place"},{name:"Playground",tags:["playground","play","park","children"],icon:"playground"},{name:"Entrance",tags:["entrance","enter","subway","rail"],icon:"entrance"},{name:"Heart",tags:["heart","love","shape","shapes","wedding"],icon:"heart"},{name:"London Underground",tags:["deprecated"],icon:"london-underground"},{name:"Minefield",tags:["deprecated"],icon:"minefield"},{name:"Rail Underground",tags:["deprecated"],icon:"rail-underground"},{name:"Rail Above",tags:["deprecated"],icon:"rail-above"},{name:"Camera",tags:["camera","photo","commercial","shop"],icon:"camera"},{name:"Laundry",tags:["laundry","washing machine","dry_cleaning","commercial","store"],icon:"laundry"},{name:"Car",tags:["car","auto","vehicle","transportation"],icon:"car"},{name:"Suitcase",tags:["suitcase","travel","travel agency","commercial","store"],icon:"suitcase"},{name:"Hairdresser",tags:["scissors","barber shop","barber","stylist","hair","cut","salon"],icon:"hairdresser"},{name:"Chemist",tags:["shop","science","chemistry","experiment","research","pharmacy"],icon:"chemist"},{name:"Mobile phone",tags:["phone","cellphone","communication","mobile"],icon:"mobilephone"},{name:"Scooter",tags:["bike","transportation","vehicle","route","moped","motorcycle"],icon:"scooter"},{name:"Gift",tags:["gift","shop","commercial","store"],icon:"gift"},{name:"Ice cream",tags:["ice","sweets","food","shop"],icon:"ice-cream"}]},{}],2:[function(a,b,c){b.exports={bing:{key:"Ag4-2f0g7bcmcVgKeNYvH_byJpiPQSx4F9l0aQaz9pDYMORbeBFZ0N3C3A5LSf65"},mapbox:{access_token:"pk.eyJ1IjoibnBzIiwiYSI6IkdfeS1OY1UifQ.K8Qn5ojTw4RV1GwBlsci-Q"},mapquest:{key:"Fmjtd|luu829urn5,a2=o5-9w1gh4"},mapzen:{api_key:"search-RZUX8gc"}}},{}],3:[function(a,b,c){window.L=a("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":48}],4:[function(a,b,c){a("./leaflet"),a("./npmap")},{"./leaflet":3,"./npmap":65}],5:[function(a,b,c){(function(d){var e=function(){"use strict";function b(a){if(!a||!a.length)return 0;for(var b=0,c=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return c}function e(a,b){return a.getElementsByTagName(b)}function f(a,b){return a.getAttribute(b)}function g(a,b){return parseFloat(f(a,b))}function h(a,b){var c=e(a,b);return c.length?c[0]:null}function i(a){return a.normalize&&a.normalize(),a}function j(a){for(var b=0,c=[];b<a.length;b++)c[b]=parseFloat(a[b]);return c}function k(a){return a&&i(a),a&&a.textContent||""}function l(a,b){var c,d,e={};for(d=0;d<b.length;d++)c=h(a,b[d]),c&&(e[b[d]]=k(c));return e}function m(a,b){for(var c in b)a[c]=b[c]}function n(a){return j(a.replace(t,"").split(","))}function o(a){for(var b=a.replace(u,"").split(v),c=[],d=0;d<b.length;d++)c.push(n(b[d]));return c}function p(a){var b,c=[g(a,"lon"),g(a,"lat")],d=h(a,"ele"),e=h(a,"gpxtpx:hr")||h(a,"hr"),f=h(a,"time");return d&&(b=parseFloat(k(d)),isNaN(b)||c.push(b)),{coordinates:c,time:f?k(f):null,heartRate:e?parseFloat(k(e)):null}}function q(){return{type:"FeatureCollection",features:[]}}function r(a){return void 0!==a.xml?a.xml:s.serializeToString(a)}var s,t=/\s*/g,u=/^\s*|\s*$/g,v=/\s+/;"undefined"!=typeof XMLSerializer?s=new XMLSerializer:"object"!=typeof c||"object"!=typeof d||d.browser||(s=new(a("xmldom").XMLSerializer));var w={kml:function(a){function c(a){var b,c;return a=a||"","#"===a.substr(0,1)&&(a=a.substr(1)),6!==a.length&&3!==a.length||(b=a),8===a.length&&(c=parseInt(a.substr(0,2),16)/255,b="#"+a.substr(6,2)+a.substr(4,2)+a.substr(2,2)),[b,isNaN(c)?void 0:c]}function d(a){return j(a.split(" "))}function g(a){var b=e(a,"coord","gx"),c=[],f=[];0===b.length&&(b=e(a,"gx:coord"));for(var g=0;g<b.length;g++)c.push(d(k(b[g])));for(var h=e(a,"when"),i=0;i<h.length;i++)f.push(k(h[i]));return{coords:c,times:f}}function i(a){var b,c,d,f,j,l=[],m=[];if(h(a,"MultiGeometry"))return i(h(a,"MultiGeometry"));if(h(a,"MultiTrack"))return i(h(a,"MultiTrack"));if(h(a,"gx:MultiTrack"))return i(h(a,"gx:MultiTrack"));for(d=0;d<u.length;d++)if(c=e(a,u[d]))for(f=0;f<c.length;f++)if(b=c[f],"Point"===u[d])l.push({type:"Point",coordinates:n(k(h(b,"coordinates")))});else if("LineString"===u[d])l.push({type:"LineString",coordinates:o(k(h(b,"coordinates")))});else if("Polygon"===u[d]){var p=e(b,"LinearRing"),q=[];for(j=0;j<p.length;j++)q.push(o(k(h(p[j],"coordinates"))));l.push({type:"Polygon",coordinates:q})}else if("Track"===u[d]||"gx:Track"===u[d]){var r=g(b);l.push({type:"LineString",coordinates:r.coords}),r.times.length&&m.push(r.times)}return{geoms:l,coordTimes:m}}function l(a){var b,d=i(a),g={},j=k(h(a,"name")),l=k(h(a,"address")),m=k(h(a,"styleUrl")),n=k(h(a,"description")),o=h(a,"TimeSpan"),q=h(a,"TimeStamp"),r=h(a,"ExtendedData"),u=h(a,"LineStyle"),v=h(a,"PolyStyle"),w=h(a,"visibility");if(!d.geoms.length)return[];if(j&&(g.name=j),l&&(g.address=l),m){"#"!==m[0]&&(m="#"+m),g.styleUrl=m,p[m]&&(g.styleHash=p[m]),t[m]&&(g.styleMapHash=t[m],g.styleHash=p[t[m].normal]);var x=s[g.styleHash];x&&(u||(u=h(x,"LineStyle")),v||(v=h(x,"PolyStyle")))}if(n&&(g.description=n),o){var y=k(h(o,"begin")),z=k(h(o,"end"));g.timespan={begin:y,end:z}}if(q&&(g.timestamp=k(h(q,"when"))),u){var A=c(k(h(u,"color"))),B=A[0],C=A[1],D=parseFloat(k(h(u,"width")));B&&(g.stroke=B),isNaN(C)||(g["stroke-opacity"]=C),isNaN(D)||(g["stroke-width"]=D)}if(v){var E=c(k(h(v,"color"))),F=E[0],G=E[1],H=k(h(v,"fill")),I=k(h(v,"outline"));F&&(g.fill=F),isNaN(G)||(g["fill-opacity"]=G),H&&(g["fill-opacity"]="1"===H?g["fill-opacity"]||1:0),I&&(g["stroke-opacity"]="1"===I?g["stroke-opacity"]||1:0)}if(r){var J=e(r,"Data"),K=e(r,"SimpleData");for(b=0;b<J.length;b++)g[J[b].getAttribute("name")]=k(h(J[b],"value"));for(b=0;b<K.length;b++)g[K[b].getAttribute("name")]=k(K[b])}w&&(g.visibility=k(w)),d.coordTimes.length&&(g.coordTimes=1===d.coordTimes.length?d.coordTimes[0]:d.coordTimes);var L={type:"Feature",geometry:1===d.geoms.length?d.geoms[0]:{type:"GeometryCollection",geometries:d.geoms},properties:g};return f(a,"id")&&(L.id=f(a,"id")),[L]}for(var m=q(),p={},s={},t={},u=["Polygon","LineString","Point","Track","gx:Track"],v=e(a,"Placemark"),w=e(a,"Style"),x=e(a,"StyleMap"),y=0;y<w.length;y++){var z=b(r(w[y])).toString(16);p["#"+f(w[y],"id")]=z,s[z]=w[y]}for(var A=0;A<x.length;A++){p["#"+f(x[A],"id")]=b(r(x[A])).toString(16);for(var B=e(x[A],"Pair"),C={},D=0;D<B.length;D++)C[k(h(B[D],"key"))]=k(h(B[D],"styleUrl"));t["#"+f(x[A],"id")]=C}for(var E=0;E<v.length;E++)m.features=m.features.concat(l(v[E]));return m},gpx:function(a){function b(a,b){var c=e(a,b),d=[],f=[],g=[],h=c.length;if(h<2)return{};for(var i=0;i<h;i++){var j=p(c[i]);d.push(j.coordinates),j.time&&f.push(j.time),j.heartRate&&g.push(j.heartRate)}return{line:d,times:f,heartRates:g}}function c(a){for(var c,d=e(a,"trkseg"),f=[],g=[],k=[],l=0;l<d.length;l++)c=b(d[l],"trkpt"),c&&(c.line&&f.push(c.line),c.times&&c.times.length&&g.push(c.times),c.heartRates&&c.heartRates.length&&k.push(c.heartRates));if(0!==f.length){var n=j(a);return m(n,i(h(a,"extensions"))),g.length&&(n.coordTimes=1===f.length?g[0]:g),k.length&&(n.heartRates=1===f.length?k[0]:k),{type:"Feature",properties:n,geometry:{type:1===f.length?"LineString":"MultiLineString",coordinates:1===f.length?f[0]:f}}}}function d(a){var c=b(a,"rtept");if(c.line){var d=j(a);m(d,i(h(a,"extensions")));var e={type:"Feature",properties:d,geometry:{type:"LineString",coordinates:c.line}};return e}}function g(a){var b=j(a);return m(b,l(a,["sym"])),{type:"Feature",properties:b,geometry:{type:"Point",coordinates:p(a).coordinates}}}function i(a){var b={};if(a){var c=h(a,"line");if(c){var d=k(h(c,"color")),e=parseFloat(k(h(c,"opacity"))),f=parseFloat(k(h(c,"width")));d&&(b.stroke=d),isNaN(e)||(b["stroke-opacity"]=e),isNaN(f)||(b["stroke-width"]=96*f/25.4)}}return b}function j(a){var b=l(a,["name","cmt","desc","type","time","keywords"]),c=e(a,"link");c.length&&(b.links=[]);for(var d,g=0;g<c.length;g++)d={href:f(c[g],"href")},m(d,l(c[g],["text","type"])),b.links.push(d);return b}var n,o,r=e(a,"trk"),s=e(a,"rte"),t=e(a,"wpt"),u=q();for(n=0;n<r.length;n++)o=c(r[n]),o&&u.features.push(o);for(n=0;n<s.length;n++)o=d(s[n]),o&&u.features.push(o);for(n=0;n<t.length;n++)u.features.push(g(t[n]));return u}};return w}();"undefined"!=typeof b&&(b.exports=e)}).call(this,a("_process"))},{_process:52,xmldom:7}],6:[function(a,b,c){(function(c,d){"use strict";function e(b,e){function f(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function g(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),f(c),a=c.join("/")),a}function h(a){return function(b){return g(b,a)}}function i(a){function b(b){o[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function j(a,c,f){var g,h,i,j;if(a)h=o[a]={},i={id:a,uri:d,exports:h},g=l(e,h,i,a);else{if(p)throw new Error("amdefine with no module ID cannot be called more than once per file.");p=!0,h=b.exports,i=b,g=l(e,h,i,b.id)}c&&(c=c.map(function(a){return g(a)})),j="function"==typeof f?f.apply(i.exports,c):f,void 0!==j&&(i.exports=j,a&&(o[a]=i.exports))}function k(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?n[a]=[a,b,c]:j(a,b,c)}var l,m,n={},o={},p=!1,q=a("path");return l=function(a,b,d,e){function f(f,g){return"string"==typeof f?m(a,b,d,f,e):(f=f.map(function(c){return m(a,b,d,c,e)}),void(g&&c.nextTick(function(){g.apply(null,f)})))}return f.toUrl=function(a){return 0===a.indexOf(".")?g(a,q.dirname(d.filename)):a},f},e=e||function(){return b.require.apply(b,arguments)},m=function(a,b,c,d,e){var f,k,p=d.indexOf("!"),q=d;if(p===-1){if(d=g(d,e),"require"===d)return l(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(o.hasOwnProperty(d))return o[d];if(n[d])return j.apply(null,n[d]),o[d];if(a)return a(q);throw new Error("No module with ID: "+d)}return f=d.substring(0,p),d=d.substring(p+1,d.length),k=m(a,b,c,f,e),d=k.normalize?k.normalize(d,h(e)):g(d,e),o[d]?o[d]:(k.load(d,l(a,b,c,e),i(d),{}),o[d])},k.require=function(a){return o[a]?o[a]:n[a]?(j.apply(null,n[a]),o[a]):void 0},k.amd={},k}b.exports=e}).call(this,a("_process"),"/node_modules/amdefine/amdefine.js")},{_process:52,path:51}],7:[function(a,b,c){},{}],8:[function(a,b,c){arguments[4][7][0].apply(c,arguments)},{dup:7}],9:[function(a,b,c){"use strict";function d(a,b){var c,d,e;for(var f in a)d=f.match(b),d&&(!c||d[0].length/f.length>e)&&(e=d[0].length/f.length,c=f);return c}function e(a){return d(a,r)}function f(a){return d(a,s)}function g(a){return!!a.match(r)}function h(a){return!!a.match(s)}function i(a){return"object"==typeof a?Object.keys(a).length:0}function j(a){var b=[",",";","\t","|"],c=[];return b.forEach(function(b){var d=p.dsvFormat(b).parse(a);if(d.length>=1){for(var e=i(d[0]),f=0;f<d.length;f++)if(i(d[f])!==e)return;c.push({delimiter:b,arity:Object.keys(d[0]).length})}}),c.length?c.sort(function(a,b){return b.arity-a.arity})[0].delimiter:null}function k(a){return delete a.columns,a}function l(a){var b=j(a);return b?k(p.dsvFormat(b).parse(a)):null}function m(a,b,c){c||(c=b,b={}),b.delimiter=b.delimiter||",";var d=b.latfield||"",g=b.lonfield||"",h=b.crs||"",i=[],k={type:"FeatureCollection",features:i};if(""!==h&&(k.crs={type:"name",properties:{name:h}}),"auto"===b.delimiter&&"string"==typeof a&&(b.delimiter=j(a),!b.delimiter))return void c({type:"Error",message:"Could not autodetect delimiter"});var l="string"==typeof a?p.dsvFormat(b.delimiter).parse(a):a;if(!l.length)return void c(null,k);var m,n=[];d||(d=e(l[0])),g||(g=f(l[0]));var o=!d||!g;if(o){for(m=0;m<l.length;m++)i.push({type:"Feature",properties:l[m],geometry:null});return void c(n.length?n:null,k)}for(m=0;m<l.length;m++)if(void 0!==l[m][g]&&void 0!==l[m][d]){var r,s,t,u=l[m][g],v=l[m][d];t=q(u,"EW"),t&&(u=t),t=q(v,"NS"),t&&(v=t),r=parseFloat(u),s=parseFloat(v),isNaN(r)||isNaN(s)?n.push({message:"A row contained an invalid value for latitude or longitude",row:l[m],index:m}):(b.includeLatLon||(delete l[m][g],delete l[m][d]),i.push({type:"Feature",properties:l[m],geometry:{type:"Point",coordinates:[parseFloat(r),parseFloat(s)]}}))}c(n.length?n:null,k)}function n(a){for(var b=a.features,c={type:"Feature",geometry:{type:"LineString",coordinates:[]}},d=0;d<b.length;d++)c.geometry.coordinates.push(b[d].geometry.coordinates);return c.properties=b.reduce(function(a,b){for(var c in b.properties)a[c]||(a[c]=[]),a[c].push(b.properties[c]);return a},{}),{type:"FeatureCollection",features:[c]}}function o(a){for(var b=a.features,c={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},d=0;d<b.length;d++)c.geometry.coordinates[0].push(b[d].geometry.coordinates);return c.properties=b.reduce(function(a,b){for(var c in b.properties)a[c]||(a[c]=[]),a[c].push(b.properties[c]);return a},{}),{type:"FeatureCollection",features:[c]}}var p=a("d3-dsv"),q=a("sexagesimal"),r=/(Lat)(itude)?/gi,s=/(L)(on|ng)(gitude)?/i;b.exports={isLon:h,isLat:g,guessLatHeader:e,guessLonHeader:f,csv:p.csvParse,tsv:p.tsvParse,dsv:p,auto:l,csv2geojson:m,toLine:n,toPolygon:o}},{"d3-dsv":11,sexagesimal:10}],10:[function(a,b,c){function d(a,b){return h(a,b).val}function e(a){return f(a.lat,"lat")+" "+f(a.lon,"lon")}function f(a,b){var c=g(a,b);return c.whole+"° "+(c.minutes?c.minutes+"' ":"")+(c.seconds?c.seconds+'" ':"")+c.dir}function g(a,b){var c={lat:["N","S"],lon:["E","W"]}[b]||"",d=c[a>=0?0:1],e=Math.abs(a),f=Math.floor(e),g=e-f,h=60*g,i=Math.floor(h),j=Math.floor(60*(h-i));return{whole:f,minutes:i,seconds:j,dir:d}}function h(a,b,c){if(b||(b="NSEW"),"string"!=typeof a)return{val:null,regex:c};c=c||/[\s\,]*([\-|\—|\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/gi;var d=c.exec(a);return d?d[4]&&b.indexOf(d[4])===-1?{val:null,regex:c}:{val:((d[1]?parseFloat(d[1]):0)+(d[2]?parseFloat(d[2])/60:0)+(d[3]?parseFloat(d[3])/3600:0))*(d[4]&&"S"===d[4]||"W"===d[4]?-1:1),regex:c,raw:d[0],dim:d[4]}:{val:null,regex:c}}function i(a,b){a=a.trim();var c=h(a,b);if(null===c.val)return null;var d=h(a,b,c.regex);return null===d.val?null:c.raw+d.raw!==a?null:c.dim?j(c.val,d.val,c.dim):[c.val,d.val]}function j(a,b,c){return"N"===c||"S"===c?[a,b]:"W"===c||"E"===c?[b,a]:void 0}b.exports=d,b.exports.pair=i,b.exports.format=f,b.exports.formatPair=e,b.exports.coordToDMS=g},{}],11:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d(a.d3=a.d3||{})}(this,function(a){"use strict";function b(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function c(a,c){var d=b(a);return function(b,e){return c(d(b),e,a)}}function d(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function e(a){function e(a,d){var e,g,h=f(a,function(a,f){return e?e(a,f-1):(g=a,void(e=d?c(a,d):b(a)))});return h.columns=g,h}function f(a,b){function c(){if(j>=i)return g;if(e)return e=!1,f;var b,c=j;if(34===a.charCodeAt(c)){for(var d=c;d++<i;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}return j=d+2,b=a.charCodeAt(d+1),13===b?(e=!0,10===a.charCodeAt(d+2)&&++j):10===b&&(e=!0),a.slice(c+1,d).replace(/""/g,'"')}for(;j<i;){var h=1;if(b=a.charCodeAt(j++),10===b)e=!0;else if(13===b)e=!0,10===a.charCodeAt(j)&&(++j,++h);else if(b!==l)continue;return a.slice(c,j-h)}return a.slice(c)}for(var d,e,f={},g={},h=[],i=a.length,j=0,k=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,k++))||h.push(m)}return h}function g(b,c){return null==c&&(c=d(b)),[c.map(j).join(a)].concat(b.map(function(b){return c.map(function(a){return j(b[a])}).join(a)})).join("\n")}function h(a){return a.map(i).join("\n")}function i(b){return b.map(j).join(a)}function j(a){return null==a?"":k.test(a+="")?'"'+a.replace(/\"/g,'""')+'"':a}var k=new RegExp('["'+a+"\n]"),l=a.charCodeAt(0);return{parse:e,parseRows:f,format:g,formatRows:h}}var f=e(","),g=f.parse,h=f.parseRows,i=f.format,j=f.formatRows,k=e("\t"),l=k.parse,m=k.parseRows,n=k.format,o=k.formatRows;a.dsvFormat=e,a.csvParse=g,a.csvParseRows=h,a.csvFormat=i,a.csvFormatRows=j,a.tsvParse=l,a.tsvParseRows=m,a.tsvFormat=n,a.tsvFormatRows=o,Object.defineProperty(a,"__esModule",{value:!0})})},{}],12:[function(a,b,c){!function(a){"use strict";function d(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a}function e(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate());b.setDate(b.getDate()-(b.getDay()+6)%7+3);var c=new Date(b.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);var d=b.getTimezoneOffset()-c.getTimezoneOffset();b.setHours(b.getHours()-d);var e=(b-c)/6048e5;return 1+Math.floor(e)}function f(a){var b=a.getDay();return 0===b&&(b=7),b}function g(a){return null===a?"null":void 0===a?"undefined":"object"!=typeof a?typeof a:Array.isArray(a)?"array":{}.toString.call(a).slice(8,-1).toLowerCase()}var h=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g;return function(i,j,k,l){if(1!==arguments.length||"string"!==g(i)||/\d/.test(i)||(j=i,i=void 0),i=i||new Date,i instanceof Date||(i=new Date(i)),isNaN(i))throw TypeError("Invalid date");j=String(h.masks[j]||j||h.masks.default);var m=j.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(j=j.slice(4),k=!0,"GMT:"===m&&(l=!0));var n=k?"getUTC":"get",o=i[n+"Date"](),p=i[n+"Day"](),q=i[n+"Month"](),r=i[n+"FullYear"](),s=i[n+"Hours"](),t=i[n+"Minutes"](),u=i[n+"Seconds"](),v=i[n+"Milliseconds"](),w=k?0:i.getTimezoneOffset(),x=e(i),y=f(i),z={d:o,dd:d(o),ddd:h.i18n.dayNames[p],dddd:h.i18n.dayNames[p+7],m:q+1,mm:d(q+1),mmm:h.i18n.monthNames[q],mmmm:h.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:s%12||12,hh:d(s%12||12),H:s,HH:d(s),M:t,MM:d(t),s:u,ss:d(u),l:d(v,3),L:d(Math.round(v/10)),t:s<12?"a":"p",tt:s<12?"am":"pm",T:s<12?"A":"P",TT:s<12?"AM":"PM",Z:l?"GMT":k?"UTC":(String(i).match(b)||[""]).pop().replace(c,""),o:(w>0?"-":"+")+d(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][o%10>3?0:(o%100-o%10!=10)*o%10],W:x,N:y};return j.replace(a,function(a){return a in z?z[a]:a.slice(1,a.length-1)})}}();h.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},h.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"==typeof define&&define.amd?define(function(){return h}):"object"==typeof c?b.exports=h:a.dateFormat=h}(this)},{}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i.default,a.Compiler=k.Compiler,a.JavaScriptCompiler=m.default,a.Parser=j.parser,a.parse=j.parse,a}c.__esModule=!0;var f=a("./handlebars.runtime"),g=d(f),h=a("./handlebars/compiler/ast"),i=d(h),j=a("./handlebars/compiler/base"),k=a("./handlebars/compiler/compiler"),l=a("./handlebars/compiler/javascript-compiler"),m=d(l),n=a("./handlebars/compiler/visitor"),o=d(n),p=a("./handlebars/no-conflict"),q=d(p),r=g.default.create,s=e();s.create=e,q.default(s),s.Visitor=o.default,s.default=s,c.default=s,b.exports=c.default},{"./handlebars.runtime":14,"./handlebars/compiler/ast":16,"./handlebars/compiler/base":17,"./handlebars/compiler/compiler":19,"./handlebars/compiler/javascript-compiler":21,"./handlebars/compiler/visitor":24,"./handlebars/no-conflict":38}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j.default,a.Exception=l.default,a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}c.__esModule=!0;var g=a("./handlebars/base"),h=e(g),i=a("./handlebars/safe-string"),j=d(i),k=a("./handlebars/exception"),l=d(k),m=a("./handlebars/utils"),n=e(m),o=a("./handlebars/runtime"),p=e(o),q=a("./handlebars/no-conflict"),r=d(q),s=f();s.create=f,r.default(s),s.default=s,c.default=s,b.exports=c.default},{"./handlebars/base":15,"./handlebars/exception":28,"./handlebars/no-conflict":38,"./handlebars/runtime":39,"./handlebars/safe-string":40,"./handlebars/utils":41}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}c.__esModule=!0,c.HandlebarsEnvironment=e;var f=a("./utils"),g=a("./exception"),h=d(g),i=a("./helpers"),j=a("./decorators"),k=a("./logger"),l=d(k),m="4.0.11";c.VERSION=m;var n=7;c.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};c.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l.default,log:l.default.log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h.default("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h.default('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h.default("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l.default.log;c.log=q,c.createFrame=f.createFrame,c.logger=l.default},{"./decorators":26,"./exception":28,"./helpers":29,"./logger":37,"./utils":41}],16:[function(a,b,c){"use strict";c.__esModule=!0;var d={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!d.helpers.scopedId(a)&&!a.depth}}};c.default=d,b.exports=c.default},{}],17:[function(a,b,c){
"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if("Program"===a.type)return a;h.default.yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j.default(b);return c.accept(h.default.parse(a))}c.__esModule=!0,c.parse=f;var g=a("./parser"),h=e(g),i=a("./whitespace-control"),j=e(i),k=a("./helpers"),l=d(k),m=a("../utils");c.parser=h.default;var n={};m.extend(n,l)},{"../utils":41,"./helpers":20,"./parser":22,"./whitespace-control":25}],18:[function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}c.__esModule=!0;var f=a("../utils"),g=void 0;try{if("function"!=typeof define||!define.amd){var h=a("source-map");g=h.SourceNode}}catch(a){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},c.default=e,b.exports=c.default},{"../utils":41,"source-map":54}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){}function f(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function g(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=l.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function h(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!h(a[c],b[c]))return!1;return!0}}function i(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}c.__esModule=!0,c.Compiler=e,c.precompile=f,c.compile=g;var j=a("../exception"),k=d(j),l=a("../utils"),m=a("./ast"),n=d(m),o=[].slice;e.prototype={compiler:e,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!h(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(this.options.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k.default("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){i(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k.default("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){i(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k.default("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n.default.helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n.default.helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n.default.helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n.default.helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n.default.helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},{"../exception":28,"../utils":41,"./ast":16}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q.default(a.path.original+" doesn't match "+b,c)}}function f(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function g(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function h(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function i(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function j(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;h<i;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new q.default("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function k(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function l(a,b,c,d){e(a,c),d=this.locInfo(d);var f={type:"Program",body:b,strip:{},loc:d};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:d}}function m(a,b,c,d,f,g){d&&d.path&&e(a,d);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q.default("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=d.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:d&&d.strip,loc:this.locInfo(g)}}function n(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function o(a,b,c,d){return e(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(d)}}c.__esModule=!0,c.SourceLocation=f,c.id=g,c.stripFlags=h,c.stripComment=i,c.preparePath=j,c.prepareMustache=k,c.prepareRawBlock=l,c.prepareBlock=m,c.prepareProgram=n,c.preparePartialBlock=o;var p=a("../exception"),q=d(p)},{"../exception":28}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){this.value=a}function f(){}function g(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}c.__esModule=!0;var h=a("../base"),i=a("../exception"),j=d(i),k=a("../utils"),l=a("./code-gen"),m=d(l);f.prototype={nameLookup:function(a,b){return f.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m.default(this.options.srcName),this.decorators=new m.default(this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)return void this.push(g(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){var g=f.nameLookup(e,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:f,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof e||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new e(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,d=void 0,f=void 0;if(!this.isInline())throw new j.default("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof e)c=[g.value],b=["(",c],f=!0;else{d=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),d&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof e)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof e)return c.value;if(!b){if(!this.stackSlot)throw new j.default("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof e?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=f.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),f.isValidJavaScriptVariableName=function(a){return!f.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},c.default=f,b.exports=c.default},{"../base":15,"../exception":28,"../utils":41,"./code-gen":18}],22:[function(a,b,c){"use strict";c.__esModule=!0;var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);
break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();c.default=d,b.exports=c.default},{}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(new f).accept(a)}function f(){this.padding=0}c.__esModule=!0,c.print=e,c.PrintVisitor=f;var g=a("./visitor"),h=d(g);f.prototype=new h.default,f.prototype.pad=function(a){for(var b="",c=0,d=this.padding;c<d;c++)b+="  ";return b+=a+"\n"},f.prototype.Program=function(a){var b="",c=a.body,d=void 0,e=void 0;if(a.blockParams){var f="BLOCK PARAMS: [";for(d=0,e=a.blockParams.length;d<e;d++)f+=" "+a.blockParams[d];f+=" ]",b+=this.pad(f)}for(d=0,e=c.length;d<e;d++)b+=this.accept(c[d]);return this.padding--,b},f.prototype.MustacheStatement=function(a){return this.pad("{{ "+this.SubExpression(a)+" }}")},f.prototype.Decorator=function(a){return this.pad("{{ DIRECTIVE "+this.SubExpression(a)+" }}")},f.prototype.BlockStatement=f.prototype.DecoratorBlock=function(a){var b="";return b+=this.pad(("DecoratorBlock"===a.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,b+=this.pad(this.SubExpression(a)),a.program&&(b+=this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--),a.inverse&&(a.program&&this.padding++,b+=this.pad("{{^}}"),this.padding++,b+=this.accept(a.inverse),this.padding--,a.program&&this.padding--),this.padding--,b},f.prototype.PartialStatement=function(a){var b="PARTIAL:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),this.pad("{{> "+b+" }}")},f.prototype.PartialBlockStatement=function(a){var b="PARTIAL BLOCK:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),b+=" "+this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--,this.pad("{{> "+b+" }}")},f.prototype.ContentStatement=function(a){return this.pad("CONTENT[ '"+a.value+"' ]")},f.prototype.CommentStatement=function(a){return this.pad("{{! '"+a.value+"' }}")},f.prototype.SubExpression=function(a){for(var b=a.params,c=[],d=void 0,e=0,f=b.length;e<f;e++)c.push(this.accept(b[e]));return b="["+c.join(", ")+"]",d=a.hash?" "+this.accept(a.hash):"",this.accept(a.path)+" "+b+d},f.prototype.PathExpression=function(a){var b=a.parts.join("/");return(a.data?"@":"")+"PATH:"+b},f.prototype.StringLiteral=function(a){return'"'+a.value+'"'},f.prototype.NumberLiteral=function(a){return"NUMBER{"+a.value+"}"},f.prototype.BooleanLiteral=function(a){return"BOOLEAN{"+a.value+"}"},f.prototype.UndefinedLiteral=function(){return"UNDEFINED"},f.prototype.NullLiteral=function(){return"NULL"},f.prototype.Hash=function(a){for(var b=a.pairs,c=[],d=0,e=b.length;d<e;d++)c.push(this.accept(b[d]));return"HASH{"+c.join(", ")+"}"},f.prototype.HashPair=function(a){return a.key+"="+this.accept(a.value)}},{"./visitor":24}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){this.parents=[]}function f(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function g(a){f.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function h(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}c.__esModule=!0;var i=a("../exception"),j=d(i);e.prototype={constructor:e,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!e.prototype[c.type])throw new j.default('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j.default(a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j.default("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:f,Decorator:f,BlockStatement:g,DecoratorBlock:g,PartialStatement:h,PartialBlockStatement:function(a){h.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:f,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},c.default=e,b.exports=c.default},{"../exception":28}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function f(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function g(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function h(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function i(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}c.__esModule=!0;var j=a("./visitor"),k=d(j);e.prototype=new k.default,e.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,e=0,j=d.length;e<j;e++){var k=d[e],l=this.accept(k);if(l){var m=f(d,e,c),n=g(d,e,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&h(d,e,!0),l.open&&i(d,e,!0),b&&q&&(h(d,e),i(d,e)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[e-1].original)[1])),b&&o&&(h((k.program||k.inverse).body),i(d,e)),b&&p&&(h(d,e),i((k.inverse||k.program).body))}}return a},e.prototype.BlockStatement=e.prototype.DecoratorBlock=e.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,e=c;if(c&&c.chained)for(d=c.body[0].program;e.chained;)e=e.body[e.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:g(b.body),closeStandalone:f((d||b).body)};if(a.openStrip.close&&h(b.body,null,!0),c){var k=a.inverseStrip;k.open&&i(b.body,null,!0),k.close&&h(d.body,null,!0),a.closeStrip.open&&i(e.body,null,!0),!this.options.ignoreStandalone&&f(b.body)&&g(d.body)&&(i(b.body),h(d.body))}else a.closeStrip.open&&i(b.body,null,!0);return j},e.prototype.Decorator=e.prototype.MustacheStatement=function(a){return a.strip},e.prototype.PartialStatement=e.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},c.default=e,b.exports=c.default},{"./visitor":24}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){g.default(a)}c.__esModule=!0,c.registerDefaultDecorators=e;var f=a("./decorators/inline"),g=d(f)},{"./decorators/inline":27}],27:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c.default=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},b.exports=c.default},{"../utils":41}],28:[function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=f,Object.defineProperty?Object.defineProperty(this,"column",{value:g,enumerable:!0}):this.column=g)}catch(a){}}c.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c.default=d,b.exports=c.default},{}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){g.default(a),i.default(a),k.default(a),m.default(a),o.default(a),q.default(a),s.default(a)}c.__esModule=!0,c.registerDefaultHelpers=e;var f=a("./helpers/block-helper-missing"),g=d(f),h=a("./helpers/each"),i=d(h),j=a("./helpers/helper-missing"),k=d(j),l=a("./helpers/if"),m=d(l),n=a("./helpers/log"),o=d(n),p=a("./helpers/lookup"),q=d(p),r=a("./helpers/with"),s=d(r)},{"./helpers/block-helper-missing":30,"./helpers/each":31,"./helpers/helper-missing":32,"./helpers/if":33,"./helpers/log":34,"./helpers/lookup":35,"./helpers/with":36}],30:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c.default=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},b.exports=c.default},{"../utils":41}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("../utils"),f=a("../exception"),g=d(f);c.default=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g.default("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),
e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},b.exports=c.default},{"../exception":28,"../utils":41}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("../exception"),f=d(e);c.default=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},b.exports=c.default},{"../exception":28}],33:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c.default=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},b.exports=c.default},{"../utils":41}],34:[function(a,b,c){"use strict";c.__esModule=!0,c.default=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},b.exports=c.default},{}],35:[function(a,b,c){"use strict";c.__esModule=!0,c.default=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},b.exports=c.default},{}],36:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c.default=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},b.exports=c.default},{"../utils":41}],37:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./utils"),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};c.default=e,b.exports=c.default},{"./utils":41}],38:[function(a,b,c){(function(a){"use strict";c.__esModule=!0,c.default=function(b){var c="undefined"!=typeof a?a:window,d=c.Handlebars;b.noConflict=function(){return c.Handlebars===b&&(c.Handlebars=d),b}},b.exports=c.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(b<c){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q.default("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=m(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q.default("No environment passed to template");if(!a||!a.main)throw new q.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q.default('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new q.default("must pass block params");if(a.useDepths&&!f)throw new q.default("must pass parent depths");return h(e,b,a[b],c,0,d,f)},d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==k&&!function(){c.data=r.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=r.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=o.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new q.default("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}c.__esModule=!0,c.checkRevision=f,c.template=g,c.wrapProgram=h,c.resolvePartial=i,c.invokePartial=j,c.noop=k;var n=a("./utils"),o=e(n),p=a("./exception"),q=d(p),r=a("./base")},{"./base":15,"./exception":28,"./utils":41}],40:[function(a,b,c){"use strict";function d(a){this.string=a}c.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c.default=d,b.exports=c.default},{}],41:[function(a,b,c){"use strict";function d(a){return l[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return n.test(a)?a.replace(m,d):a}function h(a){return!a&&0!==a||!(!q(a)||0!==a.length)}function i(a){var b=e({},a);return b._parent=a,b}function j(a,b){return a.path=b,a}function k(a,b){return(a?a+".":"")+b}c.__esModule=!0,c.extend=e,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.createFrame=i,c.blockParams=j,c.appendContextPath=k;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},m=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString;c.toString=o;var p=function(a){return"function"==typeof a};p(/x/)&&(c.isFunction=p=function(a){return"function"==typeof a&&"[object Function]"===o.call(a)}),c.isFunction=p;var q=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===o.call(a)};c.isArray=q},{}],42:[function(a,b,c){function d(b,c){var d=a("fs"),f=d.readFileSync(c,"utf8");b.exports=e.compile(f)}var e=a("../dist/cjs/handlebars").default,f=a("../dist/cjs/handlebars/compiler/printer");e.PrintVisitor=f.PrintVisitor,e.print=f.print,b.exports=e,"undefined"!=typeof a&&a.extensions&&(a.extensions[".handlebars"]=d,a.extensions[".hbs"]=d)},{"../dist/cjs/handlebars":13,"../dist/cjs/handlebars/compiler/printer":23,fs:8}],43:[function(a,b,c){"use strict";var d=a("dateformat");b.exports=function(a,b){return b=b||"now",a=a||"mmmm dd, yyyy",b="string"==typeof b&&"now"!==b||"number"==typeof b?new Date(b):new Date,d(b,a)}},{dateformat:12}],44:[function(a,b,c){!function(a,c,d){"undefined"!=typeof b?b.exports=d(a,c):"function"==typeof define&&"object"==typeof define.amd?define(d):c[a]=d(a,c)}("humane",this,function(a,b){var c=window,d=document,e={on:function(a,b,d){"addEventListener"in c?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)},off:function(a,b,d){"removeEventListener"in c?a.removeEventListener(b,d,!1):a.detachEvent("on"+b,d)},bind:function(a,b){return function(){a.apply(b,arguments)}},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},config:function(a,b){return null!=a?a:b},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var a=d.createElement("div"),b={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var c in b)c+"Transition"in a.style&&(this.vendorPrefix=b[c],this.transSupport=!0)}};e._checkTransition();var f=function(a){a||(a={}),this.queue=[],this.baseCls=a.baseCls||"humane",this.addnCls=a.addnCls||"",this.timeout="timeout"in a?a.timeout:2500,this.waitForMove=a.waitForMove||!1,this.clickToClose=a.clickToClose||!1,this.timeoutAfterMove=a.timeoutAfterMove||!1,this.container=a.container;try{this._setupEl()}catch(a){e.on(c,"load",e.bind(this._setupEl,this))}};return f.prototype={constructor:f,_setupEl:function(){var a=d.createElement("div");if(a.style.display="none",!this.container){if(!d.body)throw"document.body is null";this.container=d.body}this.container.appendChild(a),this.el=a,this.removeEvent=e.bind(function(){var a=e.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);a?setTimeout(e.bind(this.remove,this),a):this.remove()},this),this.transEvent=e.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){e.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(e.on(d.body,"mousemove",this.removeEvent),e.on(d.body,"click",this.removeEvent),e.on(d.body,"keypress",this.removeEvent),e.on(d.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var a=this.queue.shift(),b=e.config(a.clickToClose,this.clickToClose);b&&(e.on(this.el,"click",this.removeEvent),e.on(this.el,"touchstart",this.removeEvent));var c=e.config(a.timeout,this.timeout);c>0&&(this.currentTimer=setTimeout(e.bind(this._afterTimeout,this),c)),e.isArray(a.html)&&(a.html="<ul><li>"+a.html.join("<li>")+"</ul>"),this.el.innerHTML=a.html,this.currentMsg=a,this.el.className=this.baseCls,e.transSupport?(this.el.style.display="block",setTimeout(e.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(a){if(e.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*a}catch(a){}else this.el.style.opacity=String(a)},_showMsg:function(){var a=e.config(this.currentMsg.addnCls,this.addnCls);if(e.transSupport)this.el.className=this.baseCls+" "+a+" "+this.baseCls+"-animate";else{var b=0;this.el.className=this.baseCls+" "+a+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var c=this,d=setInterval(function(){b<1?(b+=.1,b>1&&(b=1),c._setOpacity(b)):clearInterval(d)},30)}},_hideMsg:function(){var a=e.config(this.currentMsg.addnCls,this.addnCls);if(e.transSupport)this.el.className=this.baseCls+" "+a,e.on(this.el,e.vendorPrefix?e.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var b=1,c=this,d=setInterval(function(){b>0?(b-=.1,b<0&&(b=0),c._setOpacity(b)):(c.el.className=c.baseCls+" "+a,clearInterval(d),c._afterAnimation())},30)},_afterAnimation:function(){e.transSupport&&e.off(this.el,e.vendorPrefix?e.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(a){var b="function"==typeof a?a:null;e.off(d.body,"mousemove",this.removeEvent),e.off(d.body,"click",this.removeEvent),e.off(d.body,"keypress",this.removeEvent),e.off(d.body,"touchstart",this.removeEvent),e.off(this.el,"click",this.removeEvent),e.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,b&&this.currentMsg&&(this.currentMsg.cb=b),this._animating?this._hideMsg():b&&b()},log:function(a,b,c,d){var e={};if(d)for(var f in d)e[f]=d[f];if("function"==typeof b)c=b;else if(b)for(var f in b)e[f]=b[f];return e.html=a,c&&(e.cb=c),this.queue.push(e),this._run(),this},spawn:function(a){var b=this;return function(c,d,e){return b.log.call(b,c,d,e,a),b}},create:function(a){return new f(a)}},new f})},{}],45:[function(a,b,c){!function(a,b,c){L.drawVersion="0.4.9",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(a,b){this._map=a,this._container=a._container,this._overlayPane=a._panes.overlayPane,this._popupPane=a._panes.popupPane,b&&b.shapeOptions&&(b.shapeOptions=L.Util.extend({},this.options.shapeOptions,b.shapeOptions)),L.setOptions(this,b)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(L.DomUtil.disableTextSelection(),a.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(a){this._map.fire(L.Draw.Event.CREATED,{layer:a,layerType:this.type})},_cancelDrawing:function(a){this._map.fire("draw:canceled",{layerType:this.type}),27===a.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3},initialize:function(a,b){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,b&&b.drawError&&(b.drawError=L.Util.extend({},this.options.drawError,b.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var a=this._markers.pop(),b=this._poly,c=b.getLatLngs(),d=c.splice(-1,1)[0];this._poly.setLatLngs(c),this._markerGroup.removeLayer(a),b.getLatLngs().length<2&&this._map.removeLayer(b),this._vertexChanged(d,!1)}},addVertex:function(a){var b=this._markers.length;return b>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(a)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(a)),this._poly.addLatLng(a),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(a,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var a=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),b=this._poly.newLatLngIntersects(a[a.length-1]);return!this.options.allowIntersection&&b||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(a){var b=this._map.mouseEventToLayerPoint(a.originalEvent),c=this._map.layerPointToLatLng(b);this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(b),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(a.originalEvent)},_vertexChanged:function(a,b){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(a,b),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(a){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(a),this._clickHandled=!0,this._disableNewMarkers();var b=a.originalEvent,c=b.clientX,d=b.clientY;this._startPoint.call(this,c,d)}},_startPoint:function(a,b){this._mouseDownOrigin=L.point(a,b)},_onMouseUp:function(a){var b=a.originalEvent,c=b.clientX,d=b.clientY;this._endPoint.call(this,c,d,a),this._clickHandled=null},_endPoint:function(b,c,d){if(this._mouseDownOrigin){var e=L.point(b,c).distanceTo(this._mouseDownOrigin),f=this._calculateFinishDistance(d.latlng);f<10&&L.Browser.touch?this._finishShape():Math.abs(e)<9*(a.devicePixelRatio||1)&&this.addVertex(d.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(a){var b,c,d=a.originalEvent;!d.touches||!d.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(b=d.touches[0].clientX,c=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,b,c),this._endPoint.call(this,b,c,a),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(a){var b;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE)c=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;c=this._markers[0]}var d=this._map.latLngToContainerPoint(c.getLatLng()),e=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),f=this._map.latLngToContainerPoint(e.getLatLng());b=d.distanceTo(f)}else b=1/0;return b},_updateFinishHandler:function(){var a=this._markers.length;a>1&&this._markers[a-1].on("click",this._finishShape,this),a>2&&this._markers[a-2].off("click",this._finishShape,this)},_createMarker:function(a){var b=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(b),b},_updateGuide:function(a){var b=this._markers?this._markers.length:0;b>0&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[b-1].getLatLng()),a))},_updateTooltip:function(a){var b=this._getTooltipText();a&&this._tooltip.updatePosition(a),this._errorShown||this._tooltip.updateContent(b)},_drawGuide:function(a,b){var c,d,e,f=Math.floor(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))),g=this.options.guidelineDistance,h=this.options.maxGuideLineLength,i=f>h?f-h:g;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));i<f;i+=this.options.guidelineDistance)c=i/f,d={x:Math.floor(a.x*(1-c)+c*b.x),y:Math.floor(a.y*(1-c)+c*b.y)},e=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),e.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(e,d)},_updateGuideColor:function(a){if(this._guidesContainer)for(var b=0,c=this._guidesContainer.childNodes.length;b<c;b++)this._guidesContainer.childNodes[b].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a,b,c=this.options.showLength;return L.Browser.touch&&(c=!1),0===this._markers.length?a={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(b=c?this._getMeasurementString():"",a=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:b}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:b}),a},_updateRunningMeasure:function(a,b){var c,d,e=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(c=e-(b?2:1),d=a.distanceTo(this._markers[c].getLatLng()),this._measurementRunningTotal+=d*(b?1:-1))},_getMeasurementString:function(){var a,b=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return a=this._measurementRunningTotal+b.distanceTo(c),L.GeometryUtil.readableDistance(a,this.options.metric,this.options.feet,this.options.nautic)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(a,b){L.Draw.Polyline.prototype.initialize.call(this,a,b),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var a=this._markers.length;1===a&&this._markers[0].on("click",this._finishShape,this),a>2&&(this._markers[a-1].on("dblclick",this._finishShape,this),a>3&&this._markers[a-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var a,b;return 0===this._markers.length?a=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?a=L.drawLocal.draw.handlers.polygon.tooltip.cont:(a=L.drawLocal.draw.handlers.polygon.tooltip.end,b=this._getMeasurementString()),{text:a,subtext:b}},_getMeasurementString:function(){var a=this._area;return a?L.GeometryUtil.readableArea(a,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(a,b){var c;!this.options.allowIntersection&&this.options.showArea&&(c=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(c)),L.Draw.Polyline.prototype._vertexChanged.call(this,a,b)},_cleanUpShape:function(){var a=this._markers.length;a>0&&(this._markers[0].off("click",this._finishShape,this),a>2&&this._markers[a-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(a,b){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(b,"mouseup",this._onMouseUp,this),L.DomEvent.off(b,"touchend",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(a){this._isDrawing=!0,this._startLatLng=a.latlng,L.DomEvent.on(b,"mouseup",this._onMouseUp,this).on(b,"touchend",this._onMouseUp,this).preventDefault(a.originalEvent)},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(b))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(a,b){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_getTooltipText:function(){var a,b,c,d=L.Draw.SimpleShape.prototype._getTooltipText.call(this),e=this._shape,f=this.options.showArea;return e&&(a=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),b=L.GeometryUtil.geodesicArea(a),c=f?L.GeometryUtil.readableArea(b,this.options.metric):""),{text:d.text,subtext:c}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(a,b){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(a)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){var b,c=a.latlng,d=this.options.showRadius,e=this.options.metric;
if(this._tooltip.updatePosition(c),this._isDrawing){this._drawShape(c),b=this._shape.getRadius().toFixed(1);var f="";d&&(f=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(b,e,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:f})}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(a,b){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._mouseMarker.setLatLng(b),this._marker?(b=this._mouseMarker.getLatLng(),this._marker.setLatLng(b)):(this._marker=new L.Marker(b,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(a){this._onMouseMove(a),this._onClick()},_fireCreatedEvent:function(){var a=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(a,b){this._marker=a,L.setOptions(this,b)},addHooks:function(){var a=this._marker;a.dragging.enable(),a.on("dragend",this._onDragEnd,a),this._toggleMarkerHighlight()},removeHooks:function(){var a=this._marker;a.dragging.disable(),a.off("dragend",this._onDragEnd,a),this._toggleMarkerHighlight()},_onDragEnd:function(a){var b=a.target;b.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:b})},_toggleMarkerHighlight:function(){var a=this._marker._icon;a&&(a.style.display="none",L.DomUtil.hasClass(a,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(a,"leaflet-edit-marker-selected"),this._offsetMarker(a,-4)):(L.DomUtil.addClass(a,"leaflet-edit-marker-selected"),this._offsetMarker(a,4)),a.style.display="")},_offsetMarker:function(a,b){var c=parseInt(a.style.marginTop,10)-b,d=parseInt(a.style.marginLeft,10)-b;a.style.marginTop=c+"px",a.style.marginLeft=d+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{},initialize:function(a,b){this.latlngs=[a._latlngs],a._holes&&(this.latlngs=this.latlngs.concat(a._holes)),this._poly=a,L.setOptions(this,b),this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(a){for(var b=0;b<this._verticesHandlers.length;b++)a(this._verticesHandlers[b])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(a){a.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(a){a.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(a){a.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var a=0;a<this.latlngs.length;a++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[a],this.options))},_updateLatLngs:function(a){this.latlngs=[a.layer._latlngs],a.layer._holes&&(this.latlngs=this.latlngs.concat(a.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(a,b,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=a,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this._latlngs=b,L.setOptions(this,c)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var a=this._poly;a instanceof L.Polygon||(a.options.fill=!1,a.options.editing&&(a.options.editing.fill=!1)),a.setStyle(a.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var a=this._poly;a.setStyle(a.options.original),a._map&&(a._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var a,b,c,d,e=this._defaultShape();for(a=0,c=e.length;a<c;a++)d=this._createMarker(e[a],a),d.on("click",this._onMarkerClick,this),this._markers.push(d);var f,g;for(a=0,b=c-1;a<c;b=a++)(0!==a||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[b],g=this._markers[a],this._createMiddleMarker(f,g),this._updatePrevNext(f,g))},_createMarker:function(a,b){var c=new L.Marker.Touch(a,{draggable:!0,icon:this.options.icon});return c._origLatLng=a,c._index=b,c.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(c),c},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var a=this._defaultShape(),b=[].splice.apply(a,arguments);return this._poly._convertLatLngs(a,!0),this._poly.redraw(),b},_removeMarker:function(a){var b=a._index;this._markerGroup.removeLayer(a),this._markers.splice(b,1),this._spliceLatLngs(b,1),this._updateIndexes(b,-1),a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(a){var b=a.target,c=this._poly;if(L.extend(b._origLatLng,b._latlng),b._middleLeft&&b._middleLeft.setLatLng(this._getMiddleLatLng(b._prev,b)),b._middleRight&&b._middleRight.setLatLng(this._getMiddleLatLng(b,b._next)),c.options.poly){var d=c._map._editTooltip;if(!c.options.poly.allowIntersection&&c.intersects()){var e=c.options.color;c.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&b.dragging._draggable._onUp(a),this._onMarkerClick(a),d&&d.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){c.setStyle({color:e}),d&&d.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(a){var b=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=a.target;this._defaultShape().length<b||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_onTouchMove:function(a){var b=this._map.mouseEventToLayerPoint(a.originalEvent.touches[0]),c=this._map.layerPointToLatLng(b),d=a.target;L.extend(d._origLatLng,c),d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(a,b){this._markerGroup.eachLayer(function(c){c._index>a&&(c._index+=b)})},_createMiddleMarker:function(a,b){var c,d,e,f=this._getMiddleLatLng(a,b),g=this._createMarker(f);g.setOpacity(.6),a._middleRight=b._middleLeft=g,d=function(){g.off("touchmove",d,this);var e=b._index;g._index=e,g.off("click",c,this).on("click",this._onMarkerClick,this),f.lat=g.getLatLng().lat,f.lng=g.getLatLng().lng,this._spliceLatLngs(e,0,f),this._markers.splice(e,0,g),g.setOpacity(1),this._updateIndexes(e,1),b._index++,this._updatePrevNext(a,g),this._updatePrevNext(g,b),this._poly.fire("editstart")},e=function(){g.off("dragstart",d,this),g.off("dragend",e,this),g.off("touchmove",d,this),this._createMiddleMarker(a,g),this._createMiddleMarker(g,b)},c=function(){d.call(this),e.call(this),this._fireEdit()},g.on("click",c,this).on("dragstart",d,this).on("dragend",e,this).on("touchmove",d,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(a,b){a&&(a._next=b),b&&(b._prev=a)},_getMiddleLatLng:function(a,b){var c=this._poly._map,d=c.project(a.getLatLng()),e=c.project(b.getLatLng());return c.unproject(d._add(e)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this,this.options.poly),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(a,b){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=a,L.Util.setOptions(this,b)},addHooks:function(){var a=this._shape;this._shape._map&&(this._map=this._shape._map,a.setStyle(a.options.editing),a._map&&(this._map=a._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var a=this._shape;if(a.setStyle(a.options.original),a._map){this._unbindMarker(this._moveMarker);for(var b=0,c=this._resizeMarkers.length;b<c;b++)this._unbindMarker(this._resizeMarkers[b]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(a,b){var c=new L.Marker.Touch(a,{draggable:!0,icon:b,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(a){a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(a){a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(a){var b=a.target;b.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(a){var b=a.target,c=b.getLatLng();b===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(a){var b=a.target;b.setOpacity(1),this._fireEdit()},_onTouchStart:function(a){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a),"function"==typeof this._getCorners){var b=this._getCorners(),c=a.target,d=c._cornerIndex;c.setOpacity(0),this._oppositeCorner=b[(d+2)%4],this._toggleCornerMarkers(0,d)}this._shape.fire("editstart")},_onTouchMove:function(a){var b=this._map.mouseEventToLayerPoint(a.originalEvent.touches[0]),c=this._map.layerPointToLatLng(b),d=a.target;return d===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),!1},_onTouchEnd:function(a){var b=a.target;b.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getBounds(),b=a.getCenter();this._moveMarker=this._createMarker(b,this.options.moveIcon)},_createResizeMarker:function(){var a=this._getCorners();this._resizeMarkers=[];for(var b=0,c=a.length;b<c;b++)this._resizeMarkers.push(this._createMarker(a[b],this.options.resizeIcon)),this._resizeMarkers[b]._cornerIndex=b},_onMarkerDragStart:function(a){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a);var b=this._getCorners(),c=a.target,d=c._cornerIndex;this._oppositeCorner=b[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(a){var b,c,d=a.target;d===this._moveMarker&&(b=this._shape.getBounds(),c=b.getCenter(),d.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,a)},_move:function(a){for(var b,c=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=this._shape.getBounds(),e=d.getCenter(),f=[],g=0,h=c.length;g<h;g++)b=[c[g].lat-e.lat,c[g].lng-e.lng],f.push([a.lat+b[0],a.lng+b[1]]);this._shape.setLatLngs(f),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(a){var b;this._shape.setBounds(L.latLngBounds(a,this._oppositeCorner)),b=this._shape.getBounds(),this._moveMarker.setLatLng(b.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var a=this._shape.getBounds(),b=a.getNorthWest(),c=a.getNorthEast(),d=a.getSouthEast(),e=a.getSouthWest();return[b,c,d,e]},_toggleCornerMarkers:function(a){for(var b=0,c=this._resizeMarkers.length;b<c;b++)this._resizeMarkers[b].setOpacity(a)},_repositionCornerMarkers:function(){for(var a=this._getCorners(),b=0,c=this._resizeMarkers.length;b<c;b++)this._resizeMarkers[b].setLatLng(a[b])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getLatLng();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var a=this._shape.getLatLng(),b=this._getResizeMarkerPoint(a);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(b,this.options.resizeIcon))},_getResizeMarkerPoint:function(a){var b=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(a);return this._map.unproject([c.x+b,c.y-b])},_move:function(a){var b=this._getResizeMarkerPoint(a);this._resizeMarkers[0].setLatLng(b),this._shape.setLatLng(a),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(a){var b=this._moveMarker.getLatLng(),c=b.distanceTo(a);this._shape.setRadius(c),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(a,b){var c={};if("undefined"!=typeof a.touches){if(!a.touches.length)return;c=a.touches[0]}else{if("touch"!==a.pointerType)return;if(c=a,!this._filterClick(a))return}var d=this._map.mouseEventToContainerPoint(c),e=this._map.mouseEventToLayerPoint(c),f=this._map.layerPointToLatLng(e);this._map.fire(b,{latlng:f,layerPoint:e,containerPoint:d,pageX:c.pageX,pageY:c.pageY,originalEvent:a})},_filterClick:function(a){var b=a.timeStamp||a.originalEvent.timeStamp,c=L.DomEvent._lastClick&&b-L.DomEvent._lastClick;return c&&c>100&&c<500||a.target._simulatedClick&&!a._simulated?(L.DomEvent.stop(a),!1):(L.DomEvent._lastClick=b,!0)},_onTouchStart:function(a){if(this._map._loaded){var b="touchstart";this._touchEvent(a,b)}},_onTouchEnd:function(a){if(this._map._loaded){var b="touchend";this._touchEvent(a,b)}},_onTouchCancel:function(a){if(this._map._loaded){var b="touchcancel";this._detectIE()&&(b="pointercancel"),this._touchEvent(a,b)}},_onTouchLeave:function(a){if(this._map._loaded){var b="touchleave";this._touchEvent(a,b)}},_onTouchMove:function(a){if(this._map._loaded){var b="touchmove";this._touchEvent(a,b)}},_detectIE:function(){var b=a.navigator.userAgent,c=b.indexOf("MSIE ");if(c>0)return parseInt(b.substring(c+5,b.indexOf(".",c)),10);var d=b.indexOf("Trident/");if(d>0){var e=b.indexOf("rv:");return parseInt(b.substring(e+3,b.indexOf(".",e)),10)}var f=b.indexOf("Edge/");return f>0&&parseInt(b.substring(f+5,b.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?b.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):b.concat(["touchcancel"]),L.DomUtil.addClass(a,"leaflet-clickable"),L.DomEvent.on(a,"click",this._onMouseClick,this),L.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)L.DomEvent.on(a,b[c],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var b=a.navigator.userAgent,c=b.indexOf("MSIE ");if(c>0)return parseInt(b.substring(c+5,b.indexOf(".",c)),10);var d=b.indexOf("Trident/");if(d>0){var e=b.indexOf("rv:");return parseInt(b.substring(e+3,b.indexOf(".",e)),10)}var f=b.indexOf("Edge/");return f>0&&parseInt(b.substring(f+5,b.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(a){for(var b=[],c=0,d=a.length;c<d;c++)Array.isArray(a[c])?b.push(L.LatLngUtil.cloneLatLngs(a[c])):b.push(this.cloneLatLng(a[c]));return b},cloneLatLng:function(a){return L.latLng(a.lat,a.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var b,c,d=a.length,e=0,f=Math.PI/180;if(d>2){for(var g=0;g<d;g++)b=a[g],c=a[(g+1)%d],e+=(c.lng-b.lng)*f*(2+Math.sin(b.lat*f)+Math.sin(c.lat*f));e=6378137*e*6378137/2}return Math.abs(e)},readableArea:function(a,b){var c;return b?c=a>=1e4?(1e-4*a).toFixed(2)+" ha":a.toFixed(2)+" m&sup2;":(a/=.836127,c=a>=3097600?(a/3097600).toFixed(2)+" mi&sup2;":a>=4840?(a/4840).toFixed(2)+" acres":Math.ceil(a)+" yd&sup2;"),c},readableDistance:function(a,b,c,d){var e,f;switch(f="string"==typeof b?b:c?"feet":d?"nauticalMile":b?"metric":"yards"){case"metric":e=a>1e3?(a/1e3).toFixed(2)+" km":Math.ceil(a)+" m";break;case"feet":a*=3.28083,e=Math.ceil(a)+" ft";break;case"nauticalMile":a*=.53996,e=(a/1e3).toFixed(2)+" nm";break;case"yards":default:a*=1.09361,e=a>1760?(a/1760).toFixed(2)+" miles":Math.ceil(a)+" yd"}return e}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(a,b,c,d){return this._checkCounterclockwise(a,c,d)!==this._checkCounterclockwise(b,c,d)&&this._checkCounterclockwise(a,b,c)!==this._checkCounterclockwise(a,b,d)},_checkCounterclockwise:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}}),L.Polyline.include({intersects:function(){var a,b,c,d=this._getProjectedPoints(),e=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=e-1;a>=3;a--)if(b=d[a-1],c=d[a],this._lineSegmentsIntersectsRange(b,c,a-2))return!0;return!1},newLatLngIntersects:function(a,b){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(a),b)},newPointIntersects:function(a,b){var c=this._getProjectedPoints(),d=c?c.length:0,e=c?c[d-1]:null,f=d-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(e,a,f,b?1:0)},_tooFewPointsForIntersection:function(a){var b=this._getProjectedPoints(),c=b?b.length:0;return c+=a||0,!b||c<=3},_lineSegmentsIntersectsRange:function(a,b,c,d){var e,f,g=this._getProjectedPoints();d=d||0;for(var h=c;h>d;h--)if(e=g[h-1],f=g[h],L.LineUtil.segmentsIntersect(a,b,e,f))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var a=[],b=this._defaultShape(),c=0;c<b.length;c++)a.push(this._map.latLngToLayerPoint(b[c]));return a}}),L.Polygon.include({intersects:function(){var a,b,c,d,e,f=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!(a=L.Polyline.prototype.intersects.call(this))||(b=f.length,c=f[0],d=f[b-1],e=b-2,this._lineSegmentsIntersectsRange(d,c,e,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(a){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,a);var b;this._toolbars={},L.DrawToolbar&&this.options.draw&&(b=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=b,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(b=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=b,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(a){var b,c=L.DomUtil.create("div","leaflet-draw"),d=!1,e="leaflet-draw-toolbar-top";for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(b=this._toolbars[f].addToolbar(a),b&&(d||(L.DomUtil.hasClass(b,e)||L.DomUtil.addClass(b.childNodes[0],e),d=!0),c.appendChild(b)));return c},onRemove:function(){for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&this._toolbars[a].removeToolbar()},setDrawingOptions:function(a){for(var b in this._toolbars)this._toolbars[b]instanceof L.DrawToolbar&&this._toolbars[b].setOptions(a)},_toolbarEnabled:function(a){var b=a.target;for(var c in this._toolbars)this._toolbars[c]!==b&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(a){L.setOptions(this,a),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(a){var b,c=L.DomUtil.create("div","leaflet-draw-section"),d=0,e=this._toolbarClass||"",f=this.getModeHandlers(a);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=a,b=0;b<f.length;b++)f[b].enabled&&this._initModeHandler(f[b].handler,this._toolbarContainer,d++,e,f[b].title);if(d)return this._lastButtonIndex=--d,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),c.appendChild(this._toolbarContainer),c.appendChild(this._actionsContainer),c},removeToolbar:function(){for(var a in this._modes)this._modes.hasOwnProperty(a)&&(this._disposeButton(this._modes[a].button,this._modes[a].handler.enable,this._modes[a].handler),this._modes[a].handler.disable(),this._modes[a].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var b=0,c=this._actionButtons.length;b<c;b++)this._disposeButton(this._actionButtons[b].button,this._actionButtons[b].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(a,b,c,d,e){var f=a.type;this._modes[f]={},this._modes[f].handler=a,this._modes[f].button=this._createButton({type:f,title:e,className:d+"-"+f,container:b,callback:this._modes[f].handler.enable,context:this._modes[f].handler}),this._modes[f].buttonIndex=c,this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(a){var b=L.DomUtil.create("a",a.className||"",a.container),c=L.DomUtil.create("span","sr-only",a.container);return b.href="#",b.appendChild(c),a.title&&(b.title=a.title,c.innerHTML=a.title),a.text&&(b.innerHTML=a.text,c.innerHTML=a.text),L.DomEvent.on(b,"click",L.DomEvent.stopPropagation).on(b,"mousedown",L.DomEvent.stopPropagation).on(b,"dblclick",L.DomEvent.stopPropagation).on(b,"touchstart",L.DomEvent.stopPropagation).on(b,"click",L.DomEvent.preventDefault).on(b,"click",a.callback,a.context),b},_disposeButton:function(a,b){L.DomEvent.off(a,"click",L.DomEvent.stopPropagation).off(a,"mousedown",L.DomEvent.stopPropagation).off(a,"dblclick",L.DomEvent.stopPropagation).off(a,"touchstart",L.DomEvent.stopPropagation).off(a,"click",L.DomEvent.preventDefault).off(a,"click",b)},_handlerActivated:function(a){this.disable(),this._activeMode=this._modes[a.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(a){var b,c,d,e,f=this._actionsContainer,g=this.getActions(a),h=g.length;for(c=0,d=this._actionButtons.length;c<d;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback);for(this._actionButtons=[];f.firstChild;)f.removeChild(f.firstChild);for(var i=0;i<h;i++)"enabled"in g[i]&&!g[i].enabled||(b=L.DomUtil.create("li","",f),e=this._createButton({title:g[i].title,text:g[i].text,container:b,callback:g[i].callback,context:g[i].context}),this._actionButtons.push({button:e,callback:g[i].callback}))},_showActionsToolbar:function(){var a=this._activeMode.buttonIndex,b=this._lastButtonIndex,c=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=c+"px",0===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),a===b&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(a){this._map=a,this._popupPane=a._panes.popupPane,this._container=a.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(a){return this._container?(a.subtext=a.subtext||"",0!==a.subtext.length||this._singleLineLabel?a.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(a.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+a.subtext+"</span><br />":"")+"<span>"+a.text+"</span>",this):this},updatePosition:function(a){var b=this._map.latLngToLayerPoint(a),c=this._container;return this._container&&(c.style.visibility="inherit",L.DomUtil.setPosition(c,b)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(a){for(var b in this.options)this.options.hasOwnProperty(b)&&a[b]&&(a[b]=L.extend({},this.options[b],a[b]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,a)},getModeHandlers:function(a){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(a,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(a,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(a,this.options.rectangle),
title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(a,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(a,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(a){return[{enabled:a.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:a.completeShape,context:a},{enabled:a.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:a.deleteLastVertex,context:a},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(a){L.setOptions(this,a);for(var b in this._modes)this._modes.hasOwnProperty(b)&&a.hasOwnProperty(b)&&this._modes[b].handler.setOptions(a[b])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(a){a.edit&&("undefined"==typeof a.edit.selectedPathOptions&&(a.edit.selectedPathOptions=this.options.edit.selectedPathOptions),a.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,a.edit.selectedPathOptions)),a.remove&&(a.remove=L.extend({},this.options.remove,a.remove)),a.poly&&(a.poly=L.extend({},this.options.poly,a.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,a),this._selectedFeatureCount=0},getModeHandlers:function(a){var b=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(a,{featureGroup:b,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(a,{featureGroup:b}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(a){var b=L.Toolbar.prototype.addToolbar.call(this,a);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),b},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var a,b=this.options.featureGroup,c=0!==b.getLayers().length;this.options.edit&&(a=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(a=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),L.setOptions(this,b),this._featureGroup=b.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),a._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup;this._featureGroup.eachLayer(function(b){b.edited&&(a.addLayer(b),b.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:a})},_backupLayer:function(a){var b=L.Util.stamp(a);this._uneditedLayerProps[b]||(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?this._uneditedLayerProps[b]={latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())}:a instanceof L.Circle?this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()}:a instanceof L.Marker&&(this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(a){var b=L.Util.stamp(a);a.edited=!1,this._uneditedLayerProps.hasOwnProperty(b)&&(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?a.setLatLngs(this._uneditedLayerProps[b].latlngs):a instanceof L.Circle?(a.setLatLng(this._uneditedLayerProps[b].latlng),a.setRadius(this._uneditedLayerProps[b].radius)):a instanceof L.Marker&&a.setLatLng(this._uneditedLayerProps[b].latlng),a.fire("revert-edited",{layer:a}))},_enableLayerEdit:function(a){var b,c,d=a.layer||a.target||a;this._backupLayer(d),this.options.poly&&(c=L.Util.extend({},this.options.poly),d.options.poly=c),this.options.selectedPathOptions&&(b=L.Util.extend({},this.options.selectedPathOptions),b.maintainColor&&(b.color=d.options.color,b.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=b),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(a){var b=a.layer||a.target||a;b.edited=!1,b.editing&&b.editing.disable(),delete b.options.editing,delete b.options.original,this._selectedPathOptions&&(b instanceof L.Marker?this._toggleMarkerHighlight(b):(b.setStyle(b.options.previousOptions),delete b.options.previousOptions)),b instanceof L.Marker?(b.dragging.disable(),b.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):b.editing.disable()},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_onMarkerDragEnd:function(a){var b=a.target;b.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:b})},_onTouchMove:function(a){var b=a.originalEvent.changedTouches[0],c=this._map.mouseEventToLayerPoint(b),d=this._map.layerPointToLatLng(c);a.target.setLatLng(d)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),L.Util.setOptions(this,b),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a),a.fire("revert-deleted",{layer:a})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},_enableLayerDelete:function(a){var b=a.layer||a.target||a;b.on("click",this._removeLayer,this)},_disableLayerDelete:function(a){var b=a.layer||a.target||a;b.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(b)},_removeLayer:function(a){var b=a.layer||a.target||a;this._deletableLayers.removeLayer(b),this._deletedLayers.addLayer(b),b.fire("deleted")},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},{}],46:[function(a,b,c){(function(a){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d():"function"==typeof define&&define.amd?define(d):d()}(0,function(){"use strict";function b(a,b){return b={exports:{}},a(b,b.exports),b.exports}var c="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},d=b(function(a){!function(b){function c(a,b){function c(a){return b.bgcolor&&(a.style.backgroundColor=b.bgcolor),b.width&&(a.style.width=b.width+"px"),b.height&&(a.style.height=b.height+"px"),b.style&&Object.keys(b.style).forEach(function(c){a.style[c]=b.style[c]}),a}return b=b||{},h(b),Promise.resolve(a).then(function(a){return j(a,b.filter,!0)}).then(k).then(l).then(c).then(function(c){return m(c,b.width||n.width(a),b.height||n.height(a))})}function d(a,b){return i(a,b||{}).then(function(b){return b.getContext("2d").getImageData(0,0,n.width(a),n.height(a)).data})}function e(a,b){return i(a,b||{}).then(function(a){return a.toDataURL()})}function f(a,b){return b=b||{},i(a,b).then(function(a){return a.toDataURL("image/jpeg",b.quality||1)})}function g(a,b){return i(a,b||{}).then(n.canvasToBlob)}function h(a){void 0===a.imagePlaceholder?s.impl.options.imagePlaceholder=r.imagePlaceholder:s.impl.options.imagePlaceholder=a.imagePlaceholder,void 0===a.cacheBust?s.impl.options.cacheBust=r.cacheBust:s.impl.options.cacheBust=a.cacheBust}function i(a,b){function d(a){var c=document.createElement("canvas");if(c.width=b.width||n.width(a),c.height=b.height||n.height(a),b.bgcolor){var d=c.getContext("2d");d.fillStyle=b.bgcolor,d.fillRect(0,0,c.width,c.height)}return c}return c(a,b).then(n.makeImage).then(n.delay(100)).then(function(b){var c=d(a);return c.getContext("2d").drawImage(b,0,0),c})}function j(a,b,c){function d(a){return a instanceof HTMLCanvasElement?n.makeImage(a.toDataURL()):a.cloneNode(!1)}function e(a,b,c){var d=a.childNodes;return 0===d.length?Promise.resolve(b):function(a,b,c){var d=Promise.resolve();return b.forEach(function(b){d=d.then(function(){return j(b,c)}).then(function(b){b&&a.appendChild(b)})}),d}(b,n.asArray(d),c).then(function(){return b})}function f(a,b){function c(){!function(a,b){a.cssText?b.cssText=a.cssText:function(a,b){n.asArray(a).forEach(function(c){b.setProperty(c,a.getPropertyValue(c),a.getPropertyPriority(c))})}(a,b)}(window.getComputedStyle(a),b.style)}function d(){function c(c){var d=window.getComputedStyle(a,c),e=d.getPropertyValue("content");if(""!==e&&"none"!==e){var f=n.uid();b.className=b.className+" "+f;var g=document.createElement("style");g.appendChild(function(a,b,c){var d="."+a+":"+b,e=c.cssText?function(a){var b=a.getPropertyValue("content");return a.cssText+" content: "+b+";"}(c):function(a){function b(b){return b+": "+a.getPropertyValue(b)+(a.getPropertyPriority(b)?" !important":"")}return n.asArray(a).map(b).join("; ")+";"}(c);return document.createTextNode(d+"{"+e+"}")}(f,c,d)),b.appendChild(g)}}[":before",":after"].forEach(function(a){c(a)})}function e(){a instanceof HTMLTextAreaElement&&(b.innerHTML=a.value),a instanceof HTMLInputElement&&b.setAttribute("value",a.value)}function f(){b instanceof SVGElement&&(b.setAttribute("xmlns","http://www.w3.org/2000/svg"),b instanceof SVGRectElement&&["width","height"].forEach(function(a){var c=b.getAttribute(a);c&&b.style.setProperty(a,c)}))}return b instanceof Element?Promise.resolve().then(c).then(d).then(e).then(f).then(function(){return b}):b}return c||!b||b(a)?Promise.resolve(a).then(d).then(function(c){return e(a,c,b)}).then(function(b){return f(a,b)}):Promise.resolve()}function k(a){return p.resolveAll().then(function(b){var c=document.createElement("style");return a.appendChild(c),c.appendChild(document.createTextNode(b)),a})}function l(a){return q.inlineAll(a).then(function(){return a})}function m(a,b,c){return Promise.resolve(a).then(function(a){return a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(a)}).then(n.escapeXhtml).then(function(a){return'<foreignObject x="0" y="0" width="100%" height="100%">'+a+"</foreignObject>"}).then(function(a){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+b+'" height="'+c+'">'+a+"</svg>"}).then(function(a){return"data:image/svg+xml;charset=utf-8,"+a})}var n=function(){function a(){var a="application/font-woff";return{woff:a,woff2:a,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function b(a){var b=/\.([^\.\/]*?)$/g.exec(a);return b?b[1]:""}function c(c){var d=b(c).toLowerCase();return a()[d]||""}function d(a){return-1!==a.search(/^(data:)/)}function e(a){return new Promise(function(b){for(var c=window.atob(a.toDataURL().split(",")[1]),d=c.length,e=new Uint8Array(d),f=0;f<d;f++)e[f]=c.charCodeAt(f);b(new Blob([e],{type:"image/png"}))})}function f(a){return a.toBlob?new Promise(function(b){a.toBlob(b)}):e(a)}function g(a,b){var c=document.implementation.createHTMLDocument(),d=c.createElement("base");c.head.appendChild(d);var e=c.createElement("a");return c.body.appendChild(e),d.href=b,e.href=a,e.href}function h(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){b(d)},d.onerror=c,d.src=a})}function i(a){var b=3e4;return s.impl.options.cacheBust&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime()),new Promise(function(c){function d(){if(4===g.readyState){if(200!==g.status)return void(h?c(h):f("cannot fetch resource: "+a+", status: "+g.status));var b=new FileReader;b.onloadend=function(){var a=b.result.split(/,/)[1];c(a)},b.readAsDataURL(g.response)}}function e(){h?c(h):f("timeout of "+b+"ms occured while fetching resource: "+a)}function f(a){console.error(a),c("")}var g=new XMLHttpRequest;g.onreadystatechange=d,g.ontimeout=e,g.responseType="blob",g.timeout=b,g.open("GET",a,!0),g.send();var h;if(s.impl.options.imagePlaceholder){var i=s.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(h=i[1])}})}function j(a,b){return"data:"+b+";base64,"+a}function k(a){return a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function l(a){return function(b){return new Promise(function(c){setTimeout(function(){c(b)},a)})}}function m(a){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}function n(a){return a.replace(/#/g,"%23").replace(/\n/g,"%0A")}function o(a){var b=q(a,"border-left-width"),c=q(a,"border-right-width");return a.scrollWidth+b+c}function p(a){var b=q(a,"border-top-width"),c=q(a,"border-bottom-width");return a.scrollHeight+b+c}function q(a,b){var c=window.getComputedStyle(a).getPropertyValue(b);return parseFloat(c.replace("px",""))}return{escape:k,parseExtension:b,mimeType:c,dataAsUrl:j,isDataUrl:d,canvasToBlob:f,resolveUrl:g,getAndEncode:i,uid:function(){var a=0;return function(){return"u"+function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}()+a++}}(),delay:l,asArray:m,escapeXhtml:n,makeImage:h,width:o,height:p}}(),o=function(){function a(a){return-1!==a.search(e)}function b(a){for(var b,c=[];null!==(b=e.exec(a));)c.push(b[1]);return c.filter(function(a){return!n.isDataUrl(a)})}function c(a,b,c,d){function e(a){return new RegExp("(url\\(['\"]?)("+n.escape(a)+")(['\"]?\\))","g")}return Promise.resolve(b).then(function(a){return c?n.resolveUrl(a,c):a}).then(d||n.getAndEncode).then(function(a){return n.dataAsUrl(a,n.mimeType(b))}).then(function(c){return a.replace(e(b),"$1"+c+"$3")})}function d(d,e,f){return function(){return!a(d)}()?Promise.resolve(d):Promise.resolve(d).then(b).then(function(a){var b=Promise.resolve(d);return a.forEach(function(a){b=b.then(function(b){return c(b,a,e,f)})}),b})}var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:d,shouldProcess:a,impl:{readUrls:b,inline:c}}}(),p=function(){function a(){return b(document).then(function(a){return Promise.all(a.map(function(a){return a.resolve()}))}).then(function(a){return a.join("\n")})}function b(){function a(a){return a.filter(function(a){return a.type===CSSRule.FONT_FACE_RULE}).filter(function(a){return o.shouldProcess(a.style.getPropertyValue("src"))})}function b(a){var b=[];return a.forEach(function(a){try{n.asArray(a.cssRules||[]).forEach(b.push.bind(b))}catch(b){console.log("Error while reading CSS rules from "+a.href,b.toString())}}),b}function c(a){return{resolve:function(){var b=(a.parentStyleSheet||{}).href;return o.inlineAll(a.cssText,b)},src:function(){return a.style.getPropertyValue("src")}}}return Promise.resolve(n.asArray(document.styleSheets)).then(b).then(a).then(function(a){return a.map(c)})}return{resolveAll:a,impl:{readAll:b}}}(),q=function(){function a(a){function b(b){return n.isDataUrl(a.src)?Promise.resolve():Promise.resolve(a.src).then(b||n.getAndEncode).then(function(b){return n.dataAsUrl(b,n.mimeType(a.src))}).then(function(b){return new Promise(function(c,d){a.onload=c,a.onerror=d,a.src=b})})}return{inline:b}}function b(c){return c instanceof Element?function(a){var b=a.style.getPropertyValue("background");return b?o.inlineAll(b).then(function(b){a.style.setProperty("background",b,a.style.getPropertyPriority("background"))}).then(function(){return a}):Promise.resolve(a)}(c).then(function(){return c instanceof HTMLImageElement?a(c).inline():Promise.all(n.asArray(c.childNodes).map(function(a){return b(a)}))}):Promise.resolve(c)}return{inlineAll:b,impl:{newImage:a}}}(),r={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:c,toPng:e,toJpeg:f,toBlob:g,toPixelData:d,impl:{fontFaces:p,images:q,util:n,inliner:o,options:{}}};a.exports=s}()}),e=b(function(a){var b=b||function(a){if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,4e4)},k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){i(a)}}},l=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},m=function(b,i,m){m||(b=l(b));var n,o=this,p=b.type,q="application/octet-stream"===p,r=function(){k(o,"writestart progress write writeend".split(" "))};return o.readyState=o.INIT,e?(n=c().createObjectURL(b),void setTimeout(function(){d.href=n,d.download=i,f(d),r(),j(n),o.readyState=o.DONE})):void!function(){if((h||q&&g)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=h?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(b,"_blank")||(a.location.href=b),b=void 0,o.readyState=o.DONE,r()},d.readAsDataURL(b),void(o.readyState=o.INIT)}n||(n=c().createObjectURL(b)),q?a.location.href=n:a.open(n,"_blank")||(a.location.href=n),o.readyState=o.DONE,r(),j(n)}()},n=m.prototype,o=function(a,b,c){return new m(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=l(a)),navigator.msSaveOrOpenBlob(a,b)}:(n.abort=function(){},n.readyState=n.INIT=0,n.WRITING=1,n.DONE=2,n.error=n.onwritestart=n.onprogress=n.onwrite=n.onabort=n.onerror=n.onwriteend=null,o)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||c.content);a.exports&&(a.exports.saveAs=b)});L.Control.EasyPrint=L.Control.extend({options:{title:"Print map",position:"topleft",sizeModes:["Current"],filename:"map",exportOnly:!1,hidden:!1,tileWait:500,hideControlContainer:!0,hideClasses:[],customWindowTitle:window.document.title,spinnerBgCOlor:"#0DC5C1",customSpinnerClass:"epLoader",defaultSizeTitles:{Current:"Current Size",LetterLandscape:"Letter Landscape",LetterPortrait:"Letter Portrait"}},onAdd:function(){this.mapContainer=this._map.getContainer(),this.options.sizeModes=this.options.sizeModes.map(function(a){return"Current"===a?{name:this.options.defaultSizeTitles.Current,className:"CurrentSize"}:"LetterLandscape"===a?{height:this._letterPageSize.height,width:this._letterPageSize.width,name:this.options.defaultSizeTitles.LetterLandscape,className:"LetterLandscape page"}:"LetterPortrait"===a?{height:this._letterPageSize.width,width:this._letterPageSize.height,name:this.options.defaultSizeTitles.LetterPortrait,className:"LetterPortrait page"}:a},this);var a=L.DomUtil.create("div","leaflet-control-easyPrint leaflet-bar leaflet-control");if(!this.options.hidden){this._addCss(),L.DomEvent.addListener(a,"mouseover",this._togglePageSizeButtons,this),L.DomEvent.addListener(a,"mouseout",this._togglePageSizeButtons,this);var b="leaflet-control-easyPrint-button";this.options.exportOnly&&(b+="-export"),this.link=L.DomUtil.create("a",b,a),this.link.id="leafletEasyPrint",this.link.title=this.options.title,this.holder=L.DomUtil.create("ul","easyPrintHolder",a),this.options.sizeModes.forEach(function(a){var b=L.DomUtil.create("li","easyPrintSizeMode",this.holder);b.title=a.name,L.DomUtil.create("a",a.className,b),L.DomEvent.addListener(b,"click",this.printMap,this)},this),L.DomEvent.disableClickPropagation(a)}return a},printMap:function(a,b){b&&(this.options.filename=b),this.options.exportOnly||(this._page=window.open("","_blank","toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10, top=10, width=200, height=250, visible=none"),this._page.document.write(this._createSpinner(this.options.customWindowTitle,this.options.customSpinnerClass,this.options.spinnerBgCOlor))),this.originalState={mapWidth:this.mapContainer.style.width,widthWasAuto:!1,widthWasPercentage:!1,mapHeight:this.mapContainer.style.height,zoom:this._map.getZoom(),center:this._map.getCenter()},"auto"===this.originalState.mapWidth?(this.originalState.mapWidth=this._map.getSize().x+"px",this.originalState.widthWasAuto=!0):this.originalState.mapWidth.includes("%")&&(this.originalState.percentageWidth=this.originalState.mapWidth,this.originalState.widthWasPercentage=!0,this.originalState.mapWidth=this._map.getSize().x+"px"),this._map.fire("easyPrint-start",{event:a}),this.options.hidden||this._togglePageSizeButtons({type:null}),this.options.hideControlContainer&&this._toggleControls(),this.options.hideClasses&&this._toggleClasses(this.options.hideClasses);var c="string"!=typeof a?a.target.className:a;return"CurrentSize"===c?this._printOpertion(c):(this.outerContainer=this._createOuterContainer(this.mapContainer),this.originalState.widthWasAuto&&(this.outerContainer.style.width=this.originalState.mapWidth),this._createImagePlaceholder(c),void 0)},_createImagePlaceholder:function(a){var b=this;d.toPng(this.mapContainer,{width:parseInt(this.originalState.mapWidth.replace("px")),height:parseInt(this.originalState.mapHeight.replace("px"))}).then(function(c){b.blankDiv=document.createElement("div");var d=b.blankDiv;b.outerContainer.parentElement.insertBefore(d,b.outerContainer),d.className="epHolder",d.style.backgroundImage='url("'+c+'")',d.style.position="absolute",d.style.zIndex=1011,d.style.display="initial",d.style.width=b.originalState.mapWidth,d.style.height=b.originalState.mapHeight,b._resizeAndPrintMap(a)}).catch(function(a){console.error("oops, something went wrong!",a)})},_resizeAndPrintMap:function(a){this.outerContainer.style.opacity=0;var b=this.options.sizeModes.filter(function(b){return b.className.indexOf(a)>-1});b=b[0],this.mapContainer.style.width=b.width+"px",this.mapContainer.style.height=b.height+"px",this.mapContainer.style.width<this.mapContainer.style.height?this.orientation="portrait":this.orientation="landscape",this._map.setView(this.originalState.center),this._map.setZoom(this.originalState.zoom),this._map.invalidateSize(),this.options.tileLayer?this._pausePrint(a):this._printOpertion(a)},_pausePrint:function(a){var b=this,c=setInterval(function(){b.options.tileLayer.isLoading()||(clearInterval(c),b._printOpertion(a))},b.options.tileWait)},_printOpertion:function(a){var b=this,c=this.mapContainer.style.width;(this.originalState.widthWasAuto&&"CurrentSize"===a||this.originalState.widthWasPercentage&&"CurrentSize"===a)&&(c=this.originalState.mapWidth),d.toPng(b.mapContainer,{width:parseInt(c),height:parseInt(b.mapContainer.style.height.replace("px"))}).then(function(a){var c=b._dataURItoBlob(a);b.options.exportOnly?e.saveAs(c,b.options.filename+".png"):b._sendToBrowserPrint(a,b.orientation),b._toggleControls(!0),b._toggleClasses(b.options.hideClasses,!0),b.outerContainer&&(b.originalState.widthWasAuto?b.mapContainer.style.width="auto":b.originalState.widthWasPercentage?b.mapContainer.style.width=b.originalState.percentageWidth:b.mapContainer.style.width=b.originalState.mapWidth,b.mapContainer.style.height=b.originalState.mapHeight,b._removeOuterContainer(b.mapContainer,b.outerContainer,b.blankDiv),b._map.invalidateSize(),b._map.setView(b.originalState.center),b._map.setZoom(b.originalState.zoom)),b._map.fire("easyPrint-finished")}).catch(function(a){console.error("Print operation failed",a)})},_sendToBrowserPrint:function(a,b){this._page.resizeTo(600,800);var c=this._createNewWindow(a,b,this);this._page.document.body.innerHTML="",this._page.document.write(c),this._page.document.close()},_createSpinner:function(a,b,c){return"<html><head><title>"+a+"</title></head><body><style>\n      body{\n        background: "+c+";\n      }\n      .epLoader,\n      .epLoader:before,\n      .epLoader:after {\n        border-radius: 50%;\n      }\n      .epLoader {\n        color: #ffffff;\n        font-size: 11px;\n        text-indent: -99999em;\n        margin: 55px auto;\n        position: relative;\n        width: 10em;\n        height: 10em;\n        box-shadow: inset 0 0 0 1em;\n        -webkit-transform: translateZ(0);\n        -ms-transform: translateZ(0);\n        transform: translateZ(0);\n      }\n      .epLoader:before,\n      .epLoader:after {\n        position: absolute;\n        content: '';\n      }\n      .epLoader:before {\n        width: 5.2em;\n        height: 10.2em;\n        background: #0dc5c1;\n        border-radius: 10.2em 0 0 10.2em;\n        top: -0.1em;\n        left: -0.1em;\n        -webkit-transform-origin: 5.2em 5.1em;\n        transform-origin: 5.2em 5.1em;\n        -webkit-animation: load2 2s infinite ease 1.5s;\n        animation: load2 2s infinite ease 1.5s;\n      }\n      .epLoader:after {\n        width: 5.2em;\n        height: 10.2em;\n        background: #0dc5c1;\n        border-radius: 0 10.2em 10.2em 0;\n        top: -0.1em;\n        left: 5.1em;\n        -webkit-transform-origin: 0px 5.1em;\n        transform-origin: 0px 5.1em;\n        -webkit-animation: load2 2s infinite ease;\n        animation: load2 2s infinite ease;\n      }\n      @-webkit-keyframes load2 {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n      }\n      @keyframes load2 {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n      }\n      </style>\n    <div class=\""+b+'">Loading...</div></body></html>'},_createNewWindow:function(a,b,c){return"<html><head>\n        <style>@media print {\n          img { max-width: 98%!important; max-height: 98%!important; }\n          @page { size: "+b+";}}\n        </style>\n        <script>function step1(){\n        setTimeout('step2()', 10);}\n        function step2(){window.print();window.close()}\n        </script></head><body onload='step1()'>\n        <img src=\""+a+'" style="display:block; margin:auto;"></body></html>'},_createOuterContainer:function(a){var b=document.createElement("div");return a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),b.appendChild(a),b.style.width=a.style.width,b.style.height=a.style.height,b.style.display="inline-block",b.style.overflow="hidden",b},_removeOuterContainer:function(a,b,c){b.parentNode&&(b.parentNode.insertBefore(a,b),b.parentNode.removeChild(c),b.parentNode.removeChild(b))},_addCss:function(){var a=document.createElement("style");a.type="text/css",a.innerHTML=".leaflet-control-easyPrint-button { \n      background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIGQ9Ik0xMjgsMzJoMjU2djY0SDEyOFYzMnogTTQ4MCwxMjhIMzJjLTE3LjYsMC0zMiwxNC40LTMyLDMydjE2MGMwLDE3LjYsMTQuMzk4LDMyLDMyLDMyaDk2djEyOGgyNTZWMzUyaDk2ICAgYzE3LjYsMCwzMi0xNC40LDMyLTMyVjE2MEM1MTIsMTQyLjQsNDk3LjYsMTI4LDQ4MCwxMjh6IE0zNTIsNDQ4SDE2MFYyODhoMTkyVjQ0OHogTTQ4Ny4xOTksMTc2YzAsMTIuODEzLTEwLjM4NywyMy4yLTIzLjE5NywyMy4yICAgYy0xMi44MTIsMC0yMy4yMDEtMTAuMzg3LTIzLjIwMS0yMy4yczEwLjM4OS0yMy4yLDIzLjE5OS0yMy4yQzQ3Ni44MTQsMTUyLjgsNDg3LjE5OSwxNjMuMTg3LDQ4Ny4xOTksMTc2eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=);\n      background-size: 16px 16px; \n      cursor: pointer; \n    }\n    .leaflet-control-easyPrint-button-export { \n      background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIGQ9Ik0xMjgsMzJoMjU2djY0SDEyOFYzMnogTTQ4MCwxMjhIMzJjLTE3LjYsMC0zMiwxNC40LTMyLDMydjE2MGMwLDE3LjYsMTQuMzk4LDMyLDMyLDMyaDk2djEyOGgyNTZWMzUyaDk2ICAgYzE3LjYsMCwzMi0xNC40LDMyLTMyVjE2MEM1MTIsMTQyLjQsNDk3LjYsMTI4LDQ4MCwxMjh6IE0zNTIsNDQ4SDE2MFYyODhoMTkyVjQ0OHogTTQ4Ny4xOTksMTc2YzAsMTIuODEzLTEwLjM4NywyMy4yLTIzLjE5NywyMy4yICAgYy0xMi44MTIsMC0yMy4yMDEtMTAuMzg3LTIzLjIwMS0yMy4yczEwLjM4OS0yMy4yLDIzLjE5OS0yMy4yQzQ3Ni44MTQsMTUyLjgsNDg3LjE5OSwxNjMuMTg3LDQ4Ny4xOTksMTc2eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=);\n      background-size: 17px 16px; \n      cursor: pointer; \n    }\n    .easyPrintHolder a {\n      background-size: 16px 16px;\n      cursor: pointer;\n    }\n    .easyPrintHolder .CurrentSize{\n      background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE2cHgiIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgNjQgNjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0IDY0Ij4gIDxnPiAgICA8ZyBmaWxsPSIjMUQxRDFCIj4gICAgICA8cGF0aCBkPSJNMjUuMjU1LDM1LjkwNUw0LjAxNiw1Ny4xNDVWNDYuNTljMC0xLjEwOC0wLjg5Ny0yLjAwOC0yLjAwOC0yLjAwOEMwLjg5OCw0NC41ODIsMCw0NS40ODEsMCw0Ni41OXYxNS40MDIgICAgYzAsMC4yNjEsMC4wNTMsMC41MjEsMC4xNTUsMC43NjdjMC4yMDMsMC40OTIsMC41OTQsMC44ODIsMS4wODYsMS4wODdDMS40ODYsNjMuOTQ3LDEuNzQ3LDY0LDIuMDA4LDY0aDE1LjQwMyAgICBjMS4xMDksMCwyLjAwOC0wLjg5OCwyLjAwOC0yLjAwOHMtMC44OTgtMi4wMDgtMi4wMDgtMi4wMDhINi44NTVsMjEuMjM4LTIxLjI0YzAuNzg0LTAuNzg0LDAuNzg0LTIuMDU1LDAtMi44MzkgICAgUzI2LjAzOSwzNS4xMjEsMjUuMjU1LDM1LjkwNXoiIGZpbGw9IiNGRkZGRkYiLz4gICAgICA8cGF0aCBkPSJtNjMuODQ1LDEuMjQxYy0wLjIwMy0wLjQ5MS0wLjU5NC0wLjg4Mi0xLjA4Ni0xLjA4Ny0wLjI0NS0wLjEwMS0wLjUwNi0wLjE1NC0wLjc2Ny0wLjE1NGgtMTUuNDAzYy0xLjEwOSwwLTIuMDA4LDAuODk4LTIuMDA4LDIuMDA4czAuODk4LDIuMDA4IDIuMDA4LDIuMDA4aDEwLjU1NmwtMjEuMjM4LDIxLjI0Yy0wLjc4NCwwLjc4NC0wLjc4NCwyLjA1NSAwLDIuODM5IDAuMzkyLDAuMzkyIDAuOTA2LDAuNTg5IDEuNDIsMC41ODlzMS4wMjctMC4xOTcgMS40MTktMC41ODlsMjEuMjM4LTIxLjI0djEwLjU1NWMwLDEuMTA4IDAuODk3LDIuMDA4IDIuMDA4LDIuMDA4IDEuMTA5LDAgMi4wMDgtMC44OTkgMi4wMDgtMi4wMDh2LTE1LjQwMmMwLTAuMjYxLTAuMDUzLTAuNTIyLTAuMTU1LTAuNzY3eiIgZmlsbD0iI0ZGRkZGRiIvPiAgICA8L2c+ICA8L2c+PC9zdmc+);\n    }\n    .easyPrintHolder .page {\n      background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ0NC44MzMgNDQ0LjgzMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDQ0LjgzMyA0NDQuODMzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48Zz48cGF0aCBkPSJNNTUuMjUsNDQ0LjgzM2gzMzQuMzMzYzkuMzUsMCwxNy03LjY1LDE3LTE3VjEzOS4xMTdjMC00LjgxNy0xLjk4My05LjM1LTUuMzgzLTEyLjQ2N0wyNjkuNzMzLDQuNTMzICAgIEMyNjYuNjE3LDEuNywyNjIuMzY3LDAsMjU4LjExNywwSDU1LjI1Yy05LjM1LDAtMTcsNy42NS0xNywxN3Y0MTAuODMzQzM4LjI1LDQzNy4xODMsNDUuOSw0NDQuODMzLDU1LjI1LDQ0NC44MzN6ICAgICBNMzcyLjU4MywxNDYuNDgzdjAuODVIMjU2LjQxN3YtMTA4LjhMMzcyLjU4MywxNDYuNDgzeiBNNzIuMjUsMzRoMTUwLjE2N3YxMzAuMzMzYzAsOS4zNSw3LjY1LDE3LDE3LDE3aDEzMy4xNjd2MjI5LjVINzIuMjVWMzR6ICAgICIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);\n    }\n    .easyPrintHolder .LetterLandscape { \n      transform: rotate(-90deg);\n    }\n\n    .leaflet-control-easyPrint-button{\n      display: inline-block;\n    }\n    .easyPrintHolder{\n      margin-top:-31px;\n      margin-bottom: -5px;\n      margin-left: 30px;\n      padding-left: 0px;\n      display: none;\n    }\n\n    .easyPrintSizeMode {\n      display: inline-block;\n    }\n    .easyPrintHolder .easyPrintSizeMode a {\n      border-radius: 0px;\n    }\n\n    .easyPrintHolder .easyPrintSizeMode:last-child a{\n      border-top-right-radius: 2px;\n      border-bottom-right-radius: 2px;\n      margin-left: -1px;\n    }\n\n    .easyPrintPortrait:hover, .easyPrintLandscape:hover{\n      background-color: #757570;\n      cursor: pointer;\n    }",
document.body.appendChild(a)},_dataURItoBlob:function(a){for(var b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new DataView(d),f=0;f<b.length;f++)e.setUint8(f,b.charCodeAt(f));return new Blob([d],{type:c})},_togglePageSizeButtons:function(a){var b=this.holder.style,c=this.link.style;"mouseover"===a.type?(b.display="block",c.borderTopRightRadius="0",c.borderBottomRightRadius="0"):(b.display="none",c.borderTopRightRadius="2px",c.borderBottomRightRadius="2px")},_toggleControls:function(a){var b=document.getElementsByClassName("leaflet-control-container")[0];return a?b.style.display="block":void(b.style.display="none")},_toggleClasses:function(a,b){a.forEach(function(a){var c=document.getElementsByClassName(a)[0];return b?c.style.display="block":void(c.style.display="none")})},_letterPageSize:{height:720,width:945}}),L.easyPrint=function(a){return new L.Control.EasyPrint(a)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(a,b,c){!function(a,b,c){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var b=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,b?this._withAnimation:this._noAnimation),this._markerCluster=b?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(a){if(a instanceof L.LayerGroup)return this.addLayers([a]);if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this.fire("layeradd",{layer:a}),this;if(!this._map)return this._needsClustering.push(a),this.fire("layeradd",{layer:a}),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom),this.fire("layeradd",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var b=a,c=this._zoom;if(a.__parent)for(;b.__parent._zoom>=c;)b=b.__parent;return this._currentShownBounds.contains(b.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,b):this._animationAddLayerNonAnimated(a,b)),this},removeLayer:function(a){return a instanceof L.LayerGroup?this.removeLayers([a]):a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this.fire("layerremove",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),a.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a}),this):(this._nonPointGroup.removeLayer(a),this.fire("layerremove",{layer:a}),this)},addLayers:function(a,b){if(!L.Util.isArray(a))return this.addLayer(a);var c,d=this._featureGroup,e=this._nonPointGroup,f=this.options.chunkedLoading,g=this.options.chunkInterval,h=this.options.chunkProgress,i=a.length,j=0,k=!0;if(this._map){var l=(new Date).getTime(),m=L.bind(function(){for(var n=(new Date).getTime();i>j;j++){if(f&&0===j%200){var o=(new Date).getTime()-n;if(o>g)break}if(c=a[j],c instanceof L.LayerGroup)k&&(a=a.slice(),k=!1),this._extractNonGroupLayers(c,a),i=a.length;else if(c.getLatLng){if(!this.hasLayer(c)&&(this._addLayer(c,this._maxZoom),b||this.fire("layeradd",{layer:c}),c.__parent&&2===c.__parent.getChildCount())){var p=c.__parent.getAllChildMarkers(),q=p[0]===c?p[1]:p[0];d.removeLayer(q)}}else e.addLayer(c),b||this.fire("layeradd",{layer:c})}h&&h(j,i,(new Date).getTime()-l),j===i?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var n=this._needsClustering;i>j;j++)c=a[j],c instanceof L.LayerGroup?(k&&(a=a.slice(),k=!1),this._extractNonGroupLayers(c,a),i=a.length):c.getLatLng?this.hasLayer(c)||n.push(c):e.addLayer(c);return this},removeLayers:function(a){var b,c,d=a.length,e=this._featureGroup,f=this._nonPointGroup,g=!0;if(!this._map){for(b=0;d>b;b++)c=a[b],c instanceof L.LayerGroup?(g&&(a=a.slice(),g=!1),this._extractNonGroupLayers(c,a),d=a.length):(this._arraySplice(this._needsClustering,c),f.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c}));return this}if(this._unspiderfy){this._unspiderfy();var h=a.slice(),i=d;for(b=0;i>b;b++)c=h[b],c instanceof L.LayerGroup?(this._extractNonGroupLayers(c,h),i=h.length):this._unspiderfyLayer(c)}for(b=0;d>b;b++)c=a[b],c instanceof L.LayerGroup?(g&&(a=a.slice(),g=!1),this._extractNonGroupLayers(c,a),d=a.length):c.__parent?(this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),e.hasLayer(c)&&(e.removeLayer(c),c.clusterShow&&c.clusterShow())):(f.removeLayer(c),this.fire("layerremove",{layer:c}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){a.off(this._childMarkerEventHandlers,this),delete a.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;this._topClusterLevel&&a.extend(this._topClusterLevel._bounds);for(var b=this._needsClustering.length-1;b>=0;b--)a.extend(this._needsClustering[b].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,b){var c,d,e,f=this._needsClustering.slice(),g=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(f),d=f.length-1;d>=0;d--){for(c=!0,e=g.length-1;e>=0;e--)if(g[e].layer===f[d]){c=!1;break}c&&a.call(b,f[d])}this._nonPointGroup.eachLayer(a,b)},getLayers:function(){var a=[];return this.eachLayer(function(b){a.push(b)}),a},getLayer:function(a){var b=null;return a=parseInt(a,10),this.eachLayer(function(c){L.stamp(c)===a&&(b=c)}),b},hasLayer:function(a){if(!a)return!1;var b,c=this._needsClustering;for(b=c.length-1;b>=0;b--)if(c[b]===a)return!0;for(c=this._needsRemoving,b=c.length-1;b>=0;b--)if(c[b].layer===a)return!1;return!(!a.__parent||a.__parent._group!==this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,b){"function"!=typeof b&&(b=function(){});var c=function(){!a._icon&&!a.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",c,this),this.off("animationend",c,this),a._icon?b():a.__parent._icon&&(this.once("spiderfied",b,this),a.__parent.spiderfy()))};a._icon&&this._map.getBounds().contains(a.getLatLng())?b():a.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",c,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var b,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(a),this._nonPointGroup.addTo(a),this._gridClusters||this._generateInitialClusters(),this._maxLat=a.options.crs.projection.MAX_LATITUDE,b=0,c=this._needsRemoving.length;c>b;b++)d=this._needsRemoving[b],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(b=0,c=this._needsRemoving.length;c>b;b++)d=this._needsRemoving[b],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var b=a;b&&!b._icon;)b=b.__parent;return b||null},_arraySplice:function(a,b){for(var c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0},_removeFromGridUnclustered:function(a,b){for(var c=this._map,d=this._gridUnclustered,e=Math.floor(this._map.getMinZoom());b>=e&&d[b].removeObject(a,c.project(a.getLatLng(),b));b--);},_childMarkerDragStart:function(a){a.target.__dragStart=a.target._latlng},_childMarkerMoved:function(a){if(!this._ignoreMove&&!a.target.__dragStart){var b=a.target._popup&&a.target._popup.isOpen();this._moveChild(a.target,a.oldLatLng,a.latlng),b&&a.target.openPopup()}},_moveChild:function(a,b,c){a._latlng=b,this.removeLayer(a),a._latlng=c,this.addLayer(a)},_childMarkerDragEnd:function(a){a.target.__dragStart&&this._moveChild(a.target,a.target.__dragStart,a.target._latlng),delete a.target.__dragStart},_removeLayer:function(a,b,c){var d=this._gridClusters,e=this._gridUnclustered,f=this._featureGroup,g=this._map,h=Math.floor(this._map.getMinZoom());b&&this._removeFromGridUnclustered(a,this._maxZoom);var i,j=a.__parent,k=j._markers;for(this._arraySplice(k,a);j&&(j._childCount--,j._boundsNeedUpdate=!0,!(j._zoom<h));)b&&j._childCount<=1?(i=j._markers[0]===a?j._markers[1]:j._markers[0],d[j._zoom].removeObject(j,g.project(j._cLatLng,j._zoom)),e[j._zoom].addObject(i,g.project(i.getLatLng(),j._zoom)),this._arraySplice(j.__parent._childClusters,j),j.__parent._markers.push(i),i.__parent=j.__parent,j._icon&&(f.removeLayer(j),c||f.addLayer(i))):j._iconNeedsUpdate=!0,j=j.__parent;delete a.__parent},_isOrIsParent:function(a,b){for(;b;){if(a===b)return!0;b=b.parentNode}return!1},fire:function(a,b,c){if(b&&b.layer instanceof L.MarkerCluster){if(b.originalEvent&&this._isOrIsParent(b.layer._icon,b.originalEvent.relatedTarget))return;a="cluster"+a}L.FeatureGroup.prototype.fire.call(this,a,b,c)},listens:function(a,b){return L.FeatureGroup.prototype.listens.call(this,a,b)||L.FeatureGroup.prototype.listens.call(this,"cluster"+a,b)},_defaultIconCreateFunction:function(a){var b=a.getChildCount(),c=" marker-cluster-";return c+=10>b?"small":100>b?"medium":"large",new L.DivIcon({html:"<div><span>"+b+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,b=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick;(b||d)&&this.on("clusterclick",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){for(var b=a.layer,c=b;1===c._childClusters.length;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===b._childCount&&this.options.spiderfyOnMaxZoom?b.spiderfy():this.options.zoomToBoundsOnClick&&b.zoomToBounds(),a.originalEvent&&13===a.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(a){var b=this._map;this._inZoomAnimation||(this._shownPolygon&&b.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),b.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,b=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this._map;(a||c)&&this.off("clusterclick",this._zoomOrSpiderfy,this),b&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=Math.ceil(this._map.getMaxZoom()),b=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,d=c;"function"!=typeof c&&(d=function(){return c}),null!==this.options.disableClusteringAtZoom&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var e=a;e>=b;e--)this._gridClusters[e]=new L.DistanceGrid(d(e)),this._gridUnclustered[e]=new L.DistanceGrid(d(e));this._topClusterLevel=new this._markerCluster(this,b-1)},_addLayer:function(a,b){var c,d,e=this._gridClusters,f=this._gridUnclustered,g=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(a),a.on(this._childMarkerEventHandlers,this);b>=g;b--){c=this._map.project(a.getLatLng(),b);var h=e[b].getNearObject(c);if(h)return h._addChild(a),void(a.__parent=h);if(h=f[b].getNearObject(c)){var i=h.__parent;i&&this._removeLayer(h,!1);var j=new this._markerCluster(this,b,h,a);e[b].addObject(j,this._map.project(j._cLatLng,b)),h.__parent=j,a.__parent=j;var k=j;for(d=b-1;d>i._zoom;d--)k=new this._markerCluster(this,d,k),e[d].addObject(k,this._map.project(h.getLatLng(),d));return i._addChild(k),void this._removeFromGridUnclustered(h,b)}f[b].addObject(a,c)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()})},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var a=Math.round(this._map._zoom);this._processQueue(),this._zoom<a&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,a)):this._zoom>a?(this._animationStart(),this._animationZoomOut(this._zoom,a)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(a){var b=this._maxLat;return b!==c&&(a.getNorth()>=b&&(a._northEast.lat=1/0),a.getSouth()<=-b&&(a._southWest.lat=-1/0)),a},_animationAddLayerNonAnimated:function(a,b){if(b===a)this._featureGroup.addLayer(a);else if(2===b._childCount){b._addToMap();var c=b.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else b._updateIcon()},_extractNonGroupLayers:function(a,b){var c,d=a.getLayers(),e=0;for(b=b||[];e<d.length;e++)c=d[e],c instanceof L.LayerGroup?this._extractNonGroupLayers(c,b):b.push(c);return b},_overrideMarkerIcon:function(a){var b=a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}});return b}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(a,b){this._animationAddLayerNonAnimated(a,b)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(a,b){var c,d=this._getExpandedVisibleBounds(),e=this._featureGroup,f=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(d,a,f,function(f){var g,h=f._latlng,i=f._markers;for(d.contains(h)||(h=null),f._isSingleParent()&&a+1===b?(e.removeLayer(f),f._recursivelyAddChildrenToMap(null,b,d)):(f.clusterHide(),f._recursivelyAddChildrenToMap(h,b,d)),c=i.length-1;c>=0;c--)g=i[c],d.contains(g._latlng)||e.removeLayer(g)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(d,b),e.eachLayer(function(a){a instanceof L.MarkerCluster||!a._icon||a.clusterShow()}),this._topClusterLevel._recursively(d,a,b,function(a){a._recursivelyRestoreChildPositions(b)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(d,a,f,function(a){e.removeLayer(a),a.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(a,b){this._animationZoomOutSingle(this._topClusterLevel,a-1,b),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,b){var c=this,d=this._featureGroup;d.addLayer(a),b!==a&&(b._childCount>2?(b._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(b.getLatLng())),a.clusterHide(),this._enqueue(function(){d.removeLayer(a),a.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(b,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(a,b,c){var d=this._getExpandedVisibleBounds(),e=Math.floor(this._map.getMinZoom());a._recursivelyAnimateChildrenInAndAddSelfToMap(d,e,b+1,c);var f=this;this._forceLayout(),a._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(1===a._childCount){var g=a._markers[0];this._ignoreMove=!0,g.setLatLng(g.getLatLng()),this._ignoreMove=!1,g.clusterShow&&g.clusterShow()}else a._recursively(d,c,e,function(a){a._recursivelyRemoveChildrenFromMap(d,e,b+1)});f._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(b.body.offsetWidth)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)},L.MarkerCluster=L.Marker.extend({initialize:function(a,b,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=a,this._zoom=b,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(a){a=a||[];for(var b=this._childClusters.length-1;b>=0;b--)this._childClusters[b].getAllChildMarkers(a);for(var c=this._markers.length-1;c>=0;c--)a.push(this._markers[c]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(a){for(var b,c=this._childClusters.slice(),d=this._group._map,e=d.getBoundsZoom(this._bounds),f=this._zoom+1,g=d.getZoom();c.length>0&&e>f;){f++;var h=[];for(b=0;b<c.length;b++)h=h.concat(c[b]._childClusters);c=h}e>f?this._group._map.setView(this._latlng,f):g>=e?this._group._map.setView(this._latlng,g+1):this._group._map.fitBounds(this._bounds,a)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,b){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(a),a instanceof L.MarkerCluster?(b||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(b||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_setClusterCenter:function(a){this._cLatLng||(this._cLatLng=a._cLatLng||a._latlng)},_resetBounds:function(){var a=this._bounds;a._southWest&&(a._southWest.lat=1/0,a._southWest.lng=1/0),a._northEast&&(a._northEast.lat=-1/0,a._northEast.lng=-1/0)},_recalculateBounds:function(){var a,b,c,d,e=this._markers,f=this._childClusters,g=0,h=0,i=this._childCount;if(0!==i){for(this._resetBounds(),a=0;a<e.length;a++)c=e[a]._latlng,this._bounds.extend(c),g+=c.lat,h+=c.lng;for(a=0;a<f.length;a++)b=f[a],b._boundsNeedUpdate&&b._recalculateBounds(),this._bounds.extend(b._bounds),c=b._wLatLng,d=b._childCount,g+=c.lat*d,h+=c.lng*d;this._latlng=this._wLatLng=new L.LatLng(g/i,h/i),this._boundsNeedUpdate=!1}},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,b,c){this._recursively(a,this._group._map.getMinZoom(),c-1,function(a){var c,d,e=a._markers;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.clusterHide())},function(a){var c,d,e=a._childClusters;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,b,c,d){this._recursively(a,d,b,function(e){e._recursivelyAnimateChildrenIn(a,e._group._map.latLngToLayerPoint(e.getLatLng()).round(),c),e._isSingleParent()&&c-1===d?(e.clusterShow(),e._recursivelyRemoveChildrenFromMap(a,b,c)):e.clusterHide(),e._addToMap()})},_recursivelyBecomeVisible:function(a,b){this._recursively(a,this._group._map.getMinZoom(),b,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(a,b,c){this._recursively(c,this._group._map.getMinZoom()-1,b,function(d){if(b!==d._zoom)for(var e=d._markers.length-1;e>=0;e--){var f=d._markers[e];c.contains(f._latlng)&&(a&&(f._backupLatlng=f.getLatLng(),f.setLatLng(a),f.clusterHide&&f.clusterHide()),d._group._featureGroup.addLayer(f))}},function(b){b._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var b=this._markers.length-1;b>=0;b--){var c=this._markers[b];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(a-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,b,c,d){var e,f;this._recursively(a,b-1,c-1,function(a){for(f=a._markers.length-1;f>=0;f--)e=a._markers[f],d&&d.contains(e._latlng)||(a._group._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())},function(a){for(f=a._childClusters.length-1;f>=0;f--)e=a._childClusters[f],d&&d.contains(e._latlng)||(a._group._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())})},_recursively:function(a,b,c,d,e){var f,g,h=this._childClusters,i=this._zoom;if(i>=b&&(d&&d(this),e&&i===c&&e(this)),b>i||c>i)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var a=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,a}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,b){var c=this._getCoord(b.x),d=this._getCoord(b.y),e=this._grid,f=e[d]=e[d]||{},g=f[c]=f[c]||[],h=L.Util.stamp(a);this._objectPoint[h]=b,g.push(a)},updateObject:function(a,b){this.removeObject(a),this.addObject(a,b)},removeObject:function(a,b){var c,d,e=this._getCoord(b.x),f=this._getCoord(b.y),g=this._grid,h=g[f]=g[f]||{},i=h[e]=h[e]||[];for(delete this._objectPoint[L.Util.stamp(a)],c=0,d=i.length;d>c;c++)if(i[c]===a)return i.splice(c,1),1===d&&delete h[e],!0},eachObject:function(a,b){var c,d,e,f,g,h,i,j=this._grid;for(c in j){g=j[c];for(d in g)for(h=g[d],e=0,f=h.length;f>e;e++)i=a.call(b,h[e]),i&&(e--,f--)}},getNearObject:function(a){var b,c,d,e,f,g,h,i,j=this._getCoord(a.x),k=this._getCoord(a.y),l=this._objectPoint,m=this._sqCellSize,n=null;for(b=k-1;k+1>=b;b++)if(e=this._grid[b])for(c=j-1;j+1>=c;c++)if(f=e[c])for(d=0,g=f.length;g>d;d++)h=f[d],i=this._sqDist(l[L.Util.stamp(h)],a),m>i&&(m=i,n=h);return n},_getCoord:function(a){return Math.floor(a/this._cellSize)},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(a,b){var c=b[1].lat-b[0].lat,d=b[0].lng-b[1].lng;return d*(a.lat-b[0].lat)+c*(a.lng-b[0].lng)},findMostDistantPointFromBaseLine:function(a,b){var c,d,e,f=0,g=null,h=[];for(c=b.length-1;c>=0;c--)d=b[c],e=this.getDistant(d,a),e>0&&(h.push(d),e>f&&(f=e,g=d));return{maxPoint:g,newPoints:h}},buildConvexHull:function(a,b){var c=[],d=this.findMostDistantPointFromBaseLine(a,b);return d.maxPoint?(c=c.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints))):[a[0]]},getConvexHull:function(a){var b,c=!1,d=!1,e=!1,f=!1,g=null,h=null,i=null,j=null,k=null,l=null;for(b=a.length-1;b>=0;b--){var m=a[b];(c===!1||m.lat>c)&&(g=m,c=m.lat),(d===!1||m.lat<d)&&(h=m,d=m.lat),(e===!1||m.lng>e)&&(i=m,e=m.lng),(f===!1||m.lng<f)&&(j=m,f=m.lng)}d!==c?(l=h,k=g):(l=j,k=i);var n=[].concat(this.buildConvexHull([l,k],a),this.buildConvexHull([k,l],a));return n}}}(),L.MarkerCluster.include({getConvexHull:function(){var a,b,c=this.getAllChildMarkers(),d=[];for(b=c.length-1;b>=0;b--)a=c[b].getLatLng(),d.push(a);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var a,b=this.getAllChildMarkers(),c=this._group,d=c._map,e=d.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,b.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(b.length,e):(e.y+=10,a=this._generatePointsCircle(b.length,e)),this._animationSpiderfy(b,a)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,b){var c,d,e=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),f=e/this._2PI,g=this._2PI/a,h=[];for(h.length=a,c=a-1;c>=0;c--)d=this._circleStartAngle+c*g,h[c]=new L.Point(b.x+f*Math.cos(d),b.y+f*Math.sin(d))._round();return h},_generatePointsSpiral:function(a,b){var c,d=this._group.options.spiderfyDistanceMultiplier,e=d*this._spiralLengthStart,f=d*this._spiralFootSeparation,g=d*this._spiralLengthFactor*this._2PI,h=0,i=[];for(i.length=a,c=a-1;c>=0;c--)h+=f/e+5e-4*c,i[c]=new L.Point(b.x+e*Math.cos(h),b.y+e*Math.sin(h))._round(),e+=g/h;return i},_noanimationUnspiderfy:function(){var a,b,c=this._group,d=c._map,e=c._featureGroup,f=this.getAllChildMarkers();for(c._ignoreMove=!0,this.setOpacity(1),b=f.length-1;b>=0;b--)a=f[b],e.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(d.removeLayer(a._spiderLeg),delete a._spiderLeg);c.fire("unspiderfied",{cluster:this,markers:f}),c._ignoreMove=!1,c._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(a,b){var c,d,e,f,g=this._group,h=g._map,i=g._featureGroup,j=this._group.options.spiderLegPolylineOptions;for(g._ignoreMove=!0,c=0;c<a.length;c++)f=h.layerPointToLatLng(b[c]),d=a[c],e=new L.Polyline([this._latlng,f],j),h.addLayer(e),d._spiderLeg=e,d._preSpiderfyLatlng=d._latlng,d.setLatLng(f),d.setZIndexOffset&&d.setZIndexOffset(1e6),i.addLayer(d);this.setOpacity(.3),g._ignoreMove=!1,g.fire("spiderfied",{cluster:this,markers:a})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(a,b){var d,e,f,g,h,i,j=this,k=this._group,l=k._map,m=k._featureGroup,n=this._latlng,o=l.latLngToLayerPoint(n),p=L.Path.SVG,q=L.extend({},this._group.options.spiderLegPolylineOptions),r=q.opacity;for(r===c&&(r=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(q.opacity=0,q.className=(q.className||"")+" leaflet-cluster-spider-leg"):q.opacity=r,k._ignoreMove=!0,d=0;d<a.length;d++)e=a[d],i=l.layerPointToLatLng(b[d]),f=new L.Polyline([n,i],q),l.addLayer(f),e._spiderLeg=f,p&&(g=f._path,h=g.getTotalLength()+.1,g.style.strokeDasharray=h,g.style.strokeDashoffset=h),e.setZIndexOffset&&e.setZIndexOffset(1e6),e.clusterHide&&e.clusterHide(),m.addLayer(e),e._setPos&&e._setPos(o);for(k._forceLayout(),k._animationStart(),d=a.length-1;d>=0;d--)i=l.layerPointToLatLng(b[d]),e=a[d],e._preSpiderfyLatlng=e._latlng,e.setLatLng(i),e.clusterShow&&e.clusterShow(),p&&(f=e._spiderLeg,g=f._path,g.style.strokeDashoffset=0,f.setStyle({opacity:r}));this.setOpacity(.3),k._ignoreMove=!1,setTimeout(function(){k._animationEnd(),k.fire("spiderfied",{cluster:j,markers:a})},200)},_animationUnspiderfy:function(a){var b,c,d,e,f,g,h=this,i=this._group,j=i._map,k=i._featureGroup,l=a?j._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):j.latLngToLayerPoint(this._latlng),m=this.getAllChildMarkers(),n=L.Path.SVG;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),c=m.length-1;c>=0;c--)b=m[c],b._preSpiderfyLatlng&&(b.closePopup(),b.setLatLng(b._preSpiderfyLatlng),delete b._preSpiderfyLatlng,g=!0,b._setPos&&(b._setPos(l),g=!1),b.clusterHide&&(b.clusterHide(),g=!1),g&&k.removeLayer(b),n&&(d=b._spiderLeg,e=d._path,f=e.getTotalLength()+.1,e.style.strokeDashoffset=f,d.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var a=0;for(c=m.length-1;c>=0;c--)b=m[c],b._spiderLeg&&a++;for(c=m.length-1;c>=0;c--)b=m[c],b._spiderLeg&&(b.clusterShow&&b.clusterShow(),b.setZIndexOffset&&b.setZIndexOffset(0),a>1&&k.removeLayer(b),j.removeLayer(b._spiderLeg),delete b._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:h,markers:m
})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow(),a.setZIndexOffset&&a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(a){return a?a instanceof L.MarkerClusterGroup?a=a._topClusterLevel.getAllChildMarkers():a instanceof L.LayerGroup?a=a._layers:a instanceof L.MarkerCluster?a=a.getAllChildMarkers():a instanceof L.Marker&&(a=[a]):a=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(a),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(a),this},_flagParentsIconsNeedUpdate:function(a){var b,c;for(b in a)for(c=a[b].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(a){var b,c;for(b in a)c=a[b],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(a,b){var c=this.options.icon;return L.setOptions(c,a),this.setIcon(c),b&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},{}],48:[function(a,b,c){!function(a,c,d){function e(){var b=a.L;f.noConflict=function(){return a.L=b,this},a.L=f}var f={version:"1.0.3"};"object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),"undefined"!=typeof a&&e(),f.Util={extend:function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++f.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}},wrapNum:function(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?f.Util.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&b.indexOf("?")!==-1?"&":"?")+d.join("&")},template:function(a,b){return a.replace(f.Util.templateRe,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){return a["webkit"+b]||a["moz"+b]||a["ms"+b]}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,d,g){return g&&e===c?void b.call(d):e.call(a,f.bind(b,d))},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=b.__super__=this.prototype,d=f.Util.create(c);d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);return a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),d.options&&(a.options=f.Util.extend(f.Util.create(d.options),a.options)),f.extend(d,a),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;a<b;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){return f.extend(this.prototype,a),this},f.Class.mergeOptions=function(a){return f.extend(this.prototype.options,a),this},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this},f.Evented=f.Class.extend({on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);else{a=f.Util.splitWords(a);for(var e=0,g=a.length;e<g;e++)this._on(a[e],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=f.Util.splitWords(a);for(var e=0,g=a.length;e<g;e++)this._off(a[e],b,c)}else delete this._events;return this},_on:function(a,b,c){this._events=this._events||{};var e=this._events[a];e||(e=[],this._events[a]=e),c===this&&(c=d);for(var f={fn:b,ctx:c},g=e,h=0,i=g.length;h<i;h++)if(g[h].fn===b&&g[h].ctx===c)return;g.push(f)},_off:function(a,b,c){var e,g,h;if(this._events&&(e=this._events[a])){if(!b){for(g=0,h=e.length;g<h;g++)e[g].fn=f.Util.falseFn;return void delete this._events[a]}if(c===this&&(c=d),e)for(g=0,h=e.length;g<h;g++){var i=e[g];if(i.ctx===c&&i.fn===b)return i.fn=f.Util.falseFn,this._firingCount&&(this._events[a]=e=e.slice()),void e.splice(g,1)}}},fire:function(a,b,c){if(!this.listens(a,c))return this;var d=f.Util.extend({},b,{type:a,target:this});if(this._events){var e=this._events[a];if(e){this._firingCount=this._firingCount+1||1;for(var g=0,h=e.length;g<h;g++){var i=e[g];i.fn.call(i.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(a,b){var c=this._events&&this._events[a];if(c&&c.length)return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var e=f.bind(function(){this.off(a,b,c).off(a,e,c)},this);return this.on(a,b,c).on(a,e,c)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,f.extend({layer:a.target},a),!0)}});var g=f.Evented.prototype;g.addEventListener=g.on,g.removeEventListener=g.clearAllEventListeners=g.off,g.addOneTimeEventListener=g.once,g.fireEvent=g.fire,g.hasEventListeners=g.listens,f.Mixin={Events:g},function(){var b=navigator.userAgent.toLowerCase(),d=c.documentElement,e="ActiveXObject"in a,g=b.indexOf("webkit")!==-1,h=b.indexOf("phantom")!==-1,i=b.search("android [23]")!==-1,j=b.indexOf("chrome")!==-1,k=b.indexOf("gecko")!==-1&&!g&&!a.opera&&!e,l=0===navigator.platform.indexOf("Win"),m="undefined"!=typeof orientation||b.indexOf("mobile")!==-1,n=!a.PointerEvent&&a.MSPointerEvent,o=a.PointerEvent||n,p=e&&"transition"in d.style,q="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!i,r="MozPerspective"in d.style,s="OTransition"in d.style,t=!a.L_NO_TOUCH&&(o||"ontouchstart"in a||a.DocumentTouch&&c instanceof a.DocumentTouch);f.Browser={ie:e,ielt9:e&&!c.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in c),webkit:g,gecko:k,android:b.indexOf("android")!==-1,android23:i,chrome:j,safari:!j&&b.indexOf("safari")!==-1,win:l,ie3d:p,webkit3d:q,gecko3d:r,opera12:s,any3d:!a.L_DISABLE_3D&&(p||q||r)&&!s&&!h,mobile:m,mobileWebkit:m&&g,mobileWebkit3d:m&&q,mobileOpera:m&&a.opera,mobileGecko:m&&k,touch:!!t,msPointer:!!n,pointer:!!o,retina:(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)>1}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new f.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new f.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=f.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:"object"==typeof a&&"x"in a&&"y"in a?new f.Point(a.x,a.y):new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},overlaps:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>b.x&&d.x<c.x,h=e.y>b.y&&d.y<c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b]||a.currentStyle&&a.currentStyle[b];if((!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},create:function(a,b,d){var e=c.createElement(a);return e.className=b||"",d&&d.appendChild(e),e},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(a.classList!==d)return a.classList.contains(b);var c=f.DomUtil.getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==d)for(var c=f.Util.splitWords(b),e=0,g=c.length;e<g;e++)a.classList.add(c[e]);else if(!f.DomUtil.hasClass(a,b)){var h=f.DomUtil.getClass(a);f.DomUtil.setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==d?a.classList.remove(b):f.DomUtil.setClass(a,f.Util.trim((" "+f.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){a.className.baseVal===d?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===d?a.className:a.className.baseVal},setOpacity:function(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&f.DomUtil._setOpacityIE(a,b)},_setOpacityIE:function(a,b){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(a){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},setTransform:function(a,b,c){var d=b||new f.Point(0,0);a.style[f.DomUtil.TRANSFORM]=(f.Browser.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")},setPosition:function(a,b){a._leaflet_pos=b,f.Browser.any3d?f.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos||new f.Point(0,0)}},function(){f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var b=f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(f.DomUtil.TRANSITION_END="webkitTransition"===b||"OTransition"===b?b+"End":"transitionend","onselectstart"in c)f.DomUtil.disableTextSelection=function(){f.DomEvent.on(a,"selectstart",f.DomEvent.preventDefault)},f.DomUtil.enableTextSelection=function(){f.DomEvent.off(a,"selectstart",f.DomEvent.preventDefault)};else{var d=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.DomUtil.disableTextSelection=function(){if(d){var a=c.documentElement.style;this._userSelect=a[d],a[d]="none"}},f.DomUtil.enableTextSelection=function(){d&&(c.documentElement.style[d]=this._userSelect,delete this._userSelect)}}f.DomUtil.disableImageDrag=function(){f.DomEvent.on(a,"dragstart",f.DomEvent.preventDefault)},f.DomUtil.enableImageDrag=function(){f.DomEvent.off(a,"dragstart",f.DomEvent.preventDefault)},f.DomUtil.preventOutline=function(b){for(;b.tabIndex===-1;)b=b.parentNode;b&&b.style&&(f.DomUtil.restoreOutline(),this._outlineElement=b,this._outlineStyle=b.style.outline,b.style.outline="none",f.DomEvent.on(a,"keydown",f.DomUtil.restoreOutline,this))},f.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,f.DomEvent.off(a,"keydown",f.DomUtil.restoreOutline,this))}}(),f.LatLng=function(a,b,c){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=+a,this.lng=+b,c!==d&&(this.alt=+c)},f.LatLng.prototype={equals:function(a,b){if(!a)return!1;a=f.latLng(a);var c=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return c<=(b===d?1e-9:b)},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return f.CRS.Earth.distance(this,f.latLng(a))},wrap:function(){return f.CRS.Earth.wrapLatLng(this)},toBounds:function(a){var b=180*a/40075017,c=b/Math.cos(Math.PI/180*this.lat);return f.latLngBounds([this.lat-b,this.lng-c],[this.lat+b,this.lng+c])},clone:function(){return new f.LatLng(this.lat,this.lng,this.alt)}},f.latLng=function(a,b,c){return a instanceof f.LatLng?a:f.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new f.LatLng(a[0],a[1],a[2]):2===a.length?new f.LatLng(a[0],a[1]):null:a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):b===d?null:new f.LatLng(a,b,c)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){var b,c,d=this._southWest,e=this._northEast;if(a instanceof f.LatLng)b=a,c=a;else{if(!(a instanceof f.LatLngBounds))return a?this.extend(f.latLng(a)||f.latLngBounds(a)):this;if(b=a._southWest,c=a._northEast,!b||!c)return this}return d||e?(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),e.lat=Math.max(c.lat,e.lat),e.lng=Math.max(c.lng,e.lng)):(this._southWest=new f.LatLng(b.lat,b.lng),this._northEast=new f.LatLng(c.lat,c.lng)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng||"lat"in a?f.latLng(a):f.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof f.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},overlaps:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>b.lat&&d.lat<c.lat,h=e.lng>b.lng&&d.lng<c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)},bounds:f.bounds([-180,-90],[180,90])},f.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=Math.sin(d*b);return new f.Point(this.R*a.lng*b,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(a){var b=180/Math.PI;return new f.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return f.bounds([-a,-a],[a,a])}()},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,c=this.scale(a),d=this.transformation.transform(b.min,c),e=this.transformation.transform(b.max,c);return f.bounds(d,e)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?f.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?f.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat,d=a.alt;return f.latLng(c,b,d)},wrapLatLngBounds:function(a){var b=a.getCenter(),c=this.wrapLatLng(b),d=b.lat-c.lat,e=b.lng-c.lng;if(0===d&&0===e)return a;var g=a.getSouthWest(),h=a.getNorthEast(),i=f.latLng({lat:g.lat-d,lng:g.lng-e}),j=f.latLng({lat:h.lat-d,lng:h.lng-e});return new f.LatLngBounds(i,j)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),f.CRS.Earth=f.extend({},f.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin(d)*Math.sin(e)+Math.cos(d)*Math.cos(e)*Math.cos((b.lng-a.lng)*c);return this.R*Math.acos(Math.min(f,1))}}),f.CRS.EPSG3857=f.extend({},f.CRS.Earth,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*f.Projection.SphericalMercator.R);return new f.Transformation(a,.5,-a,.5)}()}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS.Earth,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/180,1,-1/180,.5)}),f.Map=f.Evented.extend({options:{crs:f.CRS.EPSG3857,center:d,zoom:d,minZoom:d,maxZoom:d,layers:[],maxBounds:d,renderer:d,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==d&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),f.DomEvent.on(this._proxy,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,b,c){if(b=b===d?this._zoom:this._limitZoom(b),a=this._limitCenter(f.latLng(a),b,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate,duration:c.duration},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){return a=a||(f.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){return a=a||(f.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},_getBoundsCenterZoom:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d));e="number"==typeof b.maxZoom?Math.min(b.maxZoom,e):e;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return{center:j,zoom:e}},fitBounds:function(a,b){if(a=f.latLngBounds(a),!a.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(a,b);return this.setView(c.center,c.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,b,c){function e(a){var b=a?-1:1,c=a?s:r,d=s*s-r*r+b*v*v*t*t,e=2*c*v*t,f=d/e,g=Math.sqrt(f*f+1)-f,h=g<1e-9?-18:Math.log(g);return h}function g(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function i(a){return g(a)/h(a)}function j(a){return r*(h(w)/h(w+u*a))}function k(a){return r*(h(w)*i(w+u*a)-g(w))/v}function l(a){return 1-Math.pow(1-a,1.5)}function m(){var c=(Date.now()-x)/z,d=l(c)*y;c<=1?(this._flyToFrame=f.Util.requestAnimFrame(m,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(k(d)/t)),q),this.getScaleZoom(r/j(d),q),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}if(c=c||{},c.animate===!1||!f.Browser.any3d)return this.setView(a,b,c);this._stop();var n=this.project(this.getCenter()),o=this.project(a),p=this.getSize(),q=this._zoom;a=f.latLng(a),b=b===d?q:b;var r=Math.max(p.x,p.y),s=r*this.getZoomScale(q,b),t=o.distanceTo(n)||1,u=1.42,v=u*u,w=e(0),x=Date.now(),y=(e(1)-w)/u,z=c.duration?1e3*c.duration:1e3*y*.8;return this._moveStart(!0),m.call(this),this},flyToBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.flyTo(c.center,c.zoom,b)},setMaxBounds:function(a){return a=f.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,f.latLngBounds(a));return c.equals(d)||this.panTo(d,b),this._enforcingBounds=!1,this},invalidateSize:function(a){if(!this._loaded)return this;a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),g=d.subtract(e);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=f.extend({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=d.toBounds(a.coords.accuracy),g=this._locateOptions;if(g.setView){var h=this.getBoundsZoom(e);this.setView(d,g.maxZoom?Math.min(h,g.maxZoom):h)}var i={latlng:d,bounds:e,timestamp:a.timestamp};for(var j in a.coords)"number"==typeof a.coords[j]&&(i[j]=a.coords[j]);this.fire("locationfound",i)},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=d,this._containerId=d}f.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var a in this._layers)this._layers[a].remove();return this},createPane:function(a,b){var c="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d=f.DomUtil.create("div",c,b||this._mapPane);return a&&(this._panes[a]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===d?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===d?this._layersMaxZoom===d?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a),c=f.point(c||[0,0]);var d=this.getZoom()||0,e=this.getMinZoom(),g=this.getMaxZoom(),h=a.getNorthWest(),i=a.getSouthEast(),j=this.getSize().subtract(c),k=f.bounds(this.project(i,d),this.project(h,d)).getSize(),l=f.Browser.any3d?this.options.zoomSnap:1,m=Math.min(j.x/k.x,j.y/k.y);return d=this.getScaleZoom(m,d),l&&(d=Math.round(d/(l/100))*(l/100),d=b?Math.ceil(d/l)*l:Math.floor(d/l)*l),Math.max(e,Math.min(g,d))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,b){var c=this._getTopLeftPoint(a,b);return new f.Bounds(c,c.add(this.getSize()))},getPixelOrigin:function(){
return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===d?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,b){var c=this.options.crs;return b=b===d?this._zoom:b,c.scale(a)/c.scale(b)},getScaleZoom:function(a,b){var c=this.options.crs;b=b===d?this._zoom:b;var e=c.zoom(a*c.scale(b));return isNaN(e)?1/0:e},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(f.latLng(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(f.latLngBounds(a))},distance:function(a,b){return this.options.crs.distance(f.latLng(a),f.latLng(b))},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet_id)throw new Error("Map container is already initialized.");f.DomEvent.addListener(b,"scroll",this._onScroll,this),this._containerId=f.Util.stamp(b)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&f.Browser.any3d,f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(f.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),f.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){f.DomUtil.setPosition(this._mapPane,new f.Point(0,0));var c=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var d=this._zoom!==b;this._moveStart(d)._move(a,b)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,b,c){b===d&&(b=this._zoom);var e=this._zoom!==b;return this._zoom=b,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(e||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return f.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){this._targets={},this._targets[f.stamp(this._container)]=this;var c=b?"off":"on";f.DomEvent[c](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&f.DomEvent[c](a,"resize",this._onResize,this),f.Browser.any3d&&this.options.transform3DLimit&&this[c]("moveend",this._onMoveEnd)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var c,d=[],e="mouseout"===b||"mouseover"===b,g=a.target||a.srcElement,h=!1;g;){if(c=this._targets[f.stamp(g)],c&&("click"===b||"preclick"===b)&&!a._simulated&&this._draggableMoved(c)){h=!0;break}if(c&&c.listens(b,!0)){if(e&&!f.DomEvent._isExternalTarget(g,a))break;if(d.push(c),e)break}if(g===this._container)break;g=g.parentNode}return d.length||h||e||!f.DomEvent._isExternalTarget(g,a)||(d=[this]),d},_handleDOMEvent:function(a){if(this._loaded&&!f.DomEvent._skipped(a)){var b="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===b&&f.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,b)}},_fireDOMEvent:function(a,b,c){if("click"===a.type){var d=f.Util.extend({},a);d.type="preclick",this._fireDOMEvent(d,d.type,c)}if(!a._stopped&&(c=(c||[]).concat(this._findEventTargets(a,b)),c.length)){var e=c[0];"contextmenu"===b&&e.listens(b,!0)&&f.DomEvent.preventDefault(a);var g={originalEvent:a};if("keypress"!==a.type){var h=e instanceof f.Marker;g.containerPoint=h?this.latLngToContainerPoint(e.getLatLng()):this.mouseEventToContainerPoint(a),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=h?e.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(var i=0;i<c.length;i++)if(c[i].fire(b,g,!0),g.originalEvent._stopped||c[i].options.nonBubblingEvents&&f.Util.indexOf(c[i].options.nonBubblingEvents,b)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)||new f.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){var c=a&&b!==d?this._getNewPixelOrigin(a,b):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return this.project(a,b)._subtract(d)},_latLngBoundsToNewLayerBounds:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return f.bounds([this.project(a.getSouthWest(),b)._subtract(d),this.project(a.getNorthWest(),b)._subtract(d),this.project(a.getSouthEast(),b)._subtract(d),this.project(a.getNorthEast(),b)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),g=new f.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(g,c,b);return h.round().equals([0,0])?a:this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new f.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=f.bounds(this.project(b.getNorthEast(),c),this.project(b.getSouthWest(),c)),e=d.min.subtract(a.min),g=d.max.subtract(a.max),h=this._rebound(e.x,-g.x),i=this._rebound(e.y,-g.y);return new f.Point(h,i)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom(),d=f.Browser.any3d?this.options.zoomSnap:1;return d&&(a=Math.round(a/d)*d),Math.max(b,Math.min(c,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)},_createAnimProxy:function(){var a=this._proxy=f.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(b){var c=f.DomUtil.TRANSFORM,d=a.style[c];f.DomUtil.setTransform(a,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),d===a.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var b=this.getCenter(),c=this.getZoom();f.DomUtil.setTransform(a,this.project(b,c),this.getZoomScale(c,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d);return!(c.animate!==!0&&!this.getSize().contains(e))&&(f.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,b,!0)},this),!0)},_animateZoom:function(a,b,c,d){c&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:b,noUpdate:d}),setTimeout(f.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),f.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),f.map=function(a,b){return new f.Map(a,b)},f.Layer=f.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f.stamp(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var b=a.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var c=this.getEvents();b.on(c,this),this.once("remove",function(){b.off(c,this)},this)}this.onAdd(b),this.getAttribution&&b.attributionControl&&b.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),b.fire("layeradd",{layer:this})}}}),f.Map.include({addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=f.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&f.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[f.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=f.stamp(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-(1/0),c=this._getZoomSpan();for(var e in this._zoomBoundLayers){var f=this._zoomBoundLayers[e].options;a=f.minZoom===d?a:Math.min(a,f.minZoom),b=f.maxZoom===d?b:Math.max(b,f.maxZoom)}this._layersMaxZoom=b===-(1/0)?d:b,this._layersMinZoom=a===1/0?d:a,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===d&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===d&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var h="_leaflet_events";f.DomEvent={on:function(a,b,c,d){if("object"==typeof b)for(var e in b)this._on(a,e,b[e],c);else{b=f.Util.splitWords(b);for(var g=0,h=b.length;g<h;g++)this._on(a,b[g],c,d)}return this},off:function(a,b,c,d){if("object"==typeof b)for(var e in b)this._off(a,e,b[e],c);else{b=f.Util.splitWords(b);for(var g=0,h=b.length;g<h;g++)this._off(a,b[g],c,d)}return this},_on:function(b,c,d,e){var g=c+f.stamp(d)+(e?"_"+f.stamp(e):"");if(b[h]&&b[h][g])return this;var i=function(c){return d.call(e||b,c||a.event)},j=i;return f.Browser.pointer&&0===c.indexOf("touch")?this.addPointerListener(b,c,i,g):!f.Browser.touch||"dblclick"!==c||!this.addDoubleTapListener||f.Browser.pointer&&f.Browser.chrome?"addEventListener"in b?"mousewheel"===c?b.addEventListener("onwheel"in b?"wheel":"mousewheel",i,!1):"mouseenter"===c||"mouseleave"===c?(i=function(c){c=c||a.event,f.DomEvent._isExternalTarget(b,c)&&j(c)},b.addEventListener("mouseenter"===c?"mouseover":"mouseout",i,!1)):("click"===c&&f.Browser.android&&(i=function(a){return f.DomEvent._filterClick(a,j)}),b.addEventListener(c,i,!1)):"attachEvent"in b&&b.attachEvent("on"+c,i):this.addDoubleTapListener(b,i,g),b[h]=b[h]||{},b[h][g]=i,this},_off:function(a,b,c,d){var e=b+f.stamp(c)+(d?"_"+f.stamp(d):""),g=a[h]&&a[h][e];return g?(f.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,e):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,e):"removeEventListener"in a?"mousewheel"===b?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",g,!1):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[h][e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,f.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return f.DomEvent.on(a,"mousewheel",f.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=f.DomEvent.stopPropagation;return f.DomEvent.on(a,f.Draggable.START.join(" "),b),f.DomEvent.on(a,{click:f.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new f.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new f.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},_wheelPxFactor:f.Browser.win&&f.Browser.chrome?2:f.Browser.gecko?a.devicePixelRatio:1,getWheelDelta:function(a){return f.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/f.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){f.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_isExternalTarget:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(a){return!1}return c!==a},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&d<500||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,void b(a))}},f.DomEvent.addListener=f.DomEvent.on,f.DomEvent.removeListener=f.DomEvent.off,f.PosAnimation=f.Evented.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(a){var b=+new Date-this._startTime,c=1e3*this._duration;b<c?this._runFrame(this._easeOut(b/c),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){var c=this._startPos.add(this._offset.multiplyBy(a));b&&c._round(),f.DomUtil.setPosition(this._el,c),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:f.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,c=this.R,d=a.lat*b,e=this.R_MINOR/c,g=Math.sqrt(1-e*e),h=g*Math.sin(d),i=Math.tan(Math.PI/4-d/2)/Math.pow((1-h)/(1+h),g/2);return d=-c*Math.log(Math.max(i,1e-10)),new f.Point(a.lng*b*c,d)},unproject:function(a){for(var b,c=180/Math.PI,d=this.R,e=this.R_MINOR/d,g=Math.sqrt(1-e*e),h=Math.exp(-a.y/d),i=Math.PI/2-2*Math.atan(h),j=0,k=.1;j<15&&Math.abs(k)>1e-7;j++)b=g*Math.sin(i),b=Math.pow((1-b)/(1+b),g/2),k=Math.PI/2-2*Math.atan(h*b)-i,i+=k;return new f.LatLng(i*c,a.x*c/d)}},f.CRS.EPSG3395=f.extend({},f.CRS.Earth,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*f.Projection.Mercator.R);return new f.Transformation(a,.5,-a,.5)}()}),f.GridLayer=f.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:f.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:d,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){f.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),f.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(f.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(f.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return c.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof f.Point?a:new f.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b,c=this.getPane().children,d=-a(-(1/0),1/0),e=0,f=c.length;e<f;e++)b=c[e].style.zIndex,c[e]!==this._container&&b&&(d=a(d,+b));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!f.Browser.ielt9){f.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,b=!1,c=!1;for(var d in this._tiles){var e=this._tiles[d];if(e.current&&e.loaded){var g=Math.min(1,(a-e.loaded)/200);f.DomUtil.setOpacity(e.el,g),g<1?b=!0:(e.active&&(c=!0),e.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),b&&(f.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=f.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=f.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;if(a===d)return d;for(var c in this._levels)this._levels[c].el.children.length||c===a?this._levels[c].el.style.zIndex=b-Math.abs(a-c):(f.DomUtil.remove(this._levels[c].el),this._removeTilesAtZoom(c),delete this._levels[c]);var e=this._levels[a],g=this._map;return e||(e=this._levels[a]={},e.el=f.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),e.el.style.zIndex=b,e.origin=g.project(g.unproject(g.getPixelOrigin()),a).round(),e.zoom=a,this._setZoomTransform(e,g.getCenter(),g.getZoom()),f.Util.falseFn(e.el.offsetWidth)),this._level=e,e},_pruneTiles:function(){if(this._map){var a,b,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)if(b=this._tiles[a],b.current&&!b.active){var d=b.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var b in this._tiles)this._tiles[b].coords.z===a&&this._removeTile(b)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)f.DomUtil.remove(this._levels[a].el),delete this._levels[a];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(a,b,c,d){var e=Math.floor(a/2),g=Math.floor(b/2),h=c-1,i=new f.Point(+e,+g);i.z=+h;var j=this._tileCoordsToKey(i),k=this._tiles[j];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),h>d&&this._retainParent(e,g,h,d))},_retainChildren:function(a,b,c,d){for(var e=2*a;e<2*a+2;e++)for(var g=2*b;g<2*b+2;g++){var h=new f.Point(e,g);h.z=c+1;var i=this._tileCoordsToKey(h),j=this._tiles[i];j&&j.active?j.retain=!0:(j&&j.loaded&&(j.retain=!0),c+1<d&&this._retainChildren(e,g,c+1,d))}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,b,c,e){var f=Math.round(b);(this.options.maxZoom!==d&&f>this.options.maxZoom||this.options.minZoom!==d&&f<this.options.minZoom)&&(f=d);var g=this.options.updateWhenZooming&&f!==this._tileZoom;e&&!g||(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==d&&this._update(a),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,b,c){var d=this._map.getZoomScale(c,a.zoom),e=a.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(b,c)).round();f.Browser.any3d?f.DomUtil.setTransform(a.el,e,d):f.DomUtil.setPosition(a.el,e)},_resetGrid:function(){var a=this._map,b=a.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],d).x/c.x),Math.ceil(a.project([0,b.wrapLng[1]],d).x/c.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],d).y/c.x),Math.ceil(a.project([b.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var b=this._map,c=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),d=b.getZoomScale(c,this._tileZoom),e=b.project(a,this._tileZoom).floor(),g=b.getSize().divideBy(2*d);return new f.Bounds(e.subtract(g),e.add(g))},_update:function(a){var b=this._map;if(b){var e=b.getZoom();if(a===d&&(a=b.getCenter()),this._tileZoom!==d){var g=this._getTiledPixelBounds(a),h=this._pxBoundsToTileRange(g),i=h.getCenter(),j=[],k=this.options.keepBuffer,l=new f.Bounds(h.getBottomLeft().subtract([k,-k]),h.getTopRight().add([k,-k]));for(var m in this._tiles){var n=this._tiles[m].coords;n.z===this._tileZoom&&l.contains(f.point(n.x,n.y))||(this._tiles[m].current=!1)}if(Math.abs(e-this._tileZoom)>1)return void this._setView(a,e);for(var o=h.min.y;o<=h.max.y;o++)for(var p=h.min.x;p<=h.max.x;p++){var q=new f.Point(p,o);if(q.z=this._tileZoom,this._isValidTile(q)){var r=this._tiles[this._tileCoordsToKey(q)];r?r.current=!0:j.push(q)}}if(j.sort(function(a,b){return a.distanceTo(i)-b.distanceTo(i)}),0!==j.length){this._loading||(this._loading=!0,this.fire("loading"));var s=c.createDocumentFragment();for(p=0;p<j.length;p++)this._addTile(j[p],s);this._level.el.appendChild(s)}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var c=this._globalTileRange;if(!b.wrapLng&&(a.x<c.min.x||a.x>c.max.x)||!b.wrapLat&&(a.y<c.min.y||a.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(a);return f.latLngBounds(this.options.bounds).overlaps(d)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var b=this._map,c=this.getTileSize(),d=a.scaleBy(c),e=d.add(c),g=b.unproject(d,a.z),h=b.unproject(e,a.z),i=new f.LatLngBounds(g,h);return this.options.noWrap||b.wrapLatLngBounds(i),i},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var b=a.split(":"),c=new f.Point(+b[0],+b[1]);return c.z=+b[2],c},_removeTile:function(a){var b=this._tiles[a];b&&(f.DomUtil.remove(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){f.DomUtil.addClass(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px",a.style.height=b.y+"px",a.onselectstart=f.Util.falseFn,a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity<1&&f.DomUtil.setOpacity(a,this.options.opacity),f.Browser.android&&!f.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var c=this._getTilePos(a),d=this._tileCoordsToKey(a),e=this.createTile(this._wrapCoords(a),f.bind(this._tileReady,this,a));this._initTile(e),this.createTile.length<2&&f.Util.requestAnimFrame(f.bind(this._tileReady,this,a,null,e)),f.DomUtil.setPosition(e,c),this._tiles[d]={el:e,coords:a,current:!0},b.appendChild(e),this.fire("tileloadstart",{tile:e,coords:a})},_tileReady:function(a,b,c){if(this._map){b&&this.fire("tileerror",{error:b,tile:c,coords:a});var d=this._tileCoordsToKey(a);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(f.DomUtil.setOpacity(c.el,0),f.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=f.Util.requestAnimFrame(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),b||(f.DomUtil.addClass(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),f.Browser.ielt9||!this._map._fadeAnimated?f.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(f.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new f.Point(this._wrapX?f.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?f.Util.wrapNum(a.y,this._wrapY):a.y);return b.z=a.z,b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new f.Bounds(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),f.gridLayer=function(a){return new f.GridLayer(a)},f.TileLayer=f.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a,b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom)),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split("")),f.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},createTile:function(a,b){var d=c.createElement("img");return f.DomEvent.on(d,"load",f.bind(this._tileOnLoad,this,b,d)),f.DomEvent.on(d,"error",f.bind(this._tileOnError,this,b,d)),this.options.crossOrigin&&(d.crossOrigin=""),d.alt="",d.setAttribute("role","presentation"),d.src=this.getTileUrl(a),d},getTileUrl:function(a){var b={r:f.Browser.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-a.y;this.options.tms&&(b.y=c),b["-y"]=c}return f.Util.template(this._url,f.extend(b,this.options))},_tileOnLoad:function(a,b){f.Browser.ielt9?setTimeout(f.bind(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&b.src!==d&&(b.src=d),a(c,b)},getTileSize:function(){var a=this._map,b=f.GridLayer.prototype.getTileSize.call(this),c=this._tileZoom+this.options.zoomOffset,d=this.options.minNativeZoom,e=this.options.maxNativeZoom;return null!==d&&c<d?b.divideBy(a.getZoomScale(d,c)).round():null!==e&&c>e?b.divideBy(a.getZoomScale(e,c)).round():b},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,b=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset,e=this.options.minNativeZoom,f=this.options.maxNativeZoom;return c&&(a=b-a),a+=d,null!==e&&a<e?e:null!==f&&a>f?f:a},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(b=this._tiles[a].el,b.onload=f.Util.falseFn,b.onerror=f.Util.falseFn,b.complete||(b.src=f.Util.emptyImageUrl,f.DomUtil.remove(b)))}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams);for(var d in b)d in this.options||(c[d]=b[d]);b=f.setOptions(this,b),c.width=c.height=b.tileSize*(b.detectRetina&&f.Browser.retina?2:1),this.wmsParams=c},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";
this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),c=this._crs.project(b.getNorthWest()),d=this._crs.project(b.getSouthEast()),e=(this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(","),g=f.TileLayer.prototype.getTileUrl.call(this,a);return g+f.Util.getParamString(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.ImageOverlay=f.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(f.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){f.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&f.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&f.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=f.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=f.Util.falseFn,a.onmousemove=f.Util.falseFn,a.onload=f.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;f.DomUtil.setTransform(this._image,c,b)},_reset:function(){var a=this._image,b=new f.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();f.DomUtil.setPosition(a,b.min),a.style.width=c.x+"px",a.style.height=c.y+"px"},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c=this.options,d=c[b+"Size"];"number"==typeof d&&(d=[d,d]);var e=f.point(d),g=f.point("shadow"===b&&c.shadowAnchor||c.iconAnchor||e&&e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(c.className||""),g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||c.createElement("img"),b.src=a,b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return f.Icon.Default.imagePath||(f.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||f.Icon.Default.imagePath)+f.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=f.DomUtil.create("div","leaflet-default-icon-path",c.body),b=f.DomUtil.getStyle(a,"background-image")||f.DomUtil.getStyle(a,"backgroundImage");return c.body.removeChild(a),0===b.indexOf("url")?b.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),f.Marker=f.Layer.extend({options:{icon:new f.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=f.latLng(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=a.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(c.title=a.title),a.alt&&(c.alt=a.alt)),f.DomUtil.addClass(c,b),a.keyboard&&(c.tabIndex="0"),this._icon=c,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var e=a.icon.createShadow(this._shadow),g=!1;e!==this._shadow&&(this._removeShadow(),g=!0),e&&(f.DomUtil.addClass(e,b),e.alt=""),this._shadow=e,a.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),e&&g&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),f.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&f.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(f.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),f.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new f.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;f.DomUtil.setOpacity(this._icon,a),this._shadow&&f.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;if(b.innerHTML=d.html!==!1?d.html:"",d.bgPos){var e=f.point(d.bgPos);b.style.backgroundPosition=-e.x+"px "+-e.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.DivOverlay=f.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,b){f.setOptions(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&f.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&f.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(f.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(f.bind(f.DomUtil.remove,f.DomUtil,this._container),200)):f.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&f.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&f.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,b="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof b)a.innerHTML=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=f.point(this.options.offset),c=this._getAnchor();this._zoomAnimated?f.DomUtil.setPosition(this._container,a.add(c)):b=b.add(a).add(c);var d=this._containerBottom=-b.y,e=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=d+"px",this._container.style.left=e+"px"}},_getAnchor:function(){return[0,0]}}),f.Popup=f.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){f.DivOverlay.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof f.Path||this._source.on("preclick",f.DomEvent.stopPropagation))},onRemove:function(a){f.DivOverlay.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof f.Path||this._source.off("preclick",f.DomEvent.stopPropagation))},getEvents:function(){var a=f.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=f.DomUtil.create("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var c=this._closeButton=f.DomUtil.create("a",a+"-close-button",b);c.href="#close",c.innerHTML="&#215;",f.DomEvent.on(c,"click",this._onCloseButtonClick,this)}var d=this._wrapper=f.DomUtil.create("div",a+"-content-wrapper",b);this._contentNode=f.DomUtil.create("div",a+"-content",d),f.DomEvent.disableClickPropagation(d).disableScrollPropagation(this._contentNode).on(d,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",a+"-tip-container",b),this._tip=f.DomUtil.create("div",a+"-tip",this._tipContainer)},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),c=this._getAnchor();f.DomUtil.setPosition(this._container,b.add(c))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,b=parseInt(f.DomUtil.getStyle(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+b,d=this._containerWidth,e=new f.Point(this._containerLeft,-c-this._containerBottom);e._add(f.DomUtil.getPosition(this._container));var g=a.layerPointToContainerPoint(e),h=f.point(this.options.autoPanPadding),i=f.point(this.options.autoPanPaddingTopLeft||h),j=f.point(this.options.autoPanPaddingBottomRight||h),k=a.getSize(),l=0,m=0;g.x+d+j.x>k.x&&(l=g.x+d-k.x+j.x),g.x-l-i.x<0&&(l=g.x-i.x),g.y+c+j.y>k.y&&(m=g.y+c-k.y+j.y),g.y-m-i.y<0&&(m=g.y-i.y),(l||m)&&a.fire("autopanstart").panBy([l,m])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)},_getAnchor:function(){return f.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Map.include({openPopup:function(a,b,c){return a instanceof f.Popup||(a=new f.Popup(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),f.Layer.include({bindPopup:function(a,b){return a instanceof f.Popup?(f.setOptions(a,b),this._popup=a,a._source=this):(this._popup&&!b||(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,b){if(a instanceof f.Layer||(b=a,a=this),a instanceof f.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;if(this._popup&&this._map)return f.DomEvent.stop(a),b instanceof f.Path?void this.openPopup(a.layer||a.target,a.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng))},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.Tooltip=f.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){f.DivOverlay.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){f.DivOverlay.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=f.DivOverlay.prototype.getEvents.call(this);return f.Browser.touch&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a="leaflet-tooltip",b=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=f.DomUtil.create("div",b)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var b=this._map,c=this._container,d=b.latLngToContainerPoint(b.getCenter()),e=b.layerPointToContainerPoint(a),g=this.options.direction,h=c.offsetWidth,i=c.offsetHeight,j=f.point(this.options.offset),k=this._getAnchor();"top"===g?a=a.add(f.point(-h/2+j.x,-i+j.y+k.y,!0)):"bottom"===g?a=a.subtract(f.point(h/2-j.x,-j.y,!0)):"center"===g?a=a.subtract(f.point(h/2+j.x,i/2-k.y+j.y,!0)):"right"===g||"auto"===g&&e.x<d.x?(g="right",a=a.add(f.point(j.x+k.x,k.y-i/2+j.y,!0))):(g="left",a=a.subtract(f.point(h+k.x-j.x,i/2-k.y-j.y,!0))),f.DomUtil.removeClass(c,"leaflet-tooltip-right"),f.DomUtil.removeClass(c,"leaflet-tooltip-left"),f.DomUtil.removeClass(c,"leaflet-tooltip-top"),f.DomUtil.removeClass(c,"leaflet-tooltip-bottom"),f.DomUtil.addClass(c,"leaflet-tooltip-"+g),f.DomUtil.setPosition(c,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&f.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(b)},_getAnchor:function(){return f.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),f.tooltip=function(a,b){return new f.Tooltip(a,b)},f.Map.include({openTooltip:function(a,b,c){return a instanceof f.Tooltip||(a=new f.Tooltip(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),f.Layer.include({bindTooltip:function(a,b){return a instanceof f.Tooltip?(f.setOptions(a,b),this._tooltip=a,a._source=this):(this._tooltip&&!b||(this._tooltip=f.tooltip(b,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b=a?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),f.Browser.touch&&(c.click=this._openTooltip)),this[b](c),this._tooltipHandlersAdded=!a}},openTooltip:function(a,b){if(a instanceof f.Layer||(b=a,a=this),a instanceof f.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,b),this._tooltip.options.interactive&&this._tooltip._container&&(f.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(f.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var b=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(b,this._tooltip.options.sticky?a.latlng:d)},_moveTooltip:function(a){var b,c,d=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),c=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(d)}}),f.LayerGroup=f.Layer.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;b<c;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),f.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),f.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;for(var b in this._layers){var c=this._layers[b];a.extend(c.getBounds?c.getBounds():c.getLatLng())}return a}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Renderer=f.Layer.extend({options:{padding:.1},initialize:function(a){f.setOptions(this,a),f.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&f.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){f.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,b){var c=this._map.getZoomScale(b,this._zoom),d=f.DomUtil.getPosition(this._container),e=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,b),h=this._map.project(a,b),i=h.subtract(g),j=e.multiplyBy(-c).add(d).add(e).subtract(i);f.Browser.any3d?f.DomUtil.setTransform(this._container,j,c):f.DomUtil.setPosition(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new f.Bounds(c,c.add(b.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),f.Map.include({getRenderer:function(a){var b=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this.options.preferCanvas&&f.canvas()||f.svg()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(a){if("overlayPane"===a||a===d)return!1;var b=this._paneRenderers[a];return b===d&&(b=f.SVG&&f.svg({pane:a})||f.Canvas&&f.canvas({pane:a}),this._paneRenderers[a]=b),b}}),f.Path=f.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return f.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(f.Browser.touch?10:0)}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;g<c;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;g<=e-1;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;d<f;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return e<f-1&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d,e){var f,g,h,i=d?this._lastCode:this._getBitCode(a,c),j=this._getBitCode(b,c);for(this._lastCode=j;;){if(!(i|j))return[a,b];if(i&j)return!1;f=i||j,g=this._getEdgeIntersection(a,b,f,c,e),h=this._getBitCode(g,c),f===i?(a=g,i=h):(b=g,j=h)}},_getEdgeIntersection:function(a,b,c,d,e){var g,h,i=b.x-a.x,j=b.y-a.y,k=d.min,l=d.max;return 8&c?(g=a.x+i*(l.y-a.y)/j,h=l.y):4&c?(g=a.x+i*(k.y-a.y)/j,h=k.y):2&c?(g=l.x,h=a.y+j*(l.x-a.x)/i):1&c&&(g=k.x,h=a.y+j*(k.x-a.x)/i),new f.Point(g,h,e)},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-g)*i+(a.y-h)*j)/k,e>1?(g=c.x,h=c.y):e>0&&(g+=i*e,h+=j*e)),i=a.x-g,j=a.y-h,d?i*i+j*j:new f.Point(g,h)}},f.Polyline=f.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){f.setOptions(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var b,c,d=1/0,e=null,g=f.LineUtil._sqClosestPointOnSegment,h=0,i=this._parts.length;h<i;h++)for(var j=this._parts[h],k=1,l=j.length;k<l;k++){b=j[k-1],c=j[k];var m=g(a,b,c,!0);m<d&&(d=m,e=g(a,b,c))}return e&&(e.distance=Math.sqrt(d)),e},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;if(!i)return null;for(a=0,b=0;a<i-1;a++)b+=h[a].distanceTo(h[a+1])/2;if(0===b)return this._map.layerPointToLatLng(h[0]);for(a=0,d=0;a<i-1;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),d+=c,d>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=f.latLng(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new f.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return f.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],c=f.Polyline._flat(a),d=0,e=a.length;d<e;d++)c?(b[d]=f.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b},_project:function(){var a=new f.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a);var b=this._clickTolerance(),c=new f.Point(b,b);this._bounds.isValid()&&a.isValid()&&(a.min._subtract(c),a.max._add(c),this._pxBounds=a)},_projectLatlngs:function(a,b,c){var d,e,g=a[0]instanceof f.LatLng,h=a.length;if(g){for(e=[],d=0;d<h;d++)e[d]=this._map.latLngToLayerPoint(a[d]),c.extend(e[d]);b.push(e)}else for(d=0;d<h;d++)this._projectLatlngs(a[d],b,c)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var b,c,d,e,g,h,i,j=this._parts;for(b=0,d=0,e=this._rings.length;b<e;b++)for(i=this._rings[b],c=0,g=i.length;c<g-1;c++)h=f.LineUtil.clipSegment(i[c],i[c+1],a,c,!0),h&&(j[d]=j[d]||[],j[d].push(h[0]),h[1]===i[c+1]&&c!==g-2||(j[d].push(h[1]),d++))}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,c=0,d=a.length;c<d;c++)a[c]=f.LineUtil.simplify(a[c],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.Polyline._flat=function(a){return!f.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b,c){var d,e,g,h,i,j,k,l,m,n=[1,4,2,8],o=f.LineUtil;for(e=0,k=a.length;e<k;e++)a[e]._code=o._getBitCode(a[e],b);for(h=0;h<4;h++){for(l=n[h],d=[],e=0,k=a.length,g=k-1;e<k;g=e++)i=a[e],j=a[g],i._code&l?j._code&l||(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)):(j._code&l&&(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)),d.push(i));a=d}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h,i,j=this._rings[0],k=j.length;if(!k)return null;for(f=g=h=0,a=0,b=k-1;a<k;b=a++)c=j[a],d=j[b],e=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*e,h+=(c.y+d.y)*e,f+=3*e;return i=0===f?j[0]:[g/f,h/f],this._map.layerPointToLatLng(i)},_convertLatLngs:function(a){var b=f.Polyline.prototype._convertLatLngs.call(this,a),c=b.length;return c>=2&&b[0]instanceof f.LatLng&&b[0].equals(b[c-1])&&b.pop(),b},_setLatLngs:function(a){f.Polyline.prototype._setLatLngs.call(this,a),f.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return f.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0];
},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight,c=new f.Point(b,b);if(a=new f.Bounds(a.min.subtract(c),a.max.add(c)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var d,e=0,g=this._rings.length;e<g;e++)d=f.PolyUtil.clipPolygon(this._rings[e],a,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),f.polygon=function(a,b){return new f.Polygon(a,b)},f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.CircleMarker=f.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return f.Path.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,c=this._clickTolerance(),d=[a+c,b+c];this._pxBounds=new f.Bounds(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Circle=f.CircleMarker.extend({initialize:function(a,b,c){if("number"==typeof b&&(b=f.extend({},c,{radius:b})),f.setOptions(this,b),this._latlng=f.latLng(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new f.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:f.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===f.CRS.Earth.distance){var e=Math.PI/180,g=this._mRadius/f.CRS.Earth.R/e,h=c.project([b+g,a]),i=c.project([b-g,a]),j=h.add(i).divideBy(2),k=c.unproject(j).lat,l=Math.acos((Math.cos(g*e)-Math.sin(b*e)*Math.sin(k*e))/(Math.cos(b*e)*Math.cos(k*e)))/e;(isNaN(l)||0===l)&&(l=g/Math.cos(Math.PI/180*b)),this._point=j.subtract(c.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(j.x-c.project([k,a-l]).x),1),this._radiusY=Math.max(Math.round(j.y-h.y),1)}else{var m=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(m).x}this._updateBounds()}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.SVG=f.Renderer.extend({getEvents:function(){var a=f.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=f.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=f.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){f.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),c=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute("width",b.x),c.setAttribute("height",b.y)),f.DomUtil.setPosition(c,a.min),c.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(a){var b=a._path=f.SVG.create("path");a.options.className&&f.DomUtil.addClass(b,a.options.className),a.options.interactive&&f.DomUtil.addClass(b,"leaflet-interactive"),this._updateStyle(a),this._layers[f.stamp(a)]=a},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){f.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f.stamp(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule",c.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(a,b){this._setPath(a,f.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,c=a._radius,d=a._radiusY||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){f.DomUtil.toFront(a._path)},_bringToBack:function(a){f.DomUtil.toBack(a._path)}}),f.extend(f.SVG,{create:function(a){return c.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,b){var c,d,e,g,h,i,j="";for(c=0,e=a.length;c<e;c++){for(h=a[c],d=0,g=h.length;d<g;d++)i=h[d],j+=(d?"L":"M")+i.x+" "+i.y;j+=b?f.Browser.svg?"z":"x":""}return j||"M0 0"}}),f.Browser.svg=!(!c.createElementNS||!f.SVG.create("svg").createSVGRect),f.svg=function(a){return f.Browser.svg||f.Browser.vml?new f.SVG(a):null},f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(a){return!1}}(),f.SVG.include(f.Browser.vml?{_initContainer:function(){this._container=f.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(f.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var b=a._container=f.SVG.create("shape");f.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=f.SVG.create("path"),b.appendChild(a._path),this._updateStyle(a),this._layers[f.stamp(a)]=a},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;f.DomUtil.remove(b),a.removeInteractiveTarget(b),delete this._layers[f.stamp(a)]},_updateStyle:function(a){var b=a._stroke,c=a._fill,d=a.options,e=a._container;e.stroked=!!d.stroke,e.filled=!!d.fill,d.stroke?(b||(b=a._stroke=f.SVG.create("stroke")),e.appendChild(b),b.weight=d.weight+"px",b.color=d.color,b.opacity=d.opacity,d.dashArray?b.dashStyle=f.Util.isArray(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=d.lineCap.replace("butt","flat"),b.joinstyle=d.lineJoin):b&&(e.removeChild(b),a._stroke=null),d.fill?(c||(c=a._fill=f.SVG.create("fill")),e.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(e.removeChild(c),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){f.DomUtil.toFront(a._container)},_bringToBack:function(a){f.DomUtil.toBack(a._container)}}:{}),f.Browser.vml&&(f.SVG.create=function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),f.Canvas=f.Renderer.extend({getEvents:function(){var a=f.Renderer.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){f.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=c.createElement("canvas");f.DomEvent.on(a,"mousemove",f.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var b in this._layers)a=this._layers[b],a._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},f.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,c=a.getSize(),d=f.Browser.retina?2:1;f.DomUtil.setPosition(b,a.min),b.width=d*c.x,b.height=d*c.y,b.style.width=c.x+"px",b.style.height=c.y+"px",f.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){f.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f.stamp(a)]=a;var b=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var b=a._order,c=b.next,d=b.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete a._order,delete this._layers[f.stamp(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(a.options.dashArray){var b,c=a.options.dashArray.split(","),d=[];for(b=0;b<c.length;b++)d.push(Number(c[b]));a.options._dashArray=d}},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||f.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(a){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new f.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var b=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,b.x,b.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var a,b=this._redrawBounds;if(this._ctx.save(),b){var c=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)a=d.layer,(!b||a._pxBounds&&a._pxBounds.intersects(b))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,b){if(this._drawing){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(this._drawnLayers[a._leaflet_id]=a,i.beginPath(),i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),c=0;c<h;c++){for(d=0,e=g[c].length;d<e;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);b&&i.closePath()}this._fillStroke(i,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var b=a._point,c=this._ctx,d=a._radius,e=(a._radiusY||d)/d;this._drawnLayers[a._leaflet_id]=a,1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=b.options;c.fill&&(a.globalAlpha=c.fillOpacity,a.fillStyle=c.fillColor||c.color,a.fill(c.fillRule||"evenodd")),c.stroke&&0!==c.weight&&(a.globalAlpha=c.opacity,a.lineWidth=c.weight,a.strokeStyle=c.color,a.lineCap=c.lineCap,a.lineJoin=c.lineJoin,a.stroke())},_onClick:function(a){for(var b,c,d=this._map.mouseEventToLayerPoint(a),e=this._drawFirst;e;e=e.next)b=e.layer,b.options.interactive&&b._containsPoint(d)&&!this._map._draggableMoved(b)&&(c=b);c&&(f.DomEvent._fakeStop(a),this._fireEvent([c],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,b)}},_handleMouseOut:function(a){var b=this._hoveredLayer;b&&(f.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([b],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,b){for(var c,d,e=this._drawFirst;e;e=e.next)c=e.layer,c.options.interactive&&c._containsPoint(b)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(a),d&&(f.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseover"),this._hoveredLayer=d)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,b,c){this._map._fireDOMEvent(b,c||b.type,a)},_bringToFront:function(a){var b=a._order,c=b.next,d=b.prev;c&&(c.prev=d,d?d.next=c:c&&(this._drawFirst=c),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(a))},_bringToBack:function(a){var b=a._order,c=b.next,d=b.prev;d&&(d.next=c,c?c.prev=d:d&&(this._drawLast=d),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(a))}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.canvas=function(a){return f.Browser.canvas?new f.Canvas(a):null},f.Polyline.prototype._containsPoint=function(a,b){var c,d,e,g,h,i,j=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;for(c=0,g=this._parts.length;c<g;c++)for(i=this._parts[c],d=0,h=i.length,e=h-1;d<h;e=d++)if((b||0!==d)&&f.LineUtil.pointToSegmentDistance(a,i[e],i[d])<=j)return!0;return!1},f.Polygon.prototype._containsPoint=function(a){var b,c,d,e,g,h,i,j,k=!1;if(!this._pxBounds.contains(a))return!1;for(e=0,i=this._parts.length;e<i;e++)for(b=this._parts[e],g=0,j=b.length,h=j-1;g<j;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k||f.Polyline.prototype._containsPoint.call(this,a,!0)},f.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=f.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;b<c;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(g.filter&&!g.filter(a))return this;var h=f.GeoJSON.geometryToLayer(a,g);return h?(h.feature=f.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)):this},resetStyle:function(a){return a.options=f.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b){var c,d,e,g,h="Feature"===a.type?a.geometry:a,i=h?h.coordinates:null,j=[],k=b&&b.pointToLayer,l=b&&b.coordsToLatLng||this.coordsToLatLng;if(!i&&!h)return null;switch(h.type){case"Point":return c=l(i),k?k(a,c):new f.Marker(c);case"MultiPoint":for(e=0,g=i.length;e<g;e++)c=l(i[e]),j.push(k?k(a,c):new f.Marker(c));return new f.FeatureGroup(j);case"LineString":case"MultiLineString":return d=this.coordsToLatLngs(i,"LineString"===h.type?0:1,l),new f.Polyline(d,b);case"Polygon":case"MultiPolygon":return d=this.coordsToLatLngs(i,"Polygon"===h.type?1:2,l),new f.Polygon(d,b);case"GeometryCollection":for(e=0,g=h.geometries.length;e<g;e++){var m=this.geometryToLayer({geometry:h.geometries[e],type:"Feature",properties:a.properties},b);m&&j.push(m)}return new f.FeatureGroup(j);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){for(var d,e=[],f=0,g=a.length;f<g;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),e.push(d);return e},latLngToCoords:function(a){return a.alt!==d?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,b,c){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b?f.GeoJSON.latLngsToCoords(a[e],b-1,c):f.GeoJSON.latLngToCoords(a[e]));return!b&&c&&d.push(d[0]),d},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var i={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(i),f.Circle.include(i),f.CircleMarker.include(i),f.Polyline.prototype.toGeoJSON=function(){var a=!f.Polyline._flat(this._latlngs),b=f.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return f.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})},f.Polygon.prototype.toGeoJSON=function(){var a=!f.Polyline._flat(this._latlngs),b=a&&!f.Polyline._flat(this._latlngs[0]),c=f.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);return a||(c=[c]),f.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:c})},f.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,c=[];return this.eachLayer(function(a){if(a.toGeoJSON){var d=a.toGeoJSON();c.push(b?d.geometry:f.GeoJSON.asFeature(d))}}),b?f.GeoJSON.getFeature(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}}),f.geoJSON=function(a,b){return new f.GeoJSON(a,b)},f.geoJson=f.geoJSON,f.Draggable=f.Evented.extend({options:{clickTolerance:3},statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){this._enabled||(f.DomEvent.on(this._dragStartTarget,f.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(f.Draggable._dragging===this&&this.finishDrag(),f.DomEvent.off(this._dragStartTarget,f.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!f.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(f.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(f.Draggable._dragging=this,this._preventOutline&&f.DomUtil.preventOutline(this._element),f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var b=a.touches?a.touches[0]:a;this._startPoint=new f.Point(b.clientX,b.clientY),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this)}},_onMove:function(b){if(!b._simulated&&this._enabled){if(b.touches&&b.touches.length>1)return void(this._moved=!0);var d=b.touches&&1===b.touches.length?b.touches[0]:b,e=new f.Point(d.clientX,d.clientY),g=e.subtract(this._startPoint);(g.x||g.y)&&(Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(f.DomEvent.preventDefault(b),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(g),f.DomUtil.addClass(c.body,"leaflet-dragging"),this._lastTarget=b.target||b.srcElement,a.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._lastEvent=b,this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){f.DomUtil.removeClass(c.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[a],this._onMove,this).off(c,f.Draggable.END[a],this._onUp,this);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,f.Draggable._dragging=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}f.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){f.DomUtil.removeClass(this._map._container,"leaflet-grab"),f.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=f.latLngBounds(this._map.options.maxBounds);this._offsetLimit=f.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),b-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=!c.inertia||this._times.length<2;if(b.fire("dragend",a),d)b.fire("moveend");else{var e=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,h=c.easeLinearity,i=e.multiplyBy(h/g),j=i.distanceTo([0,0]),k=Math.min(c.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(c.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();n.x||n.y?(n=b._limitOffset(n,b.options.maxBounds),f.Util.requestAnimFrame(function(){b.panBy(n,{duration:m,easeLinearity:h,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom(),d=b.options.zoomDelta,e=a.originalEvent.shiftKey?c-d:c+d;"center"===b.options.doubleClickZoom?b.setZoom(e):b.setZoomAround(a.containerPoint,e)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a),c=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),d),f.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0;a._stop();var d=this._delta/(4*this._map.options.wheelPxPerZoomLevel),e=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,g=a._limitZoom(b+(this._delta>0?f:-f))-b;this._delta=0,this._startTime=null,g&&("center"===a.options.scrollWheelZoom?a.setZoom(b+g):a.setZoomAround(this._lastMousePos,b+g))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,c){function d(a){var b;if(f.Browser.pointer){if(!f.Browser.edge||"mouse"===a.pointerType)return;b=f.DomEvent._pointersCount}else b=a.touches.length;if(!(b>1)){var c=Date.now(),d=c-(g||c);h=a.touches?a.touches[0]:a,i=d>0&&d<=j,g=c}}function e(a){if(i&&!h.cancelBubble){if(f.Browser.pointer){if(!f.Browser.edge||"mouse"===a.pointerType)return;var c,d,e={};for(d in h)c=h[d],e[d]=c&&c.bind?c.bind(h):c;h=e}h.type="dblclick",b(h),g=null}}var g,h,i=!1,j=250,k="_leaflet_",l=this._touchstart,m=this._touchend;return a[k+l+c]=d,a[k+m+c]=e,a[k+"dblclick"+c]=b,a.addEventListener(l,d,!1),a.addEventListener(m,e,!1),a.addEventListener("dblclick",b,!1),this},removeDoubleTapListener:function(a,b){var c="_leaflet_",d=a[c+this._touchstart+b],e=a[c+this._touchend+b],g=a[c+"dblclick"+b];return a.removeEventListener(this._touchstart,d,!1),a.removeEventListener(this._touchend,e,!1),f.Browser.edge||a.removeEventListener("dblclick",g,!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(a,b,c,d){return"touchstart"===b?this._addPointerStart(a,c,d):"touchmove"===b?this._addPointerMove(a,c,d):"touchend"===b&&this._addPointerEnd(a,c,d),this},removePointerListener:function(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1)),this},_addPointerStart:function(a,b,d){var e=f.bind(function(a){if("mouse"!==a.pointerType&&a.MSPOINTER_TYPE_MOUSE&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(a.target.tagName)<0))return;f.DomEvent.preventDefault(a)}this._handlePointer(a,b)},this);if(a["_leaflet_touchstart"+d]=e,a.addEventListener(this.POINTER_DOWN,e,!1),!this._pointerDocListener){var g=f.bind(this._globalPointerUp,this);c.documentElement.addEventListener(this.POINTER_DOWN,f.bind(this._globalPointerDown,this),!0),c.documentElement.addEventListener(this.POINTER_MOVE,f.bind(this._globalPointerMove,this),!0),c.documentElement.addEventListener(this.POINTER_UP,g,!0),c.documentElement.addEventListener(this.POINTER_CANCEL,g,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers)a.touches.push(this._pointers[c]);a.changedTouches=[a],b(a)},_addPointerMove:function(a,b,c){var d=f.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,b)},this);a["_leaflet_touchmove"+c]=d,a.addEventListener(this.POINTER_MOVE,d,!1)},_addPointerEnd:function(a,b,c){var d=f.bind(function(a){this._handlePointer(a,b)},this);a["_leaflet_touchend"+c]=d,a.addEventListener(this.POINTER_UP,d,!1),a.addEventListener(this.POINTER_CANCEL,d,!1)}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToContainerPoint(a.touches[0]),e=b.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),"center"!==b.options.touchZoom&&(this._pinchStartLatLng=b.containerPointToLatLng(d.add(e)._divideBy(2))),this._startDist=d.distanceTo(e),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,c=b.mouseEventToContainerPoint(a.touches[0]),d=b.mouseEventToContainerPoint(a.touches[1]),e=c.distanceTo(d)/this._startDist;if(this._zoom=b.getScaleZoom(e,this._startZoom),
!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&e<1||this._zoom>b.getMaxZoom()&&e>1)&&(this._zoom=b._limitZoom(this._zoom)),"center"===b.options.touchZoom){if(this._center=this._startLatLng,1===e)return}else{var g=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(1===e&&0===g.x&&0===g.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(b._moveStart(!0),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest);var h=f.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=f.Util.requestAnimFrame(h,this,!0),f.DomEvent.preventDefault(a)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),this._simulateEvent("mousedown",b),f.DomEvent.on(c,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._simulateEvent("mouseup",b),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY),this._simulateEvent("mousemove",b)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return!(!a.shiftKey||1!==a.which&&1!==a.button)&&(this._resetState(),f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void f.DomEvent.on(c,{contextmenu:f.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=f.DomUtil.create("div","leaflet-zoom-box",this._container),f.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new f.Bounds(this._point,this._startPoint),c=b.getSize();f.DomUtil.setPosition(this._box,b.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(f.DomUtil.remove(this._box),f.DomUtil.removeClass(this._container,"leaflet-crosshair")),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,{contextmenu:f.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(f.bind(this._resetState,this),0);var b=new f.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),f.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),f.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;b<c;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;b<c;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;b<c;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;b<c;b++)d[e.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;b<c;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;b<c;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b,c=a.keyCode,d=this._map;if(c in this._panKeys){if(d._panAnim&&d._panAnim._inProgress)return;b=this._panKeys[c],a.shiftKey&&(b=f.point(b).multiplyBy(3)),d.panBy(b),d.options.maxBounds&&d.panInsideBounds(d.options.maxBounds)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else{if(27!==c)return;d.closePopup()}f.DomEvent.stop(a)}}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),f.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var b=this._marker,c=b._shadow,d=f.DomUtil.getPosition(b._icon),e=b._map.layerPointToLatLng(d);c&&f.DomUtil.setPosition(c,d),b._latlng=e,a.latlng=e,a.oldLatLng=this._oldLatLng,b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b),this},remove:function(){return this._map?(f.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,e){var g=c+a+" "+c+e;b[a+e]=f.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=f.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){f.DomUtil.remove(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,b,c,d,e){var g=f.DomUtil.create("a",c,d);return g.innerHTML=a,g.href="#",g.title=b,g.setAttribute("role","button"),g.setAttribute("aria-label",b),f.DomEvent.on(g,"mousedown dblclick",f.DomEvent.stopPropagation).on(g,"click",f.DomEvent.stop).on(g,"click",e,this).on(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&f.DomUtil.addClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent&&f.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(new f.Control.Attribution).addTo(this)}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b+"-line",c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b,c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var b,c,d,e=3.2808399*a;e>5280?(b=e/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+" mi",c/b)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,b,c,d){return c<d?-1:d<c?1:0}},initialize:function(a,b,c){f.setOptions(this,c),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._map?this._update():this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(f.stamp(a));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(f.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):f.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return f.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a),c=this.options.collapsed;b.setAttribute("aria-haspopup",!0),f.DomEvent.disableClickPropagation(b),f.Browser.touch||f.DomEvent.disableScrollPropagation(b);var d=this._form=f.DomUtil.create("form",a+"-list");c&&(this._map.on("click",this.collapse,this),f.Browser.android||f.DomEvent.on(b,{mouseenter:this.expand,mouseleave:this.collapse},this));var e=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);e.href="#",e.title="Layers",f.Browser.touch?f.DomEvent.on(e,"click",f.DomEvent.stop).on(e,"click",this.expand,this):f.DomEvent.on(e,"focus",this.expand,this),f.DomEvent.on(d,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),c||this.expand(),this._baseLayersList=f.DomUtil.create("div",a+"-base",d),this._separator=f.DomUtil.create("div",a+"-separator",d),this._overlaysList=f.DomUtil.create("div",a+"-overlays",d),b.appendChild(d)},_getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&f.stamp(this._layers[b].layer)===a)return this._layers[b]},_addLayer:function(a,b,c){a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:c}),this.options.sortLayers&&this._layers.sort(f.bind(function(a,b){return this.options.sortFunction(a.layer,b.layer,a.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;f.DomUtil.empty(this._baseLayersList),f.DomUtil.empty(this._overlaysList);var a,b,c,d,e=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay,e+=d.overlay?0:1;return this.options.hideSingleBase&&(a=a&&e>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=b&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._getLayer(f.stamp(a.target)),c=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(b?' checked="checked"':"")+"/>",e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var b,d=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=c.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e),b.layerId=f.stamp(a.layer),f.DomEvent.on(b,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name;var h=c.createElement("div");d.appendChild(h),h.appendChild(b),h.appendChild(g);var i=a.overlay?this._overlaysList:this._baseLayersList;return i.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=[],f=[];this._handlingClick=!0;for(var g=d.length-1;g>=0;g--)a=d[g],b=this._getLayer(a.layerId).layer,c=this._map.hasLayer(b),a.checked&&!c?e.push(b):!a.checked&&c&&f.push(b);for(g=0;g<f.length;g++)this._map.removeLayer(f[g]);for(g=0;g<e.length;g++)this._map.addLayer(e[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,b,c=this._form.getElementsByTagName("input"),e=this._map.getZoom(),f=c.length-1;f>=0;f--)a=c[f],b=this._getLayer(a.layerId).layer,a.disabled=b.options.minZoom!==d&&e<b.options.minZoom||b.options.maxZoom!==d&&e>b.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)}}(window,document)},{}],49:[function(a,b,c){!function(a){"use strict";function d(){var a=document.getElementById("nanobarcss");if(null===a){if(a=document.createElement("style"),a.type="text/css",a.id="nanobarcss",document.head.insertBefore(a,document.head.firstChild),!a.styleSheet)return a.appendChild(document.createTextNode(h));a.styleSheet.cssText=h}}function e(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function f(a){function b(){var b=g-h;b<.1&&b>-.1?(c(h),i=0,100===g&&(f.style.height=0,setTimeout(function(){a(f)},300))):(c(g-b/4),setTimeout(d,16))}function c(a){g=a,f.style.width=g+"%"}function d(a){a>=0?(h=a,i||(i=1,b())):i&&b()}var f=document.createElement("div"),g=0,h=0,i=0,j={el:f,go:d};return e(f,"bar"),j}function g(a){function b(a){h.removeChild(a)}function c(){var a=f(b);h.appendChild(a.el),g=a.go}a=a||{};var g,h=document.createElement("div"),i={el:h,go:function(a){g(a),100===a&&c()}};return d(),e(h,"nanobar"),a.id&&(h.id=a.id),a.classname&&e(h,a.classname),a.target?(h.style.position="relative",a.target.insertBefore(h,a.target.firstChild)):(h.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(h)),c(),i}var h=".nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}";"object"==typeof c?b.exports=g:"function"==typeof define&&define.amd?define([],function(){return g}):a.Nanobar=g}(this)},{}],50:[function(a,b,c){b.exports=[{name:"AED (Black)",tags:["aed","automated external defibrillator","defibrillator"],icon:"aed-black",release:"2.0.0"},{name:"AED (White)",tags:["aed","automated external defibrillator","defibrillator"],icon:"aed-white",release:"2.0.0"},{name:"Airfield (Black)",tags:["airfield","airstrip","plane","travel"],icon:"airfield-black",release:"2.4.0"},{name:"Airfield (White)",tags:["airfield","airstrip","plane","travel"],icon:"airfield-white",release:"2.4.0"},{name:"Airport (Black)",tags:["airport","plane","travel"],icon:"airport-black",release:"1.0.0"},{name:"Airport (White)",tags:["airport","plane","travel"],icon:"airport-white",release:"1.0.0"},{name:"All-Terrain Trail (Black)",tags:["all terrain vehicle trail","atv","off road","ohv","orv trail","quad"],icon:"all-terrain-trail-black",release:"2.2.0"},{name:"All-Terrain Trail (White)",tags:["all terrain vehicle trail","atv","off road","ohv","orv trail","quad"],icon:"all-terrain-trail-white",release:"2.2.0"},{name:"Amphitheater (Black)",tags:["amphitheater","theater","leisure"],icon:"amphitheater-black",release:"1.0.0"},{name:"Amphitheater (White)",tags:["amphitheater","theater","leisure"],icon:"amphitheater-white",release:"1.0.0"},{name:"Aquatic Invasive Species Decontamination Station (Black)",tags:["invasive","regulatory","environment","water recreation"],icon:"aquatic-invasive-species-decontamination-station-black",release:"2.4.0"},{name:"Aquatic Invasive Species Decontamination Station (White)",tags:["invasive","regulatory","environment","water recreation"],icon:"aquatic-invasive-species-decontamination-station-white",release:"2.4.0"},{name:"ATM (Black)",tags:["atm","automated teller machine","cash","cash dispenser"],icon:"atm-black",release:"2.2.0"},{name:"ATM (White)",tags:["atm","automated teller machine","cash","cash dispenser"],icon:"atm-white",release:"2.2.0"},{name:"Bear (Black)",tags:["bear"],icon:"bear-black",release:"1.0.0"},{name:"Bear (White)",tags:["bear"],icon:"bear-white",release:"1.0.0"},{name:"Beach Access (Black)",tags:["beach","coast","shore","strand"],icon:"beach-access-black",release:"2.2.0"},{name:"Beach Access (White)",tags:["beach","coast","shore","strand"],icon:"beach-access-white",release:"2.2.0"},{name:"Bike Trail (Black)",tags:["bike","cycling","trail"],icon:"bicycle-trail-black",release:"1.0.0"},{name:"Bike Trail (White)",tags:["bike","cycling","trail"],icon:"bicycle-trail-white",release:"1.0.0"},{name:"Boat Launch (Black)",tags:["boats","sailing","recreation"],icon:"boat-launch-black",release:"1.0.0"},{name:"Boat Launch (White)",tags:["boats","sailing","recreation"],icon:"boat-launch-white",release:"1.0.0"},{name:"Boat Tour (Black)",tags:["boats","sailing","recreation"],icon:"boat-tour-black",release:"1.0.0"},{name:"Boat Tour (White)",tags:["boats","sailing","recreation"],icon:"boat-tour-white",release:"1.0.0"},{name:"Bookstore (Black)",tags:["book","reading","shop","shopping"],icon:"bookstore-black",release:"2.2.0"},{name:"Bookstore (White)",tags:["book","reading","shop","shopping"],icon:"bookstore-white",release:"2.2.0"},{name:"Bus and Shuttle Stop (Black)",tags:["bus","shuttle","transportation"],icon:"bus-stop-black",release:"1.0.0"},{name:"Bus and Shuttle Stop (White)",tags:["bus","shuttle","transportation"],icon:"bus-stop-white",release:"1.0.0"},{name:"Campfire (Black)",tags:["campfire"],icon:"campfire-black",release:"1.0.0"},{name:"Campfire (White)",tags:["campfire"],icon:"campfire-white",release:"1.0.0"},{name:"Camping (Black)",tags:["camp","campsite","tent"],icon:"campground-black",release:"1.0.0"},{name:"Camping (White)",tags:["camp","campsite","tent"],icon:"campground-white",release:"1.0.0"},{name:"Campsite (Black)",tags:["camp","campsite","tent"],icon:"campsite-black",release:"1.0.0"},{name:"Campsite (White)",tags:["camp","campsite","tent"],icon:"campsite-white",release:"1.0.0"},{name:"Canoe Access (Black)",tags:["canoe access","canoe","recreation"],icon:"canoe-access-black",release:"1.0.0"},{name:"Canoe Access (White)",tags:["canoe access","canoe","recreation"],icon:"canoe-access-white",release:"1.0.0"},{name:"Caving (Black)",tags:["cave","cave entrance","cavern","grotto"],icon:"caving-black",release:"2.2.0"},{name:"Caving (White)",tags:["cave","cave entrance","cavern","grotto"],icon:"caving-white",release:"2.2.0"},{name:"Construction (Black)",tags:["construction","road work","traffic control"],icon:"construction-black",release:"2.4.0"},{name:"Construction (White)",tags:["construction","road work","traffic control"],icon:"construction-white",release:"2.4.0"},{name:"Cross Country Ski Trail (Black)",tags:["cross country ski trail","skiing","cross country"],icon:"cross-country-ski-trail-black",release:"1.0.0"},{name:"Cross Country Ski Trail (White)",tags:["cross country ski trail","skiing","cross country"],icon:"cross-country-ski-trail-white",release:"1.0.0"},{name:"Dam (Black)",tags:["dam","breakwater","dike","jetty"],icon:"dam-black",release:"2.2.0"},{name:"Dam (White)",tags:["dam","breakwater","dike","jetty"],icon:"dam-white",release:"2.2.0"},{name:"Downhill Skiing (Black)",tags:["downhill skiing","ski","recreation"],icon:"downhill-skiing-black",release:"1.0.0"},{name:"Downhill Skiing (White)",tags:["downhill skiing","ski","recreation"],icon:"downhill-skiing-white",release:"1.0.0"},{name:"Dot (Black)",tags:["circle marker","generic","dot"],icon:"dot-black",release:"2.2.0"},{name:"Dot (White)",tags:["circle marker","generic","dot"],icon:"dot-white",release:"2.2.0"},{name:"Drinking Water (Black)",tags:["drinking water","water"],icon:"drinking-water-black",release:"1.0.0"},{name:"Drinking Water (White)",tags:["drinking water","water"],icon:"drinking-water-white",release:"1.0.0"},{name:"Emergency Telephone (Black)",tags:["emergency telephone","phone"],icon:"emergency-telephone-black",release:"2.2.0"},{name:"Emergency Telephone (White)",tags:["emergency telephone","phone"],icon:"emergency-telephone-white",release:"2.2.0"},{name:"Entrance (Black)",tags:["entrance","building"],icon:"entrance-black",release:"2.0.0"},{name:"Entrance (White)",tags:["entrance","building"],icon:"entrance-white",release:"2.0.0"},{name:"Entrance Station (Black)",tags:["entrance station","entry","gateway","portal"],icon:"entrance-station-black",release:"2.0.0"},{name:"Entrance Station (White)",tags:["entrance station","entry","gateway","portal"],icon:"entrance-station-white",release:"2.0.0"},{name:"First Aid (Black)",tags:["first aid","medical"],icon:"first-aid-black",release:"1.0.0"},{name:"First Aid (White)",tags:["first aid","medical"],icon:"first-aid-white",release:"1.0.0"},{name:"Fishing (Black)",tags:["fishing","recreation"],icon:"fishing-black",release:"1.0.0"},{name:"Fishing (White)",tags:["fishing","recreation"],icon:"fishing-white",release:"1.0.0"},{name:"Flagpole (Black)",tags:["flagpole","flag"],icon:"flagpole-black",release:"2.0.0"},{name:"Flagpole (White)",tags:["flagpole","flag"],icon:"flagpole-white",release:"2.0.0"},{name:"Food Cache (Black)",tags:["food cache","food box","food stoage"],icon:"food-cache-black",release:"2.0.0"},{name:"Food Cache (White)",tags:["food cache","food box","food stoage"],icon:"food-cache-white",release:"2.0.0"},{name:"Food Service (Black)",tags:["food","restaurant","dining"],icon:"food-service-black",release:"1.0.0"},{name:"Food Service (White)",tags:["food","restaurant","dining"],icon:"food-service-white",release:"1.0.0"},{name:"Four Wheel Drive (Black)",tags:["4 wheel drive","off road"],icon:"four-wheel-drive-road-black",release:"1.0.0"},{name:"Four Wheel Drive (White)",tags:["4 wheel drive","off road"],icon:"four-wheel-drive-road-white",release:"1.0.0"},{name:"Gas Station (Black)",tags:["gas","fuel","service"],icon:"gas-station-black",release:"1.0.0"},{name:"Gas Station (White)",tags:["gas","fuel","service"],icon:"gas-station-white",release:"1.0.0"},{name:"Golfing (Black)",tags:["golfing","golf"],icon:"golfing-black",release:"1.0.0"},{name:"Golfing (White)",tags:["golifing","golf"],icon:"golfing-white",release:"1.0.0"},{name:"Historic Feature (Black)",tags:["historic","site","ruin","monument","memorial"],icon:"historic-feature-black",release:"2.2.0"},{name:"Historic Feature (White)",tags:["historic","site","ruin","monument","memorial"],icon:"historic-feature-white",release:"2.2.0"},{name:"Horseback Riding (Black)",tags:["horseback riding","horseback rental","horseback tour"],icon:"horseback-riding-black",release:"1.0.0"},{name:"Horseback Riding (White)",tags:["horseback riding","horseback rental","horseback tour"],icon:"horseback-riding-white",release:"1.0.0"},{name:"Hospital (Black)",tags:["hospital"],icon:"hospital-black",release:"1.0.0"},{name:"Hospital (White)",tags:["hospital"],icon:"hospital-white",release:"1.0.0"},{name:"Ice Skating (Black)",tags:["ice skating","skating"],icon:"ice-skating-black",release:"1.0.0"},{name:"Ice Skating (White)",tags:["ice skating","skating"],icon:"ice-skating-white",release:"1.0.0"},{name:"Incident (Black)",tags:["incident","hazard","caution","road condition"],icon:"incident-black",release:"2.4.0"},{name:"Incident (White)",tags:["incident","hazard","caution","road condition"],icon:"incident-white",release:"2.4.0"},{name:"Information (Black)",tags:["information","service"],icon:"information-black",release:"1.0.0"},{name:"Information (White)",tags:["information","service"],icon:"information-white",release:"1.0.0"},{name:"Interpretive Exhibit (Black)",tags:["information","attraction","exhibit","wayside","interpretive sign","tourist attraction"],icon:"interpretive-exhibit-black",release:"2.2.0"},{name:"Interpretive Exhibit (White)",tags:["information","attraction","exhibit","wayside","interpretive sign","tourist attraction"],icon:"interpretive-exhibit-white",release:"2.2.0"},{name:"Laundry (Black)",tags:["laundry","laundromat","service"],icon:"laundry-black",release:"2.0.0"},{name:"Laundry (White)",tags:["laundry","laundromat","service"],icon:"laundry-white",release:"2.0.0"},{name:"Library (Black)",tags:["book","reading","information"],icon:"library-black",release:"2.2.0"},{name:"Library (White)",tags:["book","reading","information"],icon:"library-white",release:"2.2.0"},{name:"Lighthouse (Black)",tags:["lighthouse","beacon"],icon:"lighthouse-black",release:"2.2.0"},{name:"Lighthouse (White)",tags:["lighthouse","beacon"],icon:"lighthouse-white",release:"2.2.0"},{name:"Litter Receptacle (Black)",tags:["litter receptacle","trash can"],icon:"litter-receptacle-black",release:"1.0.0"},{name:"Litter Receptacle (White)",tags:["litter receptacle","trash can"],icon:"litter-receptacle-white",release:"1.0.0"},{name:"Lodging (Black)",tags:["hotel","motel","lodging"],icon:"lodging-black",release:"1.0.0"},{name:"Lodging (White)",tags:["hotel","motel","lodging"],icon:"lodging-white",release:"1.0.0"},{name:"Lookout Tower (Black)",tags:["lookout tower","fire tower","water tower"],icon:"lookout-tower-black",release:"2.2.0"},{name:"Lookout Tower (White)",tags:["lookout tower","fire tower","water tower"],icon:"lookout-tower-white",release:"2.2.0"},{name:"Marina (Black)",tags:["marina"],icon:"marina-black",release:"1.0.0"},{name:"Marina (White)",tags:["marina"],icon:"marina-white",release:"1.0.0"},{name:"Mechanic (Black)",tags:["mechanic","auto shop","boat house","bus barn","maintenance","utility building","workshop"],
icon:"mechanic-black",release:"2.2.0"},{name:"Mechanic (White)",tags:["mechanic","auto shop","boat house","bus barn","maintenance","utility building","workshop"],icon:"mechanic-white",release:"2.2.0"},{name:"Motor Bike Trail (Black)",tags:["motor bike trail"],icon:"motor-bike-trail-black",release:"1.0.0"},{name:"Motor Bike Trail (White)",tags:["motor bike trail"],icon:"motor-bike-trail-white",release:"1.0.0"},{name:"Museum (Black)",tags:["history","nature","tourist attraction"],icon:"museum-black",release:"2.2.0"},{name:"Museum (White)",tags:["history","nature","tourist attraction"],icon:"museum-white",release:"2.2.0"},{name:"Parking (Black)",tags:["parking","park"],icon:"parking-black",release:"1.0.0"},{name:"Parking (White)",tags:["parking","park"],icon:"parking-white",release:"1.0.0"},{name:"Pets on Leash (Black)",tags:["pets on leash"],icon:"pets-on-leash-black",release:"1.0.0"},{name:"Pets on Leash (White)",tags:["pets on leash"],icon:"pets-on-leash-white",release:"1.0.0"},{name:"Picnic Area (Black)",tags:["picnic","recreation"],icon:"picnic-area-black",release:"1.0.0"},{name:"Picnic Area (White)",tags:["picnic","recreation"],icon:"picnic-area-white",release:"1.0.0"},{name:"Playground (Black)",tags:["play area","playpark"],icon:"playground-black",release:"2.2.0"},{name:"Playground (White)",tags:["play area","playpark"],icon:"playground-white",release:"2.2.0"},{name:"Post Office (Black)",tags:["post office"],icon:"post-office-black",release:"1.0.0"},{name:"Post Office (White)",tags:["post office"],icon:"post-office-white",release:"1.0.0"},{name:"Radiator Water (Black)",tags:["radiator water"],icon:"radiator-water-black",release:"1.0.0"},{name:"Radiator Water (White)",tags:["radiator water"],icon:"radiator-water-white",release:"1.0.0"},{name:"Railroad Crossing (Black)",tags:["railroad","crossing","rr xing"],icon:"rr-xing-black",release:"2.0.0"},{name:"Railroad Crossing (White)",tags:["railroad","crossing","rr xing"],icon:"rr-xing-white",release:"2.0.0"},{name:"Ranger Station (Black)",tags:["ranger station"],icon:"ranger-station-black",release:"1.0.0"},{name:"Ranger Station (White)",tags:["ranger station"],icon:"ranger-station-white",release:"1.0.0"},{name:"Recycling (Black)",tags:["recycling"],icon:"recycling-black",release:"1.0.0"},{name:"Recycling (White)",tags:["recycling"],icon:"recycling-white",release:"1.0.0"},{name:"Restroom (Black)",tags:["restroom","bathroom","toilet"],icon:"restrooms-black",release:"1.0.0"},{name:"Restroom (White)",tags:["restroom","bathroom","toilet"],icon:"restrooms-white",release:"1.0.0"},{name:"RV Campground (Black)",tags:["rv campground"],icon:"rv-campground-black",release:"1.0.0"},{name:"RV Campground (White)",tags:["rv campground"],icon:"rv-campground-white",release:"1.0.0"},{name:"Sailing (Black)",tags:["sailing"],icon:"sailing-black",release:"1.0.0"},{name:"Sailing (White)",tags:["sailing"],icon:"sailing-white",release:"1.0.0"},{name:"Sanitary Dump Station (Black)",tags:["sanitary dump station"],icon:"sanitary-disposal-station-black",release:"1.0.0"},{name:"Sanitary Dump Station (White)",tags:["sanitary dump station"],icon:"sanitary-disposal-station-white",release:"1.0.0"},{name:"Scenic Viewpoint (Black)",tags:["scenic viewpoint","overlook","observation point","vista","viewing area","lookout"],icon:"scenic-viewpoint-black",release:"2.1.0"},{name:"Scenic Viewpoint (White)",tags:["scenic viewpoint","overlook","observation point","vista","viewing area","lookout"],icon:"scenic-viewpoint-white",release:"2.1.0"},{name:"Scuba Diving (Black)",tags:["scuba diving"],icon:"scuba-diving-black",release:"1.0.0"},{name:"Scuba Diving (White)",tags:["scuba diving"],icon:"scuba-diving-white",release:"1.0.0"},{name:"Sea Plane (Black)",tags:["airport","float landing","float plane"],icon:"sea-plane-black",release:"2.2.0"},{name:"Sea Plane (White)",tags:["airport","float landing","float plane"],icon:"sea-plane-white",release:"2.2.0"},{name:"Self Guided Trail (Black)",tags:["trail"],icon:"self-guiding-trail-black",release:"1.0.0"},{name:"Self Guided Trail (White)",tags:["trail"],icon:"self-guiding-trail-white",release:"1.0.0"},{name:"Shelter (Black)",tags:["shelter"],icon:"shelter-black",release:"1.0.0"},{name:"Shelter (White)",tags:["shelter"],icon:"shelter-white",release:"1.0.0"},{name:"Shelter Cabin (Black)",tags:["shelter cabin","cottage"],icon:"shelter-cabin-black",release:"2.2.0"},{name:"Shelter Cabin (White)",tags:["shelter cabin","cottage"],icon:"shelter-cabin-white",release:"2.2.0"},{name:"Showers (Black)",tags:["showers"],icon:"showers-black",release:"1.0.0"},{name:"Showers (White)",tags:["showers"],icon:"showers-white",release:"1.0.0"},{name:"Sign (Black)",tags:["sign","directional","regulatory","marker","milepost","gateway"],icon:"sign-black",release:"2.2.0"},{name:"Sign (White)",tags:["sign","directional","regulatory","marker","milepost","gateway"],icon:"sign-white",release:"2.2.0"},{name:"Sledding (Black)",tags:["sledding"],icon:"sledding-black",release:"1.0.0"},{name:"Sledding (White)",tags:["sledding"],icon:"sledding-white",release:"1.0.0"},{name:"Snowmobile Trail (Black)",tags:["snowmobile trail"],icon:"snowmobile-trail-black",release:"1.0.0"},{name:"Snowmobile Trail (White)",tags:["snowmobile trail"],icon:"snowmobile-trail-white",release:"1.0.0"},{name:"Souvenir Shop (Black)",tags:["souvenir","gift shop"],icon:"souvenir-shop-black",release:"2.2.0"},{name:"Souvenir Shop (White)",tags:["souvenir","gift shop"],icon:"souvenir-shop-white",release:"2.2.0"},{name:"Spring (Black)",tags:["spring","seep"],icon:"spring-black",release:"2.0.0"},{name:"Spring (White)",tags:["spring","seep"],icon:"spring-white",release:"2.0.0"},{name:"Stable (Black)",tags:["stable"],icon:"stable-black",release:"1.0.0"},{name:"Stable (White)",tags:["stable"],icon:"stable-white",release:"1.0.0"},{name:"Statue (Black)",tags:["statue","monument","sculpture"],icon:"statue-black",release:"2.0.0"},{name:"Statue (White)",tags:["statue","monument","sculpture"],icon:"statue-white",release:"2.0.0"},{name:"Store (Black)",tags:["store","food","shopping"],icon:"store-black",release:"1.0.0"},{name:"Store (White)",tags:["store","food","shopping"],icon:"store-white",release:"1.0.0"},{name:"Swimming (Black)",tags:["swimming"],icon:"swimming-black",release:"1.0.0"},{name:"Swimming (White)",tags:["swimming"],icon:"swimming-white",release:"1.0.0"},{name:"Telephone (Black)",tags:["telephone"],icon:"telephone-black",release:"1.0.0"},{name:"Telephone (White)",tags:["telephone"],icon:"telephone-white",release:"1.0.0"},{name:"Theater (Black)",tags:["cinema","movie theater","film"],icon:"theater-black",release:"2.2.0"},{name:"Theater (White)",tags:["cinema","movie theater","film"],icon:"theater-white",release:"2.2.0"},{name:"Trailhead (Black)",tags:["trailhead"],icon:"trailhead-black",release:"1.0.0"},{name:"Trailhead (White)",tags:["trailhead"],icon:"trailhead-white",release:"1.0.0"},{name:"Trash Dumpster (Black)",tags:["trash","waste","dumpster"],icon:"trash-dumpster-black",release:"2.2.0"},{name:"Trash Dumpster (White)",tags:["trash","waste","dumpster"],icon:"trash-dumpster-white",release:"2.2.0"},{name:"Tunnel (Black)",tags:["tunnel","covered passageway"],icon:"tunnel-black",release:"2.1.0"},{name:"Tunnel (White)",tags:["tunnel","covered passageway"],icon:"tunnel-white",release:"2.1.0"},{name:"Vehicle Ferry (Black)",tags:["vehicle ferry","ferry terminal","boat terminal"],icon:"vehicle-ferry-black",release:"2.2.0"},{name:"Vehicle Ferry (White)",tags:["vehicle ferry","ferry terminal","boat terminal"],icon:"vehicle-ferry-white",release:"2.2.0"},{name:"Visitor Center (Black)",tags:["visitor center"],icon:"visitor-center-black",release:"1.0.0"},{name:"Visitor Center (White)",tags:["visitor center"],icon:"visitor-center-white",release:"1.0.0"},{name:"Waterfall (Black)",tags:["waterfall"],icon:"waterfall-black",release:"1.0.0"},{name:"Waterfall (White)",tags:["waterfall"],icon:"waterfall-white",release:"1.0.0"},{name:"Webcam (Black)",tags:["webcam","weather camera"],icon:"webcam-black",release:"2.1.0"},{name:"Webcam (White)",tags:["webcam","weather camera"],icon:"webcam-white",release:"2.1.0"},{name:"Wheelchair Accessible (Black)",tags:["wheelchair accessible"],icon:"wheelchair-accessible-black",release:"1.0.0"},{name:"Wheelchair Accessible (White)",tags:["wheelchair accessible"],icon:"wheelchair-accessible-white",release:"1.0.0"},{name:"Wi-Fi (Black)",tags:["wifi","wireless internet","online"],icon:"wi-fi-black",release:"2.2.0"},{name:"Wi-Fi (White)",tags:["wifi","wireless internet","online"],icon:"wi-fi-white",release:"2.2.0"},{name:"Wind Surfing (Black)",tags:["wind surfing"],icon:"wind-surfing-black",release:"1.0.0"},{name:"Wind Surfing (White)",tags:["wind surfing"],icon:"wind-surfing-white",release:"1.0.0"},{name:"Zebra Mussel Decontamination Station (Black)",tags:["decontamination","water recreation"],icon:"zebra-mussel-decontamination-station-black",release:"2.2.0"},{name:"Zebra Mussel Decontamination Station (White)",tags:["decontamination","water recreation"],icon:"zebra-mussel-decontamination-station-white",release:"2.2.0"},{name:"Letter 'A' (Black)",tags:["letter"],icon:"letter-a-black",release:"1.0.0"},{name:"Letter 'A' (White)",tags:["letter"],icon:"letter-a-white",release:"1.0.0"},{name:"Letter 'B' (Black)",tags:["letter"],icon:"letter-b-black",release:"1.0.0"},{name:"Letter 'B' (White)",tags:["letter"],icon:"letter-b-white",release:"1.0.0"},{name:"Letter 'C' (Black)",tags:["letter"],icon:"letter-c-black",release:"1.0.0"},{name:"Letter 'C' (White)",tags:["letter"],icon:"letter-c-white",release:"1.0.0"},{name:"Letter 'D' (Black)",tags:["letter"],icon:"letter-d-black",release:"1.0.0"},{name:"Letter 'D' (White)",tags:["letter"],icon:"letter-d-white",release:"1.0.0"},{name:"Letter 'E' (Black)",tags:["letter"],icon:"letter-e-black",release:"1.0.0"},{name:"Letter 'E' (White)",tags:["letter"],icon:"letter-e-white",release:"1.0.0"},{name:"Letter 'F' (Black)",tags:["letter"],icon:"letter-f-black",release:"1.0.0"},{name:"Letter 'F' (White)",tags:["letter"],icon:"letter-f-white",release:"1.0.0"},{name:"Letter 'G' (Black)",tags:["letter"],icon:"letter-g-black",release:"1.0.0"},{name:"Letter 'G' (White)",tags:["letter"],icon:"letter-g-white",release:"1.0.0"},{name:"Letter 'H' (Black)",tags:["letter"],icon:"letter-h-black",release:"1.0.0"},{name:"Letter 'H' (White)",tags:["letter"],icon:"letter-h-white",release:"1.0.0"},{name:"Letter 'I' (Black)",tags:["letter"],icon:"letter-i-black",release:"1.0.0"},{name:"Letter 'I' (White)",tags:["letter"],icon:"letter-i-white",release:"1.0.0"},{name:"Letter 'J' (Black)",tags:["letter"],icon:"letter-j-black",release:"1.0.0"},{name:"Letter 'J' (White)",tags:["letter"],icon:"letter-j-white",release:"1.0.0"},{name:"Letter 'K' (Black)",tags:["letter"],icon:"letter-k-black",release:"1.0.0"},{name:"Letter 'K' (White)",tags:["letter"],icon:"letter-k-white",release:"1.0.0"},{name:"Letter 'L' (Black)",tags:["letter"],icon:"letter-l-black",release:"1.0.0"},{name:"Letter 'L' (White)",tags:["letter"],icon:"letter-l-white",release:"1.0.0"},{name:"Letter 'M' (Black)",tags:["letter"],icon:"letter-m-black",release:"1.0.0"},{name:"Letter 'M' (White)",tags:["letter"],icon:"letter-m-white",release:"1.0.0"},{name:"Letter 'N' (Black)",tags:["letter"],icon:"letter-n-black",release:"1.0.0"},{name:"Letter 'N' (White)",tags:["letter"],icon:"letter-n-white",release:"1.0.0"},{name:"Letter 'O' (Black)",tags:["letter"],icon:"letter-o-black",release:"1.0.0"},{name:"Letter 'O' (White)",tags:["letter"],icon:"letter-o-white",release:"1.0.0"},{name:"Letter 'P' (Black)",tags:["letter"],icon:"letter-p-black",release:"1.0.0"},{name:"Letter 'P' (White)",tags:["letter"],icon:"letter-p-white",release:"1.0.0"},{name:"Letter 'Q' (Black)",tags:["letter"],icon:"letter-q-black",release:"1.0.0"},{name:"Letter 'Q' (White)",tags:["letter"],icon:"letter-q-white",release:"1.0.0"},{name:"Letter 'R' (Black)",tags:["letter"],icon:"letter-r-black",release:"1.0.0"},{name:"Letter 'R' (White)",tags:["letter"],icon:"letter-r-white",release:"1.0.0"},{name:"Letter 'S' (Black)",tags:["letter"],icon:"letter-s-black",release:"1.0.0"},{name:"Letter 'S' (White)",tags:["letter"],icon:"letter-s-white",release:"1.0.0"},{name:"Letter 'T' (Black)",tags:["letter"],icon:"letter-t-black",release:"1.0.0"},{name:"Letter 'T' (White)",tags:["letter"],icon:"letter-t-white",release:"1.0.0"},{name:"Letter 'U' (Black)",tags:["letter"],icon:"letter-u-black",release:"1.0.0"},{name:"Letter 'U' (White)",tags:["letter"],icon:"letter-u-white",release:"1.0.0"},{name:"Letter 'V' (Black)",tags:["letter"],icon:"letter-v-black",release:"1.0.0"},{name:"Letter 'V' (White)",tags:["letter"],icon:"letter-v-white",release:"1.0.0"},{name:"Letter 'W' (Black)",tags:["letter"],icon:"letter-w-black",release:"1.0.0"},{name:"Letter 'W' (White)",tags:["letter"],icon:"letter-w-white",release:"1.0.0"},{name:"Letter 'X' (Black)",tags:["letter"],icon:"letter-x-black",release:"1.0.0"},{name:"Letter 'X' (White)",tags:["letter"],icon:"letter-x-white",release:"1.0.0"},{name:"Letter 'Y' (Black)",tags:["letter"],icon:"letter-y-black",release:"1.0.0"},{name:"Letter 'Y' (White)",tags:["letter"],icon:"letter-y-white",release:"1.0.0"},{name:"Letter 'Z' (Black)",tags:["letter"],icon:"letter-z-black",release:"1.0.0"},{name:"Letter 'Z' (White)",tags:["letter"],icon:"letter-z-white",release:"1.0.0"},{name:"Number '0' (Black)",tags:["number"],icon:"number-0-black",release:"1.0.0"},{name:"Number '0' (White)",tags:["number"],icon:"number-0-white",release:"1.0.0"},{name:"Number '1' (Black)",tags:["number"],icon:"number-1-black",release:"1.0.0"},{name:"Number '1' (White)",tags:["number"],icon:"number-1-white",release:"1.0.0"},{name:"Number '2' (Black)",tags:["number"],icon:"number-2-black",release:"1.0.0"},{name:"Number '2' (White)",tags:["number"],icon:"number-2-white",release:"1.0.0"},{name:"Number '3' (Black)",tags:["number"],icon:"number-3-black",release:"1.0.0"},{name:"Number '3' (White)",tags:["number"],icon:"number-3-white",release:"1.0.0"},{name:"Number '4' (Black)",tags:["number"],icon:"number-4-black",release:"1.0.0"},{name:"Number '4' (White)",tags:["number"],icon:"number-4-white",release:"1.0.0"},{name:"Number '5' (Black)",tags:["number"],icon:"number-5-black",release:"1.0.0"},{name:"Number '5' (White)",tags:["number"],icon:"number-5-white",release:"1.0.0"},{name:"Number '6' (Black)",tags:["number"],icon:"number-6-black",release:"1.0.0"},{name:"Number '6' (White)",tags:["number"],icon:"number-6-white",release:"1.0.0"},{name:"Number '7' (Black)",tags:["number"],icon:"number-7-black",release:"1.0.0"},{name:"Number '7' (White)",tags:["number"],icon:"number-7-white",release:"1.0.0"},{name:"Number '8' (Black)",tags:["number"],icon:"number-8-black",release:"1.0.0"},{name:"Number '8' (White)",tags:["number"],icon:"number-8-white",release:"1.0.0"},{name:"Number '9' (Black)",tags:["number"],icon:"number-9-black",release:"1.0.0"},{name:"Number '9' (White)",tags:["number"],icon:"number-9-white",release:"1.0.0"}]},{}],51:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a){"string"!=typeof a&&(a+="");var b,c=0,d=-1,e=!0;for(b=a.length-1;b>=0;--b)if(47===a.charCodeAt(b)){if(!e){c=b+1;break}}else d===-1&&(e=!1,d=b+1);return d===-1?"":a.slice(c,d)}function e(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}c.resolve=function(){for(var c="",d=!1,f=arguments.length-1;f>=-1&&!d;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,d="/"===g.charAt(0))}return c=b(e(c.split("/"),function(a){return!!a}),!d).join("/"),(d?"/":"")+c||"."},c.normalize=function(a){var d=c.isAbsolute(a),g="/"===f(a,-1);return a=b(e(a.split("/"),function(a){return!!a}),!d).join("/"),a||d||(a="."),a&&g&&(a+="/"),(d?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(e(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){if("string"!=typeof a&&(a+=""),0===a.length)return".";for(var b=a.charCodeAt(0),c=47===b,d=-1,e=!0,f=a.length-1;f>=1;--f)if(b=a.charCodeAt(f),47===b){if(!e){d=f;break}}else e=!1;return d===-1?c?"/":".":c&&1===d?"/":a.slice(0,d)},c.basename=function(a,b){var c=d(a);return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){"string"!=typeof a&&(a+="");for(var b=-1,c=0,d=-1,e=!0,f=0,g=a.length-1;g>=0;--g){var h=a.charCodeAt(g);if(47!==h)d===-1&&(e=!1,d=g+1),46===h?b===-1?b=g:1!==f&&(f=1):b!==-1&&(f=-1);else if(!e){c=g+1;break}}return b===-1||d===-1||0===f||1===f&&b===d-1&&b===c+1?"":a.slice(b,d)};var f="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:52}],52:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],53:[function(require,module,exports){!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function succeed(a){var b=protocolRe.exec(a.url);return b=b&&b[1]||context.location.protocol,httpsRe.test(b)?twoHundo.test(a.request.status):!!a.request.response}function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):a._timedOut?c(a.request,"Request is aborted: timeout"):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,succeed(a)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"];var e="undefined"!=typeof FormData&&b.data instanceof FormData;b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||e||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),context[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"==typeof j.onreadystatechange||l||(j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return!(j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k)&&(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async!==!1),setHeaders(c,d),setCredentials(c,d),context[xDomainRequest]&&c instanceof context[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){if(null!==a)return a.match("json")?"json":a.match("javascript")?"js":a.match("text")?"html":a.match("xml")?"xml":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(a){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(a){return error(resp,"Could not parse JSON in response",a)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(a){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=context[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},catch:function(a){return this.fail(a)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest})},{xhr2:7}],54:[function(a,b,c){c.SourceMapGenerator=a("./source-map/source-map-generator").SourceMapGenerator,c.SourceMapConsumer=a("./source-map/source-map-consumer").SourceMapConsumer,c.SourceNode=a("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":61,"./source-map/source-map-generator":62,"./source-map/source-node":63}],55:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(){this._array=[],this._set={}}var e=a("./util");d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;e<f;e++)c.add(a[e],b);return c},d.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(a,b){var c=this.has(a),d=this._array.length;c&&!b||this._array.push(a),c||(this._set[e.toSetString(a)]=d)},d.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this._set,e.toSetString(a))},d.prototype.indexOf=function(a){if(this.has(a))return this._set[e.toSetString(a)];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},b.ArraySet=d})},{"./util":64,amdefine:6}],56:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){return a<0?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("./base64"),g=5,h=1<<g,i=h-1,j=h;b.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},b.decode=function(a,b,c){var d,h,k=a.length,l=0,m=0;do{if(b>=k)throw new Error("Expected more digits in base 64 VLQ value.");if(h=f.decode(a.charCodeAt(b++)),h===-1)throw new Error("Invalid base64 digit: "+a.charAt(b-1));d=!!(h&j),h&=i,l+=h<<m,m+=g}while(d);c.value=e(l),c.rest=b}})},{"./base64":57,amdefine:6}],57:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");b.encode=function(a){if(0<=a&&a<d.length)return d[a];throw new TypeError("Must be between 0 and 63: "+aNumber)},b.decode=function(a){var b=65,c=90,d=97,e=122,f=48,g=57,h=43,i=47,j=26,k=52;return b<=a&&a<=c?a-b:d<=a&&a<=e?a-d+j:f<=a&&a<=g?a-f+k:a==h?62:a==i?63:-1}})},{amdefine:6}],58:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,c,e,f,g,h){var i=Math.floor((c-a)/2)+a,j=g(e,f[i],!0);return 0===j?i:j>0?c-i>1?d(i,c,e,f,g,h):h==b.LEAST_UPPER_BOUND?c<f.length?c:-1:i:i-a>1?d(a,i,e,f,g,h):h==b.LEAST_UPPER_BOUND?i:a<0?-1:a}b.GREATEST_LOWER_BOUND=1,b.LEAST_UPPER_BOUND=2,b.search=function(a,c,e,f){if(0===c.length)return-1;var g=d(-1,c.length,a,c,e,f||b.GREATEST_LOWER_BOUND);if(g<0)return-1;for(;g-1>=0&&0===e(c[g],c[g-1],!0);)--g;return g}})},{amdefine:6}],59:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b){var c=a.generatedLine,d=b.generatedLine,e=a.generatedColumn,g=b.generatedColumn;return d>c||d==c&&g>=e||f.compareByGeneratedPositionsInflated(a,b)<=0}function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0
}}var f=a("./util");e.prototype.unsortedForEach=function(a,b){this._array.forEach(a,b)},e.prototype.add=function(a){d(this._last,a)?(this._last=a,this._array.push(a)):(this._sorted=!1,this._array.push(a))},e.prototype.toArray=function(){return this._sorted||(this._array.sort(f.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},b.MappingList=e})},{"./util":64,amdefine:6}],60:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function e(a,b){return Math.round(a+Math.random()*(b-a))}function f(a,b,c,g){if(c<g){var h=e(c,g),i=c-1;d(a,h,g);for(var j=a[g],k=c;k<g;k++)b(a[k],j)<=0&&(i+=1,d(a,i,k));d(a,i+1,k);var l=i+1;f(a,b,c,l-1),f(a,b,l+1,g)}}b.quickSort=function(a,b){f(a,b,0,a.length-1)}})},{amdefine:6}],61:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){var b=a;return"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,""))),null!=b.sections?new g(b):new e(b)}function e(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),d=h.getArg(b,"sources"),e=h.getArg(b,"names",[]),f=h.getArg(b,"sourceRoot",null),g=h.getArg(b,"sourcesContent",null),i=h.getArg(b,"mappings"),k=h.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);d=d.map(h.normalize),this._names=j.fromArray(e,!0),this._sources=j.fromArray(d,!0),this.sourceRoot=f,this.sourcesContent=g,this._mappings=i,this.file=k}function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function g(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),e=h.getArg(b,"sections");if(c!=this._version)throw new Error("Unsupported version: "+c);this._sources=new j,this._names=new j;var f={line:-1,column:0};this._sections=e.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var b=h.getArg(a,"offset"),c=h.getArg(b,"line"),e=h.getArg(b,"column");if(c<f.line||c===f.line&&e<f.column)throw new Error("Section offsets must be ordered and non-overlapping.");return f=b,{generatedOffset:{generatedLine:c+1,generatedColumn:e+1},consumer:new d(h.getArg(a,"map"))}})}var h=a("./util"),i=a("./binary-search"),j=a("./array-set").ArraySet,k=a("./base64-vlq"),l=a("./quick-sort").quickSort;d.fromSourceMap=function(a){return e.fromSourceMap(a)},d.prototype._version=3,d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),d.prototype._charIsMappingSeparator=function(a,b){var c=a.charAt(b);return";"===c||","===c},d.prototype._parseMappings=function(a,b){throw new Error("Subclasses must implement _parseMappings")},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.prototype.eachMapping=function(a,b,c){var e,f=b||null,g=c||d.GENERATED_ORDER;switch(g){case d.GENERATED_ORDER:e=this._generatedMappings;break;case d.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;e.map(function(a){var b=null===a.source?null:this._sources.at(a.source);return null!=b&&null!=i&&(b=h.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:null===a.name?null:this._names.at(a.name)}},this).forEach(a,f)},d.prototype.allGeneratedPositionsFor=function(a){var b=h.getArg(a,"line"),c={source:h.getArg(a,"source"),originalLine:b,originalColumn:h.getArg(a,"column",0)};if(null!=this.sourceRoot&&(c.source=h.relative(this.sourceRoot,c.source)),!this._sources.has(c.source))return[];c.source=this._sources.indexOf(c.source);var d=[],e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(e>=0){var f=this._originalMappings[e];if(void 0===a.column)for(var g=f.originalLine;f&&f.originalLine===g;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e];else for(var j=f.originalColumn;f&&f.originalLine===b&&f.originalColumn==j;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e]}return d},b.SourceMapConsumer=d,e.prototype=Object.create(d.prototype),e.prototype.consumer=d,e.fromSourceMap=function(a){var b=Object.create(e.prototype),c=b._names=j.fromArray(a._names.toArray(),!0),d=b._sources=j.fromArray(a._sources.toArray(),!0);b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file;for(var g=a._mappings.toArray().slice(),i=b.__generatedMappings=[],k=b.__originalMappings=[],m=0,n=g.length;m<n;m++){var o=g[m],p=new f;p.generatedLine=o.generatedLine,p.generatedColumn=o.generatedColumn,o.source&&(p.source=d.indexOf(o.source),p.originalLine=o.originalLine,p.originalColumn=o.originalColumn,o.name&&(p.name=c.indexOf(o.name)),k.push(p)),i.push(p)}return l(b.__originalMappings,h.compareByOriginalPositions),b},e.prototype._version=3,Object.defineProperty(e.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?h.join(this.sourceRoot,a):a},this)}}),e.prototype._parseMappings=function(a,b){for(var c,d,e,g,i,j=1,m=0,n=0,o=0,p=0,q=0,r=a.length,s=0,t={},u={},v=[],w=[];s<r;)if(";"===a.charAt(s))j++,s++,m=0;else if(","===a.charAt(s))s++;else{for(c=new f,c.generatedLine=j,g=s;g<r&&!this._charIsMappingSeparator(a,g);g++);if(d=a.slice(s,g),e=t[d])s+=d.length;else{for(e=[];s<g;)k.decode(a,s,u),i=u.value,s=u.rest,e.push(i);if(2===e.length)throw new Error("Found a source, but no line and column");if(3===e.length)throw new Error("Found a source and line, but no column");t[d]=e}c.generatedColumn=m+e[0],m=c.generatedColumn,e.length>1&&(c.source=p+e[1],p+=e[1],c.originalLine=n+e[2],n=c.originalLine,c.originalLine+=1,c.originalColumn=o+e[3],o=c.originalColumn,e.length>4&&(c.name=q+e[4],q+=e[4])),w.push(c),"number"==typeof c.originalLine&&v.push(c)}l(w,h.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,l(v,h.compareByOriginalPositions),this.__originalMappings=v},e.prototype._findMapping=function(a,b,c,d,e,f){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return i.search(a,b,e,f)},e.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},e.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",h.compareByGeneratedPositionsDeflated,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(c>=0){var e=this._generatedMappings[c];if(e.generatedLine===b.generatedLine){var f=h.getArg(e,"source",null);null!==f&&(f=this._sources.at(f),null!=this.sourceRoot&&(f=h.join(this.sourceRoot,f)));var g=h.getArg(e,"name",null);return null!==g&&(g=this._names.at(g)),{source:f,line:h.getArg(e,"originalLine",null),column:h.getArg(e,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},e.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(a){return null==a}))},e.prototype.sourceContentFor=function(a,b){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=h.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var c;if(null!=this.sourceRoot&&(c=h.urlParse(this.sourceRoot))){var d=a.replace(/^file:\/\//,"");if("file"==c.scheme&&this._sources.has(d))return this.sourcesContent[this._sources.indexOf(d)];if((!c.path||"/"==c.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},e.prototype.generatedPositionFor=function(a){var b=h.getArg(a,"source");if(null!=this.sourceRoot&&(b=h.relative(this.sourceRoot,b)),!this._sources.has(b))return{line:null,column:null,lastColumn:null};b=this._sources.indexOf(b);var c={source:b,originalLine:h.getArg(a,"line"),originalColumn:h.getArg(a,"column")},e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(e>=0){var f=this._originalMappings[e];if(f.source===c.source)return{line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},b.BasicSourceMapConsumer=e,g.prototype=Object.create(d.prototype),g.prototype.constructor=d,g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){for(var a=[],b=0;b<this._sections.length;b++)for(var c=0;c<this._sections[b].consumer.sources.length;c++)a.push(this._sections[b].consumer.sources[c]);return a}}),g.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=i.search(b,this._sections,function(a,b){var c=a.generatedLine-b.generatedOffset.generatedLine;return c?c:a.generatedColumn-b.generatedOffset.generatedColumn}),d=this._sections[c];return d?d.consumer.originalPositionFor({line:b.generatedLine-(d.generatedOffset.generatedLine-1),column:b.generatedColumn-(d.generatedOffset.generatedLine===b.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})},g.prototype.sourceContentFor=function(a,b){for(var c=0;c<this._sections.length;c++){var d=this._sections[c],e=d.consumer.sourceContentFor(a,!0);if(e)return e}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(a){for(var b=0;b<this._sections.length;b++){var c=this._sections[b];if(c.consumer.sources.indexOf(h.getArg(a,"source"))!==-1){var d=c.consumer.generatedPositionFor(a);if(d){var e={line:d.line+(c.generatedOffset.generatedLine-1),column:d.column+(c.generatedOffset.generatedLine===d.line?c.generatedOffset.generatedColumn-1:0)};return e}}}return{line:null,column:null}},g.prototype._parseMappings=function(a,b){this.__generatedMappings=[],this.__originalMappings=[];for(var c=0;c<this._sections.length;c++)for(var d=this._sections[c],e=d.consumer._generatedMappings,f=0;f<e.length;f++){var g=e[c],i=d.consumer._sources.at(g.source);null!==d.consumer.sourceRoot&&(i=h.join(d.consumer.sourceRoot,i)),this._sources.add(i),i=this._sources.indexOf(i);var j=d.consumer._names.at(g.name);this._names.add(j),j=this._names.indexOf(j);var k={source:i,generatedLine:g.generatedLine+(d.generatedOffset.generatedLine-1),generatedColumn:g.column+(d.generatedOffset.generatedLine===g.generatedLine)?d.generatedOffset.generatedColumn-1:0,originalLine:g.originalLine,originalColumn:g.originalColumn,name:j};this.__generatedMappings.push(k),"number"==typeof k.originalLine&&this.__originalMappings.push(k)}l(this.__generatedMappings,h.compareByGeneratedPositionsDeflated),l(this.__originalMappings,h.compareByOriginalPositions)},b.IndexedSourceMapConsumer=g})},{"./array-set":55,"./base64-vlq":56,"./binary-search":58,"./quick-sort":60,"./util":64,amdefine:6}],62:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._skipValidation=f.getArg(a,"skipValidation",!1),this._sources=new g,this._names=new g,this._mappings=new h,this._sourcesContents=null}var e=a("./base64-vlq"),f=a("./util"),g=a("./array-set").ArraySet,h=a("./mapping-list").MappingList;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._skipValidation||this._validateMapping(b,c,d,e),null==d||this._sources.has(d)||this._sources.add(d),null==e||this._names.has(e)||this._names.add(e),this._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.unsortedForEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null==j||h.has(j)||h.add(j);var k=b.name;null==k||i.has(k)||i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if((!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0)||b||c||d)&&!(a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){for(var a,b=0,c=1,d=0,g=0,h=0,i=0,j="",k=this._mappings.toArray(),l=0,m=k.length;l<m;l++){if(a=k[l],a.generatedLine!==c)for(b=0;a.generatedLine!==c;)j+=";",c++;else if(l>0){if(!f.compareByGeneratedPositionsInflated(a,k[l-1]))continue;j+=","}j+=e.encode(a.generatedColumn-b),b=a.generatedColumn,null!=a.source&&(j+=e.encode(this._sources.indexOf(a.source)-i),i=this._sources.indexOf(a.source),j+=e.encode(a.originalLine-1-g),g=a.originalLine-1,j+=e.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(j+=e.encode(this._names.indexOf(a.name)-h),h=this._names.indexOf(a.name)))}return j},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this.toJSON())},b.SourceMapGenerator=d})},{"./array-set":55,"./base64-vlq":56,"./mapping-list":59,"./util":64,amdefine:6}],63:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("./source-map-generator").SourceMapGenerator,f=a("./util"),g=/(\r?\n)/,h=10,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),void(m=a)}var c="";e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;c<d;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;c<d-1;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;b<c;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;b<c;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,g=null,i=null,j=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?(f===e.source&&g===e.line&&i===e.column&&j===e.name||c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,g=e.line,i=e.column,j=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1);for(var k=0,l=a.length;k<l;k++)a.charCodeAt(k)===h?(b.line++,b.column=0,k+1===l?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column++}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},b.SourceNode=d})},{"./source-map-generator":62,"./util":64,amdefine:6}],64:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(p);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,c=e(a);if(c){if(!c.path)return a;b=c.path}for(var d,g="/"===b.charAt(0),h=b.split(/\/+/),i=0,j=h.length-1;j>=0;j--)d=h[j],"."===d?h.splice(j,1):".."===d?i++:i>0&&(""===d?(h.splice(j+1,i),i=0):(h.splice(j,2),i--));return b=h.join("/"),""===b&&(b=g?"/":"."),c?(c.path=b,f(c)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(q))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");for(var c=0;0!==b.indexOf(a+"/");){var d=a.lastIndexOf("/");if(d<0)return b;if(a=a.slice(0,d),a.match(/^([^\/]+:\/)?\/*$/))return b;++c}return Array(c+1).join("../")+b.substr(a.length+1)}function j(a){return"$"+a}function k(a){return a.substr(1)}function l(a,b,c){var d=a.source-b.source;return 0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d||c?d:(d=a.generatedColumn-b.generatedColumn,0!==d?d:(d=a.generatedLine-b.generatedLine,0!==d?d:a.name-b.name))))}function m(a,b,c){var d=a.generatedLine-b.generatedLine;return 0!==d?d:(d=a.generatedColumn-b.generatedColumn,0!==d||c?d:(d=a.source-b.source,0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d?d:a.name-b.name))))}function n(a,b){return a===b?0:a>b?1:-1}function o(a,b){var c=a.generatedLine-b.generatedLine;return 0!==c?c:(c=a.generatedColumn-b.generatedColumn,0!==c?c:(c=n(a.source,b.source),0!==c?c:(c=a.originalLine-b.originalLine,0!==c?c:(c=a.originalColumn-b.originalColumn,0!==c?c:n(a.name,b.name)))))}b.getArg=d;var p=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,q=/^data:.+\,.+$/;b.urlParse=e,b.urlGenerate=f,b.normalize=g,b.join=h,b.relative=i,b.toSetString=j,b.fromSetString=k,b.compareByOriginalPositions=l,b.compareByGeneratedPositionsDeflated=m,b.compareByGeneratedPositionsInflated=o})},{amdefine:6}],65:[function(a,b,c){var d=a("./package.json").version;window.L.Icon.Default.imagePath="https://www.nps.gov/lib/npmap.js/"+d+"/images",L.npmap=b.exports={VERSION:d,control:{geocoder:a("./src/control/geocoder"),download:a("./src/control/download"),home:a("./src/control/home"),smallzoom:a("./src/control/smallzoom"),locate:a("./src/control/locate"),measure:a("./src/control/measure"),edit:a("./src/control/edit"),fullscreen:a("./src/control/fullscreen"),hash:a("./src/control/hash"),infobox:a("./src/control/infobox"),legend:a("./src/control/legend"),overview:a("./src/control/overview"),print:a("./src/control/print"),scale:a("./src/control/scale"),share:a("./src/control/share"),switcher:a("./src/control/switcher"),zoomdisplay:a("./src/control/zoomdisplay")},icon:{maki:a("./src/icon/maki"),npmapsymbollibrary:a("./src/icon/npmapsymbollibrary")},layer:{_cluster:a("./src/layer/cluster"),arcgisserver:{dynamic:a("./src/layer/arcgisserver/dynamic"),tiled:a("./src/layer/arcgisserver/tiled")},bing:a("./src/layer/bing"),cartodb:a("./src/layer/cartodb"),csv:a("./src/layer/csv"),geojson:a("./src/layer/geojson"),github:a("./src/layer/github"),kml:a("./src/layer/kml"),mapbox:a("./src/layer/mapbox"),spot:a("./src/layer/spot"),tiled:a("./src/layer/tiled"),wms:a("./src/layer/wms"),zoomify:a("./src/layer/zoomify")},map:a("./src/map"),module:{directions:a("./src/module/directions")},popup:a("./src/popup"),preset:{baselayers:a("./src/preset/baselayers.json"),colors:a("./src/preset/colors.json"),maki:a("./extras/maki.json"),npmapsymbollibrary:a("./node_modules/npmap-symbol-library/www/npmap-builder/npmap-symbol-library.json"),overlays:a("./src/preset/overlays.json"),places:{pois:a("./src/preset/places/pois")}},tooltip:a("./src/tooltip"),util:{_:a("./src/util/util"),geocode:a("./src/util/geocode"),route:a("./src/util/route"),topojson:a("./src/util/topojson")}}},{"./extras/maki.json":1,"./node_modules/npmap-symbol-library/www/npmap-builder/npmap-symbol-library.json":50,"./package.json":66,"./src/control/download":67,"./src/control/edit":68,"./src/control/fullscreen":69,"./src/control/geocoder":70,"./src/control/hash":71,"./src/control/home":72,"./src/control/infobox":73,"./src/control/legend":74,"./src/control/locate":75,"./src/control/measure":76,"./src/control/overview":77,"./src/control/print":78,"./src/control/scale":79,"./src/control/share":80,"./src/control/smallzoom":81,"./src/control/switcher":82,"./src/control/zoomdisplay":83,"./src/icon/maki":84,"./src/icon/npmapsymbollibrary":85,"./src/layer/arcgisserver/dynamic":86,"./src/layer/arcgisserver/tiled":87,"./src/layer/bing":88,"./src/layer/cartodb":89,"./src/layer/cluster":90,"./src/layer/csv":91,"./src/layer/geojson":92,"./src/layer/github":93,"./src/layer/kml":94,"./src/layer/mapbox":95,"./src/layer/spot":96,"./src/layer/tiled":97,"./src/layer/wms":98,"./src/layer/zoomify":99,"./src/map":100,"./src/module/directions":105,"./src/popup":106,"./src/preset/baselayers.json":107,"./src/preset/colors.json":108,"./src/preset/overlays.json":109,"./src/preset/places/pois":110,"./src/tooltip":111,"./src/util/geocode":112,"./src/util/route":114,"./src/util/topojson":116,"./src/util/util":117}],66:[function(a,b,c){b.exports={bugs:{email:"npmap@nps.gov",url:"https://github.com/nationalparkservice/npmap.js/issues"},dependencies:{"@mapbox/maki":"~3.0.0","@mapbox/sexagesimal":"~1.0.0","@mapbox/togeojson":"~0.16.0",csv2geojson:"5.0.2",handlebars:"4.0.11","helper-dateformat":"https://github.com/nationalparkservice/helper-dateformat/archive/v0.2.1.tar.gz","humane-js":"https://github.com/nationalparkservice/humane-js/archive/3.2.2.tar.gz",leaflet:"1.0.3","leaflet-draw":"0.4.9","leaflet-easyprint":"git+https://github.com/jimmyrocks/leaflet-easyPrint#gh-pages","leaflet.markercluster":"~1.0.0",nanobar:"0.4.2","npmap-symbol-library":"https://github.com/nationalparkservice/npmap-symbol-library/archive/v2.3.0.tar.gz",reqwest:"2.0.5"},description:"A JavaScript web mapping library for the National Park Service, built as a Leaflet plugin.",devDependencies:{brfs:"1.4.3",browserify:"^13.0.0","expect.js":"^0.3.1",grunt:"~0.4.0","grunt-akamai-rest-purge":"^0.1.1","grunt-banner":"0.6.0","grunt-browserify":"5.0.0","grunt-contrib-clean":"1.0.0","grunt-contrib-compress":"1.3.0","grunt-contrib-concat":"1.0.1","grunt-contrib-copy":"1.0.0","grunt-contrib-csslint":"2.0.0","grunt-contrib-cssmin":"1.0.2","grunt-contrib-handlebars":"1.0.0","grunt-contrib-uglify":"2.0.0","grunt-curl":"2.2.0","grunt-http":"2.0.1","grunt-md2html":"^0.3.0","grunt-mkdir":"1.0.0","grunt-mocha-phantomjs":"^3.0.0","grunt-semistandard":"^1.0.4","grunt-string-replace":"^1.2.1",happen:"0.3.1",mocha:"^3.0.0","mocha-phantomjs":"^4.0.1","phantomjs-prebuilt":"~2.1.12",sinon:"1.17.5","uglify-js":"2.7.3",xhr2:"^0.1.2"},scripts:{test:"grunt test"},engines:{node:"*"},homepage:"https://www.nps.gov/maps/tools/npmap.js/",keywords:["Cartography","Department of Interior","Digital","JavaScript","Leaflet","Map","National Park Service","NPMap","NPMap.js","NPMap Symbol Library","NPS Places","Park Tiles","US Government","Web Map"],licenses:[{type:"MIT",url:"https://github.com/nationalparkservice/npmap.js/blob/master/LICENSE.md"}],main:"main.js",name:"npmap.js",repository:{type:"git",url:"https://github.com/nationalparkservice/npmap.js.git"},version:"4.0.1"}},{}],67:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Control.extend({initialize:function(){return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","download",this._li),this._button.setAttribute("alt","Download data"),L.DomEvent.addListener(this._button,"click",this.download,this),this},addTo:function(a){var b=d.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._map=a,d.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="28px",this},download:function(a){L.DomEvent.preventDefault(a),window.alert("The download tool has not yet been implemented.")}});L.Map.mergeOptions({downloadControl:!1}),L.Map.addInitHook(function(){if(this.options.downloadControl){var a={};"object"==typeof this.options.downloadControl&&(a=this.options.downloadControl),this.downloadControl=L.npmap.control.download(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../util/util":117}],68:[function(a,b,c){"use strict";a("leaflet-draw"),a("../icon/maki"),a("../icon/npmapsymbollibrary");var d=L.Control.extend({includes:L.Mixin.Events,options:{circle:{shapeOptions:{color:"#d46655",fillOpacity:.4,opacity:1,weight:4}},layer:void 0,marker:{icon:{"marker-color":"#d46655","marker-library":"maki","marker-size":"medium"}},polygon:{shapeOptions:{color:"#d46655",fillOpacity:.4,opacity:1,weight:4}},polyline:{shapeOptions:{color:"#d46655",opacity:1,weight:4}},position:"topleft",rectangle:{shapeOptions:{color:"#d46655",fillOpacity:.4,opacity:1,weight:4}},toolbar:!0},initialize:function(a){return L.Util.setOptions(this,a),this._activeMode=null,this._featureGroup=a&&a.layer?a.layer:new L.FeatureGroup,this._modes={},this},onAdd:function(a){var b,c,d=L.DomUtil.create("div","leaflet-control-edit leaflet-bar"),e=this,f=this.options;return f.marker&&(f.marker.icon&&f.marker.icon["marker-library"]&&(f.marker.icon=L.npmap.icon[f.marker.icon["marker-library"]](f.marker.icon)),this._initializeMode(d,new L.Draw.Marker(a,f.marker),"Draw a marker")),f.polyline&&this._initializeMode(d,new L.Draw.Polyline(a,f.polyline),"Draw a line"),f.polygon&&this._initializeMode(d,new L.Draw.Polygon(a,f.polygon),"Draw a polygon"),f.rectangle&&this._initializeMode(d,new L.Draw.Rectangle(a,f.rectangle),"Draw a rectangle"),f.circle&&this._initializeMode(d,new L.Draw.Circle(a,f.circle),"Draw a circle"),this._map=a,this._featureGroup.on("click",function(a){var d,e=a.layer.editing;e?e._marker||(d=e._poly?e._poly._leaflet_id:e._shape._leaflet_id,b===d?(e.disable(),b=null,c=null):(c&&c.editing.disable(),e.enable(),b=d,c=a.layer)):c&&(c.editing.disable(),b=null,c=null)}),a.addLayer(this._featureGroup).on("click",function(){c&&(c.editing.disable(),b=null,c=null)}).on("draw:created",function(a){e._activeMode&&(e._featureGroup.addLayer(a.layer),"marker"===a.layerType&&(a.layer.dragging.enable(),a.layer.on("dragstart",function(){c&&(c.editing.disable(),b=null,c=null)})))}).on("draw:drawstart",function(){c&&(c.editing.disable(),b=null,c=null)}),d},_handlerActivated:function(a){var b=this._map;"map"!==b._controllingInteractivity&&b[b._controllingInteractivity+"Control"].deactivate(),this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[a.handler],this._activeMode.button&&L.DomUtil.addClass(this._activeMode.button,"pressed"),b._controllingInteractivity="edit",this.fire("activated"),b.closePopup()},_handlerDeactivated:function(){this._activeMode.button&&L.DomUtil.removeClass(this._activeMode.button,"pressed"),this._activeMode=null,this._map._controllingInteractivity="map",this.fire("deactivated")},_initializeMode:function(a,b,c){var d=null,e=this,f=b.type;this._modes[f]={},this._modes[f].handler=b,
this.options.toolbar&&(d=L.DomUtil.create("button",f,a),d.setAttribute("alt",c),L.DomEvent.disableClickPropagation(d).on(d,"click",function(){e._activeMode&&e._activeMode.handler.type===f?e._modes[f].handler.disable():e._modes[f].handler.enable()},this._modes[f].handler)),this._modes[f].button=d,this._modes[f].handler.on("disabled",this._handlerDeactivated,this).on("enabled",this._handlerActivated,this)},activateMode:function(a){this._modes[a].handler.enable()},clearShapes:function(){this._featureGroup.clearLayers()},deactivate:function(){this.deactivateMode(this._activeMode.handler.type)},deactivateMode:function(a){this._modes[a].handler.disable()}});L.Map.mergeOptions({editControl:!1}),L.Map.addInitHook(function(){if(this.options.editControl){var a={};"object"==typeof this.options.editControl&&(a=this.options.editControl),this.editControl=L.npmap.control.edit(a).addTo(this)}else{var b=!1,c=this.options.overlays;if(c&&L.Util.isArray(c))for(var d=0;d<c.length;d++)if(c[d].edit){b=!0;break}b&&(this.editControl=L.npmap.control.edit({toolbar:!1}).addTo(this))}}),b.exports=function(a){return new d(a)}},{"../icon/maki":84,"../icon/npmapsymbollibrary":85,"leaflet-draw":45}],69:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Control.extend({initialize:function(a){if(this._frame=null,this._supported=!0,window.self!==window.top&&""!==document.referrer)try{this._frame=window.frameElement,this._frame&&(this._frameBody=this._getParentDocumentBody(this._frame))}catch(a){this._supported=!1}return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","fullscreen enter",this._li),this._button.setAttribute("alt","Enter fullscreen"),L.DomEvent.addListener(this._button,"click",this.fullscreen,this),this},_onKeyUp:function(a){a||(a=window.event),this._isFullscreen===!0&&27===a.keyCode&&this.fullscreen()},addTo:function(a){var b=d.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._isFullscreen=!1,this._map=a,d.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="28px",this},_getParentDocumentBody:function(a){for(;a.parentNode;)if(a=a.parentNode,"body"===a.tagName.toLowerCase())return a;return null},fullscreen:function(a){if(L.DomEvent.preventDefault(a),this._supported){var b,c=document.body;this._isFullscreen?(this._frame&&(this._frameBody.style.height=this._frameBodyHeight,this._frameBody.style.margin=this._frameBodyMargin,this._frameBody.style.overflow=this._frameBodyOverflow,this._frameBody.style.padding=this._frameBodyPadding,this._frameBody.style.width=this._frameBodyWidth,this._frame.height=this._frameHeight,this._frame.style.height=this._frameHeightStyle,this._frame.style.left=this._frameLeft,this._frame.style.margin=this._frameMargin,this._frame.style.padding=this._framePadding,this._frame.style.position=this._framePosition,this._frame.style.top=this._frameTop,this._frame.style.width=this._frameWidthStyle,this._frame.style.zIndex=this._frameZindex,this._frame.width=this._frameWidth),c.style.margin=this._bodyMargin,c.style.overflow=this._bodyOverflow,c.style.padding=this._bodyPadding,this._container.style.left=this._containerLeft,this._container.style.position=this._containerPosition,this._container.style.top=this._containerTop,L.DomEvent.removeListener(document,"keyup",this._onKeyUp),this._isFullscreen=!1,L.DomUtil.removeClass(this._button,"exit"),L.DomUtil.addClass(this._button,"enter"),this._button.setAttribute("alt","Enter fullscreen"),this._map.fire("exitfullscreen"),this._frame&&window.postMessage&&(window.parent.postMessage("exitfullscreen","*"),this._frameBody&&(b=window.parent.NPMapUtils,b&&b.fullscreenControl&&b.fullscreenControl.listeners&&"function"==typeof b.fullscreenControl.listeners.exitfullscreen&&b.fullscreenControl.listeners.exitfullscreen()))):(this._frame&&(this._frameBodyHeight=this._frameBody.style.height,this._frameBodyMargin=this._frameBody.style.margin,this._frameBodyOverflow=this._frameBody.style.overflow,this._frameBodyPadding=this._frameBody.style.padding,this._frameBodyWidth=this._frameBody.style.width,this._frameBody.style.height="100%",this._frameBody.style.margin="0",this._frameBody.style.overflow="hidden",this._frameBody.style.padding="0",this._frameBody.style.width="100%",this._frameHeight=this._frame.height,this._frameHeightStyle=this._frame.style.height,this._frameLeft=this._frame.style.left,this._frameMargin=this._frame.style.margin,this._framePadding=this._frame.style.padding,this._framePosition=this._frame.style.position,this._frameTop=this._frame.style.top,this._frameWidth=this._frame.width,this._frameWidthStyle=this._frame.style.width,this._frameZindex=this._frame.style.zIndex,this._frame.height="100%",this._frame.style.height="100%",this._frame.style.left="0",this._frame.style.margin="0",this._frame.style.padding="0",this._frame.style.position="fixed",this._frame.style.top="0",this._frame.style.width="100%",this._frame.style.zIndex=9999999999,this._frame.width="100%"),this._bodyMargin=c.style.margin,this._bodyOverflow=c.style.overflow,this._bodyPadding=c.style.padding,c.style.margin="0",c.style.overflow="hidden",c.style.padding="0",this._containerLeft=this._container.style.left,this._containerPosition=this._container.style.position,this._containerTop=this._container.style.top,this._container.style.left="0",this._container.style.position="fixed",this._container.style.top="0",L.DomEvent.addListener(document,"keyup",this._onKeyUp,this),this._isFullscreen=!0,L.DomUtil.removeClass(this._button,"enter"),L.DomUtil.addClass(this._button,"exit"),this._button.setAttribute("alt","Exit fullscreen"),this._map.fire("enterfullscreen"),this._frame&&window.postMessage&&(window.parent.postMessage("enterfullscreen","*"),this._frameBody&&(b=window.parent.NPMapUtils,b&&b.fullscreenControl&&b.fullscreenControl.listeners&&"function"==typeof b.fullscreenControl.listeners.enterfullscreen&&b.fullscreenControl.listeners.enterfullscreen()))),this._map.invalidateSize()}else window.alert("Sorry, but the fullscreen tool does not work for maps that are loaded in an iframe hosted on another domain.")}});L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){if(this.options.fullscreenControl){var a={};"object"==typeof this.options.fullscreenControl&&(a=this.options.fullscreenControl),this.fullscreenControl=L.npmap.control.fullscreen(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../util/util":117}],70:[function(a,b,c){"use strict";var d=a("../util/geocode"),e=a("reqwest"),f=a("../util/util"),g=L.Control.extend({_bounds:{},_cache:{},_centroids:{},_pois:{},includes:L.Mixin.Events,options:{position:"topright",provider:"esri",searchPlaces:!1},statics:{ATTRIBUTIONS:{BING:"Geocoding by Microsoft",ESRI:"Geocoding by Esri",MAPBOX:"Geocoding by Mapbox",MAPQUEST:"Geocoding by MapQuest",MAPZEN:"Geocoding by Mapzen",NOMINATIM:["Geocoding by Nominatim","&copy; <a href='https://openstreetmap.org/copyright'>OpenStreetMap</a> contributors"]}},initialize:function(a){return L.Util.setOptions(this,a),this},onAdd:function(a){var b=g.ATTRIBUTIONS[this.options.provider.toUpperCase()],c=L.DomUtil.create("div","leaflet-control-geocoder"),d=L.DomEvent.stopPropagation;if(this._button=L.DomUtil.create("button","search",c),this._input=L.DomUtil.create("input","",c),this._ul=L.DomUtil.create("ul","leaflet-control",c),this._initalizeNpsIndex(),L.DomEvent.disableClickPropagation(this._button),L.DomEvent.disableClickPropagation(this._input),L.DomEvent.disableClickPropagation(this._ul),L.DomEvent.on(this._button,"click",this._geocodeRequest,this).on(this._button,"mousewheel",d).on(this._input,"focus",function(){this.value=this.value}).on(this._input,"mousewheel",d).on(this._ul,"mousewheel",d),this._container=c,this._button.setAttribute("alt","Search"),this._input.setAttribute("aria-activedescendant",null),this._input.setAttribute("aria-autocomplete","list"),this._input.setAttribute("aria-expanded",!1),this._input.setAttribute("aria-label","Geocode"),this._input.setAttribute("aria-owns","geocoder_listbox"),this._input.setAttribute("placeholder","Find a location"),this._input.setAttribute("role","combobox"),this._input.setAttribute("type","text"),this._ul.setAttribute("id","geocoder_listbox"),this._ul.setAttribute("role","listbox"),b)if(L.Util.isArray(b))for(var e=0;e<b.length;e++)a.attributionControl.addAttribution(b[e]);else a.attributionControl.addAttribution(b);return c},onRemove:function(a){var b=g.ATTRIBUTIONS[this.options.provider.toUpperCase()];if(b)if(L.Util.isArray(b))for(var c=0;c<b.length;c++)a.attributionControl.removeAttribution(b[c]);else a.attributionControl.removeAttribution(b)},_checkScroll:function(){if(this._selected){var a=f.getPosition(this._selected).top,b=a+f.getOuterDimensions(this._selected).height,c=this._ul.scrollTop,d=[c,c+f.getOuterDimensions(this._ul).height];a<d[0]?this._ul.scrollTop=a-10:b>d[1]&&(this._ul.scrollTop=a-10)}},_clearResults:function(){this._ul.innerHTML="",this._ul.scrollTop=0,this._ul.style.display="none",this._input.setAttribute("aria-activedescendant",null),this._input.setAttribute("aria-expanded",!1),this._selected=null,this._oldValue=""},_debounce:function(a,b){var c=null;return function(){var d=arguments,e=this;clearTimeout(c),c=setTimeout(function(){a.apply(e,d)},b)}},_geocodeRequest:function(a){var b=this._input.value;if("object"==typeof a&&L.DomEvent.preventDefault(a),b.length){var c=this;c._clearResults(),c._showLoading(),d[c.options.provider](b,function(a){if(c._hideLoading(),a&&a.success)if(a.results&&a.results.length){var b=a.results[0];b.bounds?c._map.fitBounds(b.bounds):b.latLng?c._map.setView(b.latLng,17):c._map.notify.danger("There was an error finding that location. Please try again.")}else a.message?c._map.notify.danger(a.message):c._map.notify.danger("There was an error finding that location. Please try again.");else c._map.notify.danger("There was an error finding that location. Please try again.")})}},_handleSelect:function(a){var b=a.id,c=this;if(this._clearResults(),this._isDirty=!1,this._input.focus(),this._input.setAttribute("aria-activedescendant",b),isNaN(b)===!1){var d=this._pois[parseInt(b,10)];this._input.value=this._oldValue=d.n,c._map.setView({lat:d.y,lng:d.x},17)}else this._input.value=this._oldValue=b,c._bounds[b]?c._map.fitBounds(c._bounds[b]):c._centroids[b]?c._map.setView(c._centroids[b],17):e({success:function(a){if(a&&a.total_rows){var d=a.rows[0];d.b?(c._bounds[b]=new L.GeoJSON(JSON.parse(d.b)),c._map.fitBounds(c._bounds[b])):(c._centroids[b]={lat:d.l,lng:d.n},c._map.setView(c._centroids[b],14))}else c._map.notify.danger("There was an error getting the bounds for that park.")},type:"jsonp",url:"https://carto.nps.gov/user/nps/api/v2/sql?q="+window.encodeURIComponent("SELECT ST_AsGeoJSON(ST_Extent(the_geom)) AS b,max(label_lat) AS l,max(label_lng) AS n FROM places_parks_v2 WHERE full_name='"+b.replace("'","''")+"'")})},_hideLoading:function(){L.DomEvent.on(this._button,"click",this._geocodeRequest,this),L.DomUtil.addClass(this._button,"search"),L.DomUtil.removeClass(this._button,"working")},_initalizeNpsIndex:function(){var a=this;e({success:function(b){if(b&&b.total_rows){a._oldValue=a._input.value;for(var c=0;c<b.rows.length;c++)a._bounds[b.rows[c].n]=null;L.DomEvent.on(a._input,"keydown",function(b){switch(b.keyCode){case 13:a._selected?a._handleSelect(a._selected):a._geocodeRequest();break;case 27:a._clearResults();break;case 38:"block"===a._ul.style.display&&(a._selected&&(L.DomUtil.removeClass(a._selected,"selected"),a._selected=f.getPreviousSibling(a._selected)),a._selected||(a._selected=a._ul.childNodes[a._ul.childNodes.length-1]),L.DomUtil.addClass(a._selected,"selected"),a._checkScroll()),L.DomEvent.preventDefault(b);break;case 40:"block"===a._ul.style.display&&(a._selected&&(L.DomUtil.removeClass(a._selected,"selected"),a._selected=f.getNextSibling(a._selected)),a._selected||(a._selected=a._ul.childNodes[0]),L.DomUtil.addClass(a._selected,"selected"),a._checkScroll()),L.DomEvent.preventDefault(b)}}),L.DomEvent.on(a._input,"keyup",a._debounce(function(b){var c=this.value;if(c){var d=b.keyCode;if(13!==d&&27!==d&&38!==d&&40!==d&&c!==a._oldValue&&(a._isDirty=!0,a._oldValue=c,c.length)){var f=[];for(var g in a._bounds)g.toLowerCase().indexOf(c.toLowerCase())!==-1&&f.push({d:g});if(a.options.searchPlaces===!0)if(a._cache[c]){for(var h=0;h<a._cache[c].length;h++)f.push(a._cache[c][h]);a._resultsReady(c,f)}else a._showLoading(),e({success:function(b){if(b&&b.total_rows){a._cache[c]=b.rows;for(var d=0;d<b.rows.length;d++){var e=b.rows[d],g=e.c;f.push(e),a._pois[g]||(a._pois[g]=e)}}a._resultsReady(c,f),a._hideLoading()},type:"jsonp",url:"https://carto.nps.gov/user/nps/api/v2/sql?q=SELECT cartodb_id AS c,name AS n,type AS t,st_x(the_geom) AS x,st_y(the_geom) AS y FROM points_of_interest WHERE name IS NOT NULL AND name ILIKE '%25"+c.replace(/'/g,"''")+"%25' ORDER BY name LIMIT(10)"});else a._resultsReady(c,f)}}else a._clearResults()},250))}else a._map.notify.danger("There was an error getting the bounds for that park.")},type:"jsonp",url:"https://carto.nps.gov/user/nps/api/v2/sql?q=SELECT full_name AS n FROM places_parks_v2 WHERE the_geom IS NOT NULL OR (label_lat IS NOT NULL AND label_lng IS NOT NULL) ORDER BY full_name"})},_resultsReady:function(a,b){var c=this;if(b.length>0){c._clearResults();for(var d=0;d<b.length;d++){var e,f,g=L.DomUtil.create("li",null,c._ul),h=b[d],i=h.d;i?(g.className="npmap-geocoder-result-park",g.id=i,f="park"):(i=h.n,g.className="npmap-geocoder-result-poi",g.id=h.c,f="poi"),e=i.toLowerCase().indexOf(a.toLowerCase()),g.innerHTML=i.slice(0,e)+"<strong>"+i.slice(e,e+a.length)+"</strong>"+i.slice(e+a.length)+(c.options.searchPlaces?"<br>"+("park"===f?"NPS Unit":h.t):""),L.DomEvent.on(g,"click",function(){c._handleSelect(this)})}c._ul.style.display="block",c._input.setAttribute("aria-expanded",!0)}else c._clearResults()},_showLoading:function(){L.DomEvent.off(this._button,"click",this._geocodeRequest),L.DomUtil.removeClass(this._button,"search"),L.DomUtil.addClass(this._button,"working")}});L.Map.mergeOptions({geocoderControl:!1}),L.Map.addInitHook(function(){if(this.options.geocoderControl){var a={};"object"==typeof this.options.geocoderControl&&(a=this.options.geocoderControl),this.geocoderControl=L.npmap.control.geocoder(a).addTo(this)}}),b.exports=function(a){return new g(a)}},{"../util/geocode":112,"../util/util":117,reqwest:53}],71:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Class.extend({addTo:function(a){var b=this;return this._map=a,setTimeout(function(){b._onHashChange(!0),b._startListening()},250),this},initialize:function(){return this._crossOrigin=!1,this._embeddedInIframe=!1,this._supportsHashChange=function(){var a=window.documentMode;return"onhashchange"in window&&(void 0===a||a>7)}(),this._window=window,window.self!==window.top&&""!==document.referrer&&(this._embeddedInIframe=!0,d.parseDomainFromUrl(document.referrer)===d.parseDomainFromUrl(window.location.href)?this._window=window.top:this._crossOrigin=!0),this._crossOrigin&&console.warn("This map is in an iframe embedded in a web page hosted from a domain other than nps.gov."),this},removeFrom:function(){this._changeTimeout&&clearTimeout(this._changeTimeout),this.isListening&&this._stopListening(),delete this._map.hashControl,this._map=null},_changeDefer:100,_changeTimeout:null,_hashChangeInterval:null,_isListening:!1,_lastHash:null,_movingMap:!1,_formatHash:function(a){var b=a.getCenter(),c=a.getZoom(),d=Math.max(0,Math.ceil(Math.log(c)/Math.LN2));return"#"+[c,b.lat.toFixed(d),b.lng.toFixed(d)].join("/")},_getParentDocumentWindow:function(a){for(;a.parentNode;)if(a=a.parentNode,"window"===a.tagName.toLowerCase())return a;return null},_onHashChange:function(a){if(a)this._update();else if(!this._changeTimeout){var b=this;this._changeTimeout=setTimeout(function(){b._changeTimeout=null,b._update()},this._changeDefer)}},_onMapMove:function(){var a;return!(this._movingMap||!this._map._loaded)&&(a=this._formatHash(this._map),void(this._lastHash!==a&&(this._window.history.replaceState(void 0,void 0,a),this._embeddedInIframe&&this._crossOrigin&&window.parent.postMessage({hash:a,id:"npmap_map_library-hashchange",location:window.location.href},"*"),this._lastHash=a)))},_parseHash:function(a){var b;if(0===a.indexOf("#")&&(a=a.substr(1)),b=a.split("/"),3===b.length){var c=parseFloat(b[1]),d=parseFloat(b[2]),e=parseFloat(b[0]);return!(isNaN(e)||isNaN(c)||isNaN(d))&&{center:new L.LatLng(c,d),zoom:e}}return!1},_startListening:function(){var a=this;this._map.on("moveend",this._onMapMove,this),this._supportsHashChange?L.DomEvent.addListener(this._window,"hashchange",function(){a._onHashChange(a)}):(clearInterval(this._hashChangeInterval),this._hashChangeInterval=setInterval(function(){a._onHashChange(a)},50)),this._isListening=!0},_stopListening:function(){this._map.off("moveend",this._onMapMove,this),this._supportsHashChange?L.DomEvent.removeListener(this._window,"hashchange",this._onHashChange,this):(clearInterval(this._hashChangeInterval),this._hashChangeInterval=null),this._isListening=!1},_update:function(){var a,b=this._window.location.hash;b!==this._lastHash&&(a=this._parseHash(b),a?(this._movingMap=!0,this._map.setView(a.center,a.zoom),this._movingMap=!1):this._onMapMove(this._map))}});L.Map.addInitHook(function(){this.options.hashControl&&(this.hashControl=L.npmap.control.hash(this.options.hashControl).addTo(this))}),b.exports=function(a){return new e(a)}},{"../util/util":117}],72:[function(a,b,c){"use strict";var d=L.Control.extend({options:{position:"topleft"},initialize:function(a){return L.Util.extend(this.options,a),this},onAdd:function(){var a=L.DomUtil.create("div","leaflet-control-home leaflet-bar leaflet-control"),b=L.DomUtil.create("button","leaflet-bar-single",a);return b.setAttribute("alt","Pan/zoom to initial extent"),L.DomEvent.disableClickPropagation(b).on(b,"click",L.DomEvent.preventDefault).on(b,"click",this.toHome,this),a},toHome:function(){var a=this._map,b=a.options;a.setView(b.center,b.zoom),a.closePopup()}});L.Map.mergeOptions({homeControl:!0}),L.Map.addInitHook(function(){if(this.options.homeControl){var a={};"object"==typeof this.options.homeControl&&(a=this.options.homeControl),this.homeControl=L.npmap.control.home(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],73:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Control.extend({options:{position:"bottomleft"},initialize:function(a){return L.setOptions(this,a),this},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-info leaflet-control"),this._container},_hide:function(){this._container.style.display="none",L.DomUtil.removeClass(this._container,"leaflet-tooltip-fade"),this._map.activeTip===this&&delete this._map.activeTip},_show:function(){this._container.style.display="inline-block",L.DomUtil.addClass(this._container,"leaflet-tooltip-fade")},getHtml:function(){return this._container.innerHTML},hide:function(){this._hide()},isVisible:function(){return"none"!==this._container.style.display},setHtml:function(a){this._container.innerHTML=d.unescapeHtml(a)},setPosition:function(){},show:function(a,b){this._map.activeTip&&this._map.activeTip!==this&&this._map.activeTip._hide(),this._map.activeTip=this,b&&this.setHtml(b),this._show()}});L.Map.mergeOptions({infoboxControl:!1}),L.Map.addInitHook(function(){if(this.options.infoboxControl){var a={};"object"==typeof this.options.infoboxControl&&(a=this.options.infoboxControl),this.infoboxControl=L.npmap.control.infobox(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../util/util":117}],74:[function(a,b,c){"use strict";var d=L.Control.extend({options:{position:"topright"},_html:null,initialize:function(a){L.Util.setOptions(this,a),this._container=L.DomUtil.create("div","leaflet-control-legend"),L.DomEvent.disableClickPropagation(this._container),a.html?"string"==typeof a.html?(this._html=a.html,this._container.innerHTML=this._html):"function"==typeof a.html?(this._html=a.html(),this._container.innerHTML=this._html):(this._html=a.html,this._container.appendChild(this._html)):a.overlays&&(this._html=this._createLegend(a.overlays),this._container.innerHTML=this._html)},onAdd:function(a){return this._map=a,!this._html,this._container},_createLegend:function(a){var b="",c=this.options;c.title&&(b+="<h3>"+c.title+"</h3>");for(var d=0;d<a.length;d++){var e=a[d];if(e.name&&(b+="<h4>"+e.name+"</h4>"),e.icons){b+="<ul>";for(var f in e.icons)b+='<li><span style="background-color:'+e.icons[f]+';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> '+f+"</li>"}}return b}});L.Map.mergeOptions({legendControl:!1}),L.Map.addInitHook(function(){if(this.options.legendControl){var a={};"object"==typeof this.options.legendControl&&(a=this.options.legendControl),this.legendControl=L.npmap.control.legend(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],75:[function(a,b,c){"use strict";var d=L.Control.extend({options:{circlePadding:[0,0],circleStyle:{clickable:!1,color:"#136aec",fillColor:"#136aec",fillOpacity:.15,opacity:.5,weight:2},drawCircle:!0,follow:!1,followCircleStyle:{},followMarkerStyle:{},locateOptions:{},markerStyle:{clickable:!1,color:"#136aec",fillColor:"#2a93ee",fillOpacity:.7,opacity:.9,radius:5,weight:2},metric:!0,onLocationError:function(a,b){a._map.notify.danger(b.message)},onLocationOutsideMapBounds:function(a){a._map.notify.danger(a.options.strings.outsideMapBoundsMsg)},position:"topleft",setView:!0,stopFollowingOnDrag:!0,strings:{outsideMapBoundsMsg:"You seem to be located outside of the boundaries of the map",popup:"You are within {distance} {unit} of this point",title:"Show me where I am"}},onAdd:function(a){function b(){return void 0!==k._event&&(a.options.maxBounds&&!a.options.maxBounds.contains(k._event.latlng))}function c(){k._event?j():(L.DomUtil.addClass(k._button,"requesting"),L.DomUtil.addClass(k._button,"pressed"),L.DomUtil.removeClass(k._button,"following")),k._active||a.locate(k._locateOptions),k._active=!0,k.options.follow&&g(),k.options.setView&&(k._locateOnNextLocationFound=!0)}function d(a){3===a.code&&k._locateOptions.watch||(i(),k.options.onLocationError(k,a))}function e(a){k._event&&k._event.latlng.lat===a.latlng.lat&&k._event.latlng.lng===a.latlng.lng&&k._event.accuracy===a.accuracy||k._active&&(k._event=a,k.options.follow&&k._following&&(k._locateOnNextLocationFound=!0),j())}function f(){k._active=!1,k._following=!1,k._locateOnNextLocationFound=k.options.setView}function g(){a.fire("startfollowing"),k._following=!0,k.options.stopFollowingOnDrag&&a.on("dragstart",h)}function h(){a.fire("stopfollowing"),k._following=!1,k.options.stopFollowingOnDrag&&a.off("dragstart",h),j()}function i(){a.stopLocate(),a.off("dragstart",h),L.DomUtil.removeClass(k._button,"following"),L.DomUtil.removeClass(k._button,"pressed"),L.DomUtil.removeClass(k._button,"requesting"),f(),k._layer.clearLayers(),k._circleMarker=void 0,k._circle=void 0}function j(){var c,d,e,f;if(void 0===k._event.accuracy&&(k._event.accuracy=0),e=k._event.accuracy,k._locateOnNextLocationFound&&(b()?k.options.onLocationOutsideMapBounds(k):a.fitBounds(k._event.bounds,{padding:k.options.circlePadding}),k._locateOnNextLocationFound=!1),k.options.drawCircle)if(f=k._following?k.options.followCircleStyle:k.options.circleStyle,k._circle){k._circle.setLatLng(k._event.latlng).setRadius(e);for(d in f)k._circle.options[d]=f[d]}else k._circle=L.circle(k._event.latlng,e,f).addTo(k._layer);if(c=k._following?k.options.followMarkerStyle:k.options.markerStyle,k._circleMarker){k._circleMarker.setLatLng(k._event.latlng);for(d in c)k._circleMarker.options[d]=c[d]}else k._circleMarker=L.circleMarker(k._event.latlng,c).addTo(k._layer);k._container&&(L.DomUtil.removeClass(k._button,"requesting"),L.DomUtil.addClass(k._button,"pressed"),k._following?L.DomUtil.addClass(k._button,"following"):L.DomUtil.removeClass(k._button,"following"))}var k=this,l={};return this._container=L.DomUtil.create("div","npmap-control-locate leaflet-bar leaflet-control"),this._event=void 0,this._layer=(new L.LayerGroup).addTo(a),this._locateOptions={watch:!0},this._map=a,L.extend(this._locateOptions,this.options.locateOptions),L.extend(this._locateOptions,{setView:!1}),L.extend(l,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=l,l={},L.extend(l,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=l,k._button=L.DomUtil.create("button","leaflet-bar-single",this._container),k._button.setAttribute("alt",this.options.strings.title),L.DomEvent.on(k._button,"click",L.DomEvent.stopPropagation).on(k._button,"click",L.DomEvent.preventDefault).on(k._button,"click",function(){k._active&&(void 0===k._event||a.getBounds().contains(k._event.latlng)||!k.options.setView||b())?i():c()}).on(k._button,"dblclick",L.DomEvent.stopPropagation),f(),a.on("locationerror",d,k),a.on("locationfound",e,k),this.locate=c,this.stopFollowing=h,this.stopLocate=i,this._container}});L.Map.addInitHook(function(){if(this.options.locateControl){var a={};"object"==typeof this.options.locateControl&&(a=this.options.locateControl),this.locateControl=L.npmap.control.locate(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],76:[function(a,b,c){"use strict";a("leaflet-draw");var d=a("../util/util"),e=L.Control.extend({includes:L.Mixin.Events,options:{polygon:{allowIntersection:!1,drawError:{color:"#f06eaa",message:"Polygons can't overlap",timeout:500},repeatMode:!0,shapeOptions:{color:"#882255",fillOpacity:.4,opacity:1,weight:4}},polyline:{repeatMode:!0,shapeOptions:{color:"#882255",opacity:1,weight:4}},position:"topleft",units:{area:["ac","ha"],distance:["mi","ft","m"]}},units:{area:{ac:"Acres",ha:"Hectares"},distance:{ft:"Feet",m:"Meters",mi:"Miles"}},initialize:function(a){if(L.Util.setOptions(this,a),this._featureGroup=new L.FeatureGroup,this._featureGroupTooltips=new L.FeatureGroup,this._modes={},this._resetVariables(),this.options&&this.options.units){var b;this.options.units.area&&this.options.units.area.length&&(b=this.options.units.area[0],this.units.area[b]&&(this._activeUnitArea=b,this._lastUnitArea=b)),this.options.units.distance&&this.options.units.distance.length&&(b=this.options.units.distance[0],this.units.distance[b]&&(this._activeUnitDistance=b,this._lastUnitDistance=b))}return this},onAdd:function(a){if(this._activeUnitArea||this._activeUnitDistance){var b,c,d,e=document.createElement("li");if(this._container=L.DomUtil.create("div","leaflet-bar leaflet-control npmap-control-measure"),this._map=a,this._menu=L.DomUtil.create("ul","",this._container),this._button=L.DomUtil.create("button","leaflet-bar-single measure-control",this._container),this._activeUnitArea){var f=L.DomUtil.create("li","",this._menu);for(b="",this._buttonArea=L.DomUtil.create("button","pressed",f),this._buttonArea.innerHTML="Area",this._selectUnitArea=L.DomUtil.create("select","",e),c=0;c<this.options.units.area.length;c++)d=this.options.units.area[c],b+='<option value="'+d+'"'+(0===c?" selected":"")+">"+this.units.area[d]+"</option>";this._selectUnitArea.innerHTML=b}if(this._activeUnitDistance){var g=L.DomUtil.create("li","",this._menu),h=this;for(b="",this._buttonDistance=L.DomUtil.create("button",function(){return h._buttonArea?"":"pressed"}(),g),this._buttonDistance.innerHTML="Distance",this._selectUnitDistance=L.DomUtil.create("select","",e),c=0;c<this.options.units.distance.length;c++)d=this.options.units.distance[c],b+='<option value="'+d+'"'+(0===c?" selected":"")+">"+this.units.distance[d]+"</option>";this._selectUnitDistance.innerHTML=b}return this._menu.appendChild(e),a.addLayer(this._featureGroup).addLayer(this._featureGroupTooltips),this._initializeMode(this._buttonArea,new L.Draw.Polygon(a,this.options.polygon)),this._initializeMode(this._buttonDistance,new L.Draw.Polyline(a,this.options.polyline)),this._setupListeners(),this._container}throw new Error("No valid units specified for measure control!")},_buildTooltipArea:function(a){return'<div class="leaflet-measure-tooltip-area"><div class="leaflet-measure-tooltip-total"><span>'+a.toFixed(2)+" "+this._activeUnitArea+"</span></div></div>"},_buildTooltipDistance:function(a,b){var c='<div class="leaflet-measure-tooltip-distance"><div class="leaflet-measure-tooltip-total"><span>'+a.toFixed(2)+" "+this._activeUnitDistance+"</span><span>"+a+"</span></div>";return"undefined"!=typeof b&&0!==b&&b!==a&&(c+='<div class="leaflet-measure-tooltip-difference"><span>(+'+b.toFixed(2)+" "+this._activeUnitDistance+")</span><span>"+b+"</span></div>"),c+"</div>"},_buttonClick:function(a,b){var c=a.target;if(b||!L.DomUtil.hasClass(c,"pressed")){var d,e,f;"distance"===c.innerHTML.toLowerCase()?(d=this._buttonDistance,e="distance",this._selectUnitArea&&(this._selectUnitArea.style.display="none",f=this._buttonArea,this._modes.polygon.handler.disable()),this._selectUnitDistance.style.display="block",this._modes.polyline.handler.enable()):(d=this._buttonArea,e="area",this._selectUnitDistance&&(this._selectUnitDistance.style.display="none",f=this._buttonDistance,this._modes.polyline.handler.disable()),this._selectUnitArea.style.display="block",this._modes.polygon.handler.enable()),L.DomUtil.addClass(d,"pressed"),f&&L.DomUtil.removeClass(f,"pressed"),this._startMeasuring(e)}},_calculateArea:function(a,b,c){if(c=c||"m",c!==a)if("ac"===c)switch(a){case"ha":b/=2.47105;break;case"m":b=4046.85642*b}else if("ha"===c)switch(a){case"ac":b=2.47105*b;break;case"m":b=1e4*b}else if("m"===c)switch(a){case"ac":b/=4046.85642;break;case"ha":b/=1e4}return b},_calculateDistance:function(a,b,c){if(c=c||"m",c!==a)if("ft"===c)switch(a){case"m":b/=3.28084;break;case"mi":b/=5280}else if("m"===c)switch(a){case"ft":b=3.28084*b;break;case"mi":b=.000621371192*b}else if("mi"===c)switch(a){case"ft":b=5280*b;break;case"m":b=1609.344*b}return b},_createTooltip:function(a,b){return new L.Marker(a,{clickable:!1,icon:new L.DivIcon({className:"leaflet-measure-tooltip",html:b,iconAnchor:[-5,-5]})}).addTo(this._featureGroupTooltips)},_handlerActivated:function(a){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[a.handler],this.fire("activated")},_handlerDeactivated:function(){this._resetVariables(),this.fire("deactivated")},_initializeMode:function(a,b){var c=b.type;this._modes[c]={button:a,handler:b},this._modes[c].handler.on("disabled",this._handlerDeactivated,this).on("enabled",this._handlerActivated,this)},_mouseClickArea:function(a){var b=a.latlng;if(this._activePolygon){var c;this._activePolygon.addLatLng(b),c=this._activePolygon.getLatLngs(),c.length>2&&(this._activeTooltip&&this._featureGroupTooltips.removeLayer(this._activeTooltip),this._area=this._calculateArea(this._activeUnitArea,L.GeometryUtil.geodesicArea(c)),this._activeTooltip=this._createTooltip(b,this._buildTooltipArea(this._area)))}else this._activePolygon=new L.Polygon([b]),this._area=0;this._tempTooltip&&this._removeTempTooltip()},_mouseClickDistance:function(a){var b=a.latlng;if(this._activePoint){var c=this._calculateDistance(this._activeUnitDistance,b.distanceTo(this._activePoint));this._distance=this._distance+c,this._activeTooltip=this._createTooltip(b,this._buildTooltipDistance(this._distance,c))}else this._distance=0;this._activePoint=b,this._tempTooltip&&this._removeTempTooltip()},_mouseMove:function(a){var b=a.latlng;b&&this._activePoint&&(L.DomUtil.hasClass(this._buttonArea,"pressed")||this._mouseMoveDistance(b))},_mouseMoveDistance:function(a){var b=this._calculateDistance(this._activeUnitDistance,a.distanceTo(this._activePoint)),c=this._buildTooltipDistance(this._distance+b);this._tempTooltip?this._updateTooltip(a,c,this._tempTooltip):this._tempTooltip=this._createTooltip(a,c)},_onKeyDown:function(a){27===a.keyCode&&this._toggleMeasure()},_onSelectUnitArea:function(){var a=d.getElementsByClassName("leaflet-measure-tooltip-area");
this._lastUnitArea=this._activeUnitArea,this._activeUnitArea=this._selectUnitArea.options[this._selectUnitArea.selectedIndex].value;for(var b=0;b<a.length;b++){var c=a[b],e=c.childNodes[0].childNodes[0];c.parentNode.innerHTML=this._buildTooltipArea(this._calculateArea(this._activeUnitArea,parseFloat(e.innerHTML),this._lastUnitArea))}},_onSelectUnitDistance:function(){var a=d.getElementsByClassName("leaflet-measure-tooltip-distance");this._lastUnitDistance=this._activeUnitDistance,this._activeUnitDistance=this._selectUnitDistance.options[this._selectUnitDistance.selectedIndex].value;for(var b=0;b<a.length;b++){var c,e,f,g,h=a[b],i=h.childNodes;2===i.length?(e=i[1].childNodes[1],g=i[0].childNodes[1]):e=i[0].childNodes[1],c=this._calculateDistance(this._activeUnitDistance,parseFloat(e.innerHTML),this._lastUnitDistance),g?(f=this._calculateDistance(this._activeUnitDistance,parseFloat(g.innerHTML),this._lastUnitDistance),h.parentNode.innerHTML=this._buildTooltipDistance(f,c)):h.parentNode.innerHTML=this._buildTooltipDistance(c)}this._activeTooltip&&(this._distance=parseFloat(this._activeTooltip._icon.childNodes[0].childNodes[0].childNodes[1].innerHTML),this._tempTooltip&&this._removeTempTooltip())},_removeListeners:function(){var a=this._map;L.DomEvent.off(document,"keydown",this._onKeyDown).off(a,"click",this._mouseClickArea).off(a,"click",this._mouseClickDistance).off(a,"dblclick",this._handlerDeactivated).off(a,"mousemove",this._mouseMove)},_removeTempTooltip:function(){this._featureGroupTooltips.removeLayer(this._tempTooltip),this._tempTooltip=null},_resetVariables:function(){this._activeMode=null,this._activePoint=null,this._activePolygon=null,this._activeTooltip=null,this._area=0,this._currentCircles=[],this._distance=0,this._layerGroupPath=null,this._tempTooltip=null},_setupListeners:function(){var a=this;L.DomEvent.disableClickPropagation(this._button).disableClickPropagation(this._menu).on(this._button,"click",this._toggleMeasure,this),this._buttonArea&&L.DomEvent.on(this._buttonArea,"click",this._buttonClick,this).on(this._selectUnitArea,"change",this._onSelectUnitArea,this),this._buttonDistance&&L.DomEvent.on(this._buttonDistance,"click",this._buttonClick,this).on(this._selectUnitDistance,"change",this._onSelectUnitDistance,this),this._map.on("draw:created",function(b){if(L.DomUtil.hasClass(a._button,"pressed")){var c,d=[],e=a._featureGroupTooltips.getLayers();for(a._featureGroup.addLayer(b.layer),c=0;c<e.length;c++)d.push(e[c]),a._featureGroup.addLayer(e[c]);for(c=0;c<e.length;c++)a._featureGroupTooltips.removeLayer(e[c]);for(c=0;c<d.length;c++)d[c].addTo(a._map)}})},_startMeasuring:function(a){var b=this._map;b.closePopup(),this._featureGroupTooltips.clearLayers(),this._removeListeners(),L.DomEvent.on(document,"keydown",this._onKeyDown,this).on(b,"dblclick",this._handlerDeactivated,this).on(b,"mousemove",this._mouseMove,this),"area"===a?L.DomEvent.on(b,"click",this._mouseClickArea,this):L.DomEvent.on(b,"click",this._mouseClickDistance,this)},_toggleMeasure:function(){var a=this._map;L.DomUtil.hasClass(this._button,"pressed")?(L.DomUtil.removeClass(this._button,"pressed"),this._menu.style.display="none",this._removeListeners(),this._featureGroup.clearLayers(),this._featureGroupTooltips.clearLayers(),a._controllingInteractivity="map",this._activeMode.handler.disable()):("map"!==a._controllingInteractivity&&a[a._controllingInteractivity+"Control"].deactivate(),L.DomUtil.addClass(this._button,"pressed"),this._menu.style.display="block",this._buttonArea&&L.DomUtil.hasClass(this._buttonArea,"pressed")?this._buttonClick({target:this._buttonArea},!0):this._buttonClick({target:this._buttonDistance},!0),a._controllingInteractivity="measure")},_updateTooltip:function(a,b,c){c=c||this._activeTooltip,c.setLatLng(a),c._icon.innerHTML=b},activate:function(){L.DomUtil.hasClass(this._button,"pressed")||this._toggleMeasure()},deactivate:function(){L.DomUtil.hasClass(this._button,"pressed")&&this._toggleMeasure()}});L.Map.mergeOptions({measureControl:!1}),L.Map.addInitHook(function(){if(this.options.measureControl){var a={};"object"==typeof this.options.measureControl&&(a=this.options.measureControl),this.measureControl=L.npmap.control.measure(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../util/util":117,"leaflet-draw":45}],77:[function(a,b,c){"use strict";var d=a("../preset/baselayers.json"),e=a("../util/util"),f=L.Control.extend({options:{autoToggleDisplay:!1,height:150,position:"bottomright",toggleDisplay:!0,width:150,zoomAnimation:!1,zoomLevelFixed:!1,zoomLevelOffset:-5},addTo:function(a){return L.Control.prototype.addTo.call(this,a),this._miniMap.setView(this._mainMap.getCenter(),this._decideZoom(!0)),this._setDisplay(this._decideMinimized()),this},initialize:function(a){if(e.strict(a,"object"),a.layer){if("string"==typeof a.layer){var b=a.layer.split("-");a.layer=e.clone(d[b[0]][b[1]])}return L.Util.setOptions(this,a),"arcgisserver"===a.layer.type?this._layer=a.layer.L=L.npmap.layer[a.layer.type][a.layer.tiled===!0?"tiled":"dynamic"](a.layer):this._layer=a.layer.L=L.npmap.layer[a.layer.type](a.layer),this}throw new Error("The overview control must have a layer specified.")},onAdd:function(a){return this._container=L.DomUtil.create("div","npmap-hidden-xs leaflet-control-overview"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",L.DomEvent.disableClickPropagation(this._container),L.DomEvent.on(this._container,"mousewheel",L.DomEvent.stopPropagation),this._mainMap=a,this._attributionContainer=this._mainMap.attributionControl._container,this._container.style.margin="0 0 "+-this._attributionContainer.offsetHeight+"px 0",this._miniMap=this.L=new L.Map(this._container,{attributionControl:!1,autoToggleDisplay:this.options.autoToggleDisplay,boxZoom:!this.options.zoomLevelFixed,crs:a.options.crs,doubleClickZoom:!this.options.zoomLevelFixed,homeControl:!1,keyboard:!1,scrollWheelZoom:!this.options.zoomLevelFixed,smallzoomControl:!1,touchZoom:!this.options.zoomLevelFixed,zoomAnimation:this.options.zoomAnimation,zoomControl:!1}),this._attributionContainer.style.marginRight=this.options.width+3+"px",this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this._transitioning=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(L.Util.bind(function(){this._aimingRect=L.rectangle(this._mainMap.getBounds(),{clickable:!1,color:"#d29700",weight:3}).addTo(this._miniMap),this._shadowRect=L.rectangle(this._mainMap.getBounds(),{clickable:!1,color:"#454545",fillOpacity:0,opacity:0,weight:3}).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},onRemove:function(){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer),this._attributionContainer.style.marginRight="0"},_addToggleButton:function(){this._toggleDisplayButton=this._createButton("","Hide Overview",null,this._container,this._toggleDisplayButtonClicked,this),this._toggleDisplayButtonImage=L.DomUtil.create("span",null,this._toggleDisplayButton)},_createButton:function(a,b,c,d,e,f){var g=L.DomUtil.create("button",c,d),h=L.DomEvent.stopPropagation;return g.innerHTML=a,g.setAttribute("alt",b),L.DomEvent.on(g,"click",h).on(g,"mousedown",h).on(g,"dblclick",h).on(g,"click",L.DomEvent.preventDefault).on(g,"click",e,f),g},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_decideZoom:function(a){if(this.options.zoomLevelFixed)return a?this.options.zoomLevelFixed:this._mainMap.getZoom();if(a){var b=this._mainMap.getZoom()+this.options.zoomLevelOffset;return b<0&&(b=0),b}var c,d=this._miniMap.getZoom()-this._mainMap.getZoom(),e=this._miniMap.getZoom()-this.options.zoomLevelOffset;return d>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(c=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):c=this._mainMap.getZoom():c=e,this._lastMiniMapZoom=this._miniMap.getZoom(),c},_minimize:function(){var a=this;a._transitioning=!0,a._attributionContainer.style.marginRight="50px",a._container.style.width="47px",a._container.style.height="47px",a._minimized=!0,a._toggleDisplayButton.style.display="none",a._toggleDisplayButton.style.height="47px",a._toggleDisplayButton.style.width="47px",a._toggleDisplayButtonImage.className+=" minimized",a._toggleDisplayButtonImage.style.bottom="auto",a._toggleDisplayButtonImage.style.right="auto",a._toggleDisplayButtonImage.style.left="10px",a._toggleDisplayButtonImage.style.top="10px",setTimeout(function(){a._toggleDisplayButton.style.display="block",a._toggleDisplayButton.focus(),a._aimingRect.setStyle({fillOpacity:0,opacity:0}),a._miniMap.invalidateSize(),a._transitioning=!1},200)},_onMainMapMoved:function(){this._transitioning||(this._miniMapMoving?this._miniMapMoving=!1:(this._mainMapMoving=!0,this._miniMap.setView(this._mainMap.getCenter(),this._decideZoom(!0)),this._setDisplay(this._decideMinimized()))),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoved:function(){this._transitioning?this._mainMapMoving||this._shadowRect.setStyle({fillOpacity:0,opacity:0}):this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({fillOpacity:0,opacity:0}))},_onMiniMapMoveStarted:function(){var a=this._aimingRect.getBounds();this._lastAimingRectPosition={sw:this._miniMap.latLngToContainerPoint(a.getSouthWest()),ne:this._miniMap.latLngToContainerPoint(a.getNorthEast())}},_onMiniMapMoving:function(){!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new L.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({fillOpacity:.3,opacity:1}))},_restore:function(){var a=this;a._transitioning=!0,a._toggleDisplayButton.style.display="none",a._toggleDisplayButton.style.height="20px",a._toggleDisplayButton.style.bottom="0",a._toggleDisplayButton.style.left="auto",a._toggleDisplayButton.style.position="absolute",a._toggleDisplayButton.style.right="0",a._toggleDisplayButton.style.top="auto",a._toggleDisplayButton.style.width="20px",a._toggleDisplayButtonImage.className=a._toggleDisplayButtonImage.className.replace(/(?:^|\s)minimized(?!\S)/g,""),a._toggleDisplayButtonImage.style.bottom="10px",a._toggleDisplayButtonImage.style.left="auto",a._toggleDisplayButtonImage.style.right="10px",a._toggleDisplayButtonImage.style.top="auto",a._container.style.width=a.options.width+"px",a._container.style.height=a.options.height+"px",a._attributionContainer.style.marginRight=a.options.width+3+"px",a._minimized=!1,setTimeout(function(){a._toggleDisplayButton.style.display="block",a._toggleDisplayButton.focus(),a._aimingRect.setStyle({fillOpacity:.2,opacity:.5}),a._miniMap.invalidateSize(),a._transitioning=!1},200)},_setDisplay:function(a){a!==this._minimized&&(this._minimized?this._restore():this._minimize())},_toggleDisplayButtonClicked:function(a){this._userToggledDisplay=!0,L.DomEvent.preventDefault(a),this._minimized?(this._restore(),this._toggleDisplayButton.setAttribute("alt","Hide Overview")):(this._minimize(),this._toggleDisplayButton.setAttribute("alt","Show Overview"))}});L.Map.mergeOptions({overviewControl:!1}),L.Map.addInitHook(function(){if(this.options.overviewControl){var a={};"object"==typeof this.options.overviewControl&&(a=this.options.overviewControl),this.overviewControl=L.npmap.control.overview(a).addTo(this)}}),b.exports=function(a){return new f(a)}},{"../preset/baselayers.json":107,"../util/util":117}],78:[function(a,b,c){"use strict";a("leaflet-easyprint");var d=function(a){return L.easyPrint({position:"topleft",sizeModes:["Current","LetterPortrait","LetterLandscape"]})};L.Map.addInitHook(function(){if(this.options.printControl){var a={};"object"==typeof this.options.printControl&&(a=this.options.printControl),this.printControl=L.npmap.control.print(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{"leaflet-easyprint":46}],79:[function(a,b,c){"use strict";var d=L.Control.Scale.extend({options:{metric:!1}});L.Map.mergeOptions({scaleControl:!1}),L.Map.addInitHook(function(){if(this.options.scaleControl){var a={};"object"==typeof this.options.scaleControl&&(a=this.options.scaleControl),this.scaleControl=L.npmap.control.scale(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],80:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Control.extend({initialize:function(){return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","share",this._li),this._button.setAttribute("alt","Share the map"),L.DomEvent.addListener(this._button,"click",this.share,this),this},addTo:function(a){var b=d.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._map=a,d.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="28px",this},share:function(a){L.DomEvent.preventDefault(a),window.alert("The share tool has not yet been implemented.")}});L.Map.mergeOptions({shareControl:!1}),L.Map.addInitHook(function(){if(this.options.shareControl){var a={};"object"==typeof this.options.shareControl&&(a=this.options.shareControl),this.shareControl=L.npmap.control.share(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../util/util":117}],81:[function(a,b,c){"use strict";var d=L.Control.extend({options:{position:"topleft"},initialize:function(a){return L.Util.extend(this.options,a),this},onAdd:function(a){return this._container=L.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),this._zoomInButton=this._createButton("Zoom in","in",this._container,this._zoomIn,this),this._zoomOutButton=this._createButton("Zoom out","out",this._container,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),this._updateDisabled(),this._container},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_createButton:function(a,b,c,d,e){var f=L.DomUtil.create("button",b,c);return f.setAttribute("alt",a),L.DomEvent.disableClickPropagation(f),L.DomEvent.on(f,"click",L.DomEvent.preventDefault).on(f,"click",d,e),f},_updateDisabled:function(){var a="leaflet-disabled",b=this._map;L.DomUtil.removeClass(this._zoomInButton,a),L.DomUtil.removeClass(this._zoomOutButton,a),b._zoom===b.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,a),b._zoom===b.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,a)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)}});L.Map.mergeOptions({smallzoomControl:!0}),L.Map.addInitHook(function(){if(this.options.smallzoomControl){var a={};"object"==typeof this.options.smallzoomControl&&(a=this.options.smallzoomControl),this.smallzoomControl=L.npmap.control.smallzoom(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],82:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.Control.extend({options:{position:"topright"},statics:{SELECTED_ID:"basemap_listbox_selected"},initialize:function(a){this._baseLayers=a},_addLi:function(a){var b=L.DomUtil.create("li",a.visible?"selected":null);a.visible&&(b.setAttribute("id",e.SELECTED_ID),this._active.setAttribute("aria-activedescendant",e.SELECTED_ID)),b.innerHTML=a.name,b.layerId=L.stamp(a),this._list.appendChild(b)},_initLayout:function(){var a=this._container=L.DomUtil.create("div","npmap-control-switcher");L.Browser.touch?L.DomEvent.on(a,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(a),L.DomEvent.on(a,"mousewheel",L.DomEvent.stopPropagation)),this._active=L.DomUtil.create("div",null,a),this._active.setAttribute("aria-expanded",!1),this._active.setAttribute("aria-haspopup",!0),this._active.setAttribute("aria-label","Switch base maps"),this._active.setAttribute("aria-owns","basemap_listbox"),this._active.setAttribute("role","combobox"),this._list=L.DomUtil.create("ul",null,a),this._list.setAttribute("id","basemap_listbox"),this._list.setAttribute("role","listbox"),this._list.style.display="none",this._activeIcon=L.DomUtil.create("span",null,this._active),L.DomUtil.create("ico",null,this._activeIcon),this._activeText=L.DomUtil.create("div",null,this._active),this._activeDropdown=L.DomUtil.create("span",null,this._active),L.DomEvent.addListener(this._active,"click",this._toggleList,this)},_onClick:function(a){var b=d.getEventObjectTarget(a);if(!L.DomUtil.hasClass(b,"selected")){var c,f=!1,g=d.getChildElementsByNodeName(this._list,"li"),h=!1,i=e.SELECTED_ID;for(c=0;c<g.length;c++){var j=g[c];if(L.DomUtil.hasClass(j,"selected")){j.removeAttribute("id"),L.DomUtil.removeClass(j,"selected");break}}for(b.setAttribute("id",i),this._active.setAttribute("aria-activedescendant",i),c=0;c<this._baseLayers.length;c++){var k=this._baseLayers[c];if(k.L?(this._map.removeLayer(k.L),k.visible=!1,h=!0,delete k.L):b.layerId===k._leaflet_id&&(k.visible=!0,"arcgisserver"===k.type?k.L=L.npmap.layer[k.type][k.tiled===!0?"tiled":"dynamic"](k):k.L=L.npmap.layer[k.type](k),this._map.getZoom()<k.minZoom?this._map.setView(this._map.getCenter(),k.minZoom):this._map.getZoom()>k.maxZoom&&this._map.setView(this._map.getCenter(),k.maxZoom),k.maxZoom?this._map.options.maxZoom=k.maxZoom:this._map.options.maxZoom=19,this._map.addLayer(k.L),L.DomUtil.addClass(b,"selected"),this._setActive(k),f=k.L),f&&h){this._map.fire("baselayerchange",{layer:f});break}}}this._toggleList()},_setActive:function(a){var b=this._activeIcon.childNodes[0],c=a.icon;c||(c="generic"),b.className="",L.DomUtil.addClass(b,c+"-small"),this._activeText.innerHTML=a.name},_toggleList:function(){this._list.style.display&&"none"===this._list.style.display?(this._list.style.display="block",L.DomUtil.addClass(this._activeDropdown,"open"),this._active.setAttribute("aria-expanded",!0)):(this._list.style.display="none",L.DomUtil.removeClass(this._activeDropdown,"open"),this._active.setAttribute("aria-expanded",!1))},_update:function(){var a,b;for(this._activeIcon.childNodes[0].innerHTML="",this._activeText.innerHTML="",this._list.innerHTML="",b=0;b<this._baseLayers.length;b++){var c=this._baseLayers[b];this._addLi(c),c.visible&&this._setActive(c)}for(a=d.getChildElementsByNodeName(this._list,"li"),b=0;b<a.length;b++)L.DomEvent.addListener(a[b],"click",this._onClick,this)},onAdd:function(a){return this._initLayout(),this._update(),this._container}});L.Map.addInitHook(function(){this.options.baseLayers&&this.options.baseLayers.length>1&&(this.switcherControl=L.npmap.control.switcher(this.options.baseLayers).addTo(this))}),b.exports=function(a){return new e(a)}},{"../util/util":117}],83:[function(a,b,c){"use strict";var d=L.Control.extend({options:{position:"topleft"},onAdd:function(a){return this._map=a,this._container=L.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-zoomdisplay"),this._control=L.DomUtil.create("div","leaflet-bar-single",this._container),this._control.setAttribute("alt","Current zoom level"),this.updateZoom(a.getZoom()),a.on("zoomend",this.onMapZoomEnd,this),this._container},onRemove:function(a){a.off("zoomend",this.onMapZoomEnd,this)},onMapZoomEnd:function(){this.updateZoom(this._map.getZoom())},updateZoom:function(a){"undefined"==typeof a&&(a=""),this._control.innerHTML=Math.floor(a)}});L.Map.addInitHook(function(){if(this.options.zoomdisplayControl){var a={};"object"==typeof this.options.zoomdisplayControl&&(a=this.options.zoomdisplayControl),this.zoomdisplayControl=L.npmap.control.zoomdisplay(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{}],84:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=a("../util/util"),f=L.Icon.extend({options:{accessToken:function(){return d&&d.mapbox&&d.mapbox.access_token?d.mapbox.access_token:null}(),"marker-color":"#000000","marker-size":"medium"},statics:{CSS_TEMPLATE:"url(https://api.mapbox.com/v4/marker/pin-{{size}}{{symbol}}+{{color}}{{retina}}.png?access_token={{accessToken}})"},initialize:function(a){a=a||{};var b=a["marker-size"]||"medium",c={large:{iconAnchor:[17.5,49],iconSize:[35,55],popupAnchor:[2,-45]},medium:{iconAnchor:[14,36],iconSize:[28,41],popupAnchor:[2,-34]},small:{iconAnchor:[10,24],iconSize:[20,30],popupAnchor:[2,-24]}};L.Util.extend(a,c[b]),L.setOptions(this,a)},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:document.createElement("div"),c=this.options;return this._setIconStyles(b,"icon"),b.style.backgroundImage=e.handlebars(f.CSS_TEMPLATE,{accessToken:c.accessToken,color:c["marker-color"].replace("#",""),retina:L.Browser.retina?"@2x":"",size:c["marker-size"].slice(0,1),symbol:c["marker-symbol"]?"-"+c["marker-symbol"]:""}),b},createShadow:function(){return null}});L.Marker.mergeOptions({icon:new f}),b.exports=function(a){return new f(a)}},{"../../keys.json":2,"../util/util":117}],85:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=a("../util/util"),f=L.Icon.extend({options:{accessToken:function(){return d&&d.mapbox&&d.mapbox.access_token?d.mapbox.access_token:null}(),"marker-color":"#000000","marker-size":"medium"},statics:{MAKI_TEMPLATE:"url(https://api.mapbox.com/v4/marker/pin-{{size}}+{{color}}{{retina}}.png?access_token={{accessToken}})"},initialize:function(a){a=a||{};var b=a["marker-size"]||"medium",c={large:{iconAnchor:[17.5,49],iconSize:[35,55],popupAnchor:[2,-45]},medium:{iconAnchor:[14,36],iconSize:[28,41],popupAnchor:[2,-34]},small:{iconAnchor:[10,24],iconSize:[20,30],popupAnchor:[2,-24]}};L.Util.extend(a,c[b]),L.Util.setOptions(this,a)},createIcon:function(a){var b=this.options,c=L.DomUtil.create("div","npmapsymbollibrary-icon "+b["marker-size"]+" "+b["marker-symbol"]+"-"+b["marker-size"]+(L.Browser.retina?"-2x":"")),d=a&&"DIV"===a.tagName?a:document.createElement("div");return this._setIconStyles(d,"icon"),d.style.backgroundImage=e.handlebars(f.MAKI_TEMPLATE,{accessToken:b.accessToken,color:b["marker-color"].replace("#",""),retina:L.Browser.retina?"@2x":"",size:b["marker-size"].slice(0,1)}),d.appendChild(c),d},createShadow:function(){return null}});b.exports=function(a){return new f(a)}},{"../../keys.json":2,"../util/util":117}],86:[function(a,b,c){var d=a("../../util/util"),e=L.Layer.extend({includes:[L.Mixin.Events,a("../../mixin/esri")],options:{opacity:1,position:"front"},_defaultLayerParams:{bboxSR:3857,f:"image",format:"png24",imageSR:3857,layers:"",transparent:!0},initialize:function(a){d.strict(a.url,"string"),this._layerParams=L.Util.extend({},this._defaultLayerParams),this._serviceUrl=this._cleanUrl(a.url);for(var b in a)this._defaultLayerParams.hasOwnProperty(b)&&(this._layerParams[b]=a[b]);this._parseLayers(),L.Util.setOptions(this,a),this._layerParams.transparent||(this.options.opacity=1),a.clickable===!1&&(this._hasInteractivity=!1),this._getMetadata()},onAdd:function(a){if(this._map=a,this._moveHandler=this._debounce(this._update,150,this),a.options.crs&&a.options.crs.code){var b=a.options.crs.code.split(":")[1];this._layerParams.bboxSR=b,this._layerParams.imageSR=b}a.on("moveend",this._moveHandler,this),this._update()},onRemove:function(a){this._currentImage&&this._map.removeLayer(this._currentImage),a.off("moveend",this._moveHandler,this)},_debounce:function(a,b){var c=null;return function(){var d=arguments,e=this||e;clearTimeout(c),c=setTimeout(function(){a.apply(e,d)},b)}},_getImageUrl:function(){var a=this._map,b=a.getBounds(),c=a.options.crs,d=this._layerParams,e=a.getSize(),f=c.project(b._northEast),g=this.options,h=c.project(b._southWest);return d.bbox=[h.x,h.y,f.x,f.y].join(","),d.size=e.x+","+e.y,g.edit&&(d.nocache=(new Date).getTime()),g.token&&(d.token=g.token),this._serviceUrl+"export"+L.Util.getParamString(d)},_parseLayers:function(){if("undefined"==typeof this._layerParams.layers)return void delete this._layerParams.layerOption;var a=this._layerParams.layerOption||null,b=this._layerParams.layers||null,c="show",d=["exclude","hide","include","show"];if(delete this._layerParams.layerOption,a)d.indexOf(a)!==-1&&(c=a),this._layerParams.layers=c+":"+b;else if(L.Util.isArray(b))this._layerParams.layers=c+":"+b.join(",");else if("string"==typeof b){var e=b.match(":");e&&(b=b.split(e[0]),Number(b[1].split(",")[0])&&(d.indexOf(b[0])!==-1&&(c=b[0]),b=b[1])),this._layerParams.layers=c+":"+b}},_update:function(){var a,b,c;this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(c=this._map.getZoom(),c>this.options.maxZoom||c<this.options.minZoom||(a=this._map.getBounds(),a._southWest.wrap(),a._northEast.wrap(),b=new L.ImageOverlay(this._getImageUrl(),a,{opacity:0}).addTo(this._map),b.on("load",function(b){var c=b.target,d=this._currentImage;c._bounds.equals(a)?(this._currentImage=c,"front"===this.options.position?this._currentImage.bringToFront():this._currentImage.bringToBack(),this._currentImage.setOpacity(this.options.opacity),d&&this._map.removeLayer(d)):this._map.removeLayer(c)},this),this.fire("loading",{bounds:a})))},bringToBack:function(){return this.options.position="back",this._currentImage.bringToBack(),this},bringToFront:function(){return this.options.position="front",this._currentImage.bringToFront(),this},redraw:function(){this._update()},setLayers:function(a){"number"==typeof a&&(a=a.toString()),this._layerParams.layers=a,this._parseLayers(),this._map.removeLayer(this._currentImage),this._update()},setOpacity:function(a){this.options.opacity=a,this._currentImage.setOpacity(a)}});b.exports=function(a){return a=a||{},a.type||(a.type="arcgisserver"),new e(a)}},{"../../mixin/esri":101,"../../util/util":117}],87:[function(a,b,c){"use strict";var d=a("../../util/util"),e=L.TileLayer.extend({includes:[a("../../mixin/esri")],options:{errorTileUrl:L.Util.emptyImageUrl},initialize:function(a){L.Util.setOptions(this,a),d.strict(a.url,"string"),this._serviceUrl=this._cleanUrl(a.url),this.tileUrl=this._cleanUrl(a.url)+"tile/{z}/{y}/{x}",a.clickable===!1&&(this._hasInteractivity=!1),L.TileLayer.prototype.initialize.call(this,this.tileUrl,a),this._getMetadata()}});b.exports=function(a){return a=a||{},a.type||(a.type="arcgisserver"),new e(a)}},{"../../mixin/esri":101,"../../util/util":117}],88:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=L.TileLayer.extend({options:{attribution:"Bing",culture:"en-US",layer:"aerial",subdomains:[0,1,2,3]},getTileUrl:function(a){var b=this.options.subdomains,c=this.options.subdomains[Math.abs((a.x+a.y)%b.length)],d=this._getZoomForUrl();return this._url.replace("http:","https:").replace("{subdomain}",c).replace("{quadkey}",this.tile2quad(a.x,a.y,d)).replace("http:",document.location.protocol).replace("{culture}",this.options.culture)},initialize:function(a){L.Util.setOptions(this,a),this._key=d.bing.key,this._url=null,this.meta={},this._loadMetadata()},onRemove:function(a){for(var b=0;b<this._providers.length;b++){var c=this._providers[b];c.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(c.attrib),c.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[a])},_initMetadata:function(){var a=this.meta.resourceSets[0].resources[0];if(this.options.subdomains=a.imageUrlSubdomains,this._url=a.imageUrl,this._providers=[],a.imageryProviders)for(var b=0;b<a.imageryProviders.length;b++)for(var c=a.imageryProviders[b],d=0;d<c.coverageAreas.length;d++){var e=c.coverageAreas[d],f={zoomMin:e.zoomMin,zoomMax:e.zoomMax,active:!1},g=new L.LatLngBounds(new L.LatLng(e.bbox[0]+.01,e.bbox[1]+.01),new L.LatLng(e.bbox[2]-.01,e.bbox[3]-.01));f.bounds=g,f.attrib=c.attribution,this._providers.push(f)}this.fire("ready"),this.readyFired=!0,this._update()},_loadMetadata:function(){var a,b="_bing_metadata_"+L.stamp(this),c=this;window[b]=function(a){var d=document.getElementById(b);if(c.meta=a,window[b]=null,d.parentNode.removeChild(d),a.errorDetails){if(window.console){var e={message:a.errorDetails};c.fire("error",e),c.errorFired=e}}else c._initMetadata()},a=document.createElement("script"),a.src="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.layer+"?include=ImageryProviders&jsonp="+b+"&key="+this._key,a.id=b,document.getElementsByTagName("head")[0].appendChild(a)},_update:function(){null!==this._url&&this._map&&(this._updateAttribution(),L.TileLayer.prototype._update.apply(this,[]))},_updateAttribution:function(){for(var a=this._map.getBounds(),b=this._map.getZoom(),c=0;c<this._providers.length;c++){var d=this._providers[c];b<=d.zoomMax&&b>=d.zoomMin&&a.intersects(d.bounds)?(!d.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(d.attrib),d.active=!0):(d.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(d.attrib),d.active=!1)}},tile2quad:function(a,b,c){for(var d="",e=c;e>0;e--){var f=0,g=1<<e-1;0!==(a&g)&&(f+=1),0!==(b&g)&&(f+=2),d+=f}return d}});b.exports=function(a){return a=a||{},a.type||(a.type="bing"),new e(a)}},{"../../keys.json":2}],89:[function(a,b,c){"use strict";var d=a("reqwest"),e=a("../util/util"),f=L.TileLayer.extend({includes:[a("../mixin/grid")],options:{errorTileUrl:L.Util.emptyImageUrl,format:"png",subdomains:[0,1,2,3]},statics:{GEOMETRY_TYPES:{st_linestring:"line",st_multilinestring:"line",st_multipoint:"point",st_multipolygon:"polygon",st_point:"point",st_polygon:"polygon"}},_update:function(){this._urlTile&&L.TileLayer.prototype._update.call(this)},initialize:function(a){var b=this;L.Browser.retina&&a.detectRetina||(a.detectRetina=!1),L.Util.setOptions(this,a),e.strict(this.options.table,"string"),e.strict(this.options.user,"string"),L.TileLayer.prototype.initialize.call(this,void 0,this.options),this._urlApi="https://carto.nps.gov/user/"+this.options.user+"/api/v2/sql",d({crossOrigin:!0,error:function(a){a.message=JSON.parse(a.response).error[0],b.fire("error",a),b.errorFired=a},success:function(a){if(a){var c={options:{},type:"cartodb"},f=[];if(b.options.cartocss?b._cartocss=b.options.cartocss:b.options.styles&&(b._cartocss=b._stylesToCartoCss(b.options.styles)),b._hasInteractivity=!1,b._interactivity=null,b.options.interactivity)b._interactivity=b.options.interactivity.split(",");else if(b.options.clickable!==!1&&a.rows){b._interactivity=[];for(var g in a.fields)"the_geom"===g||"the_geom_webmercator"===g?f.push(g):"date"===a.fields[g].type?(b._interactivity.push(g),f.push("to_char("+g+", 'YYYY-MM-DD-THH24:MI:SS TZ') AS "+g)):(b._interactivity.push(g),f.push(g))}L.Util.isArray(b._interactivity)&&b._interactivity.length&&(b._hasInteractivity=!0),c.options.sql=b._sql=b.options.sql||"SELECT "+f.join(",")+" FROM "+b.options.table+";",b._cartocss&&(c.options.cartocss=b._cartocss,c.options.cartocss_version="2.1.1"),b._interactivity&&(c.options.interactivity=b._interactivity),d({crossOrigin:!0,error:function(a){var c={};a&&a.responseText?(a=JSON.parse(a.responseText),a.errors&&a.errors.length?c.message=a.errors[0]:c.message="An unspecified error occured."):c.message="An unspecified error occured.",b.fire("error",c)},success:function(a){if(a){var c="https://carto.nps.gov/user/"+b.options.user+"/api/v1/map/"+a.layergroupid,d="{z}/{x}/{y}";return b._hasInteractivity&&b._interactivity.length&&(b._urlGrid=c+"/0/"+d+".grid.json"),b._urlTile=c+"/"+d+".png",b.setUrl(b._urlTile),b.redraw(),b.fire("ready"),b.readyFired=!0,b}
b.fire("error",{msg:"No response was received."})},type:"json",url:e.buildUrl("https://carto.nps.gov/user/"+b.options.user+"/api/v1/map",{config:JSON.stringify({layers:[c],version:"1.0.1"})})})}},type:"json",url:e.buildUrl(this._urlApi,{q:"SELECT * FROM "+this.options.table+" LIMIT 1;"})}),d({crossOrigin:!0,success:function(a){if(b._geometryTypes=[],a&&a.rows&&a.rows.length){var c=a.rows[0].st_geometrytype;c&&b._geometryTypes.push(f.GEOMETRY_TYPES[c.toLowerCase()])}},type:"json",url:e.buildUrl(this._urlApi,{q:"select ST_GeometryType(the_geom) from "+this.options.table+" where the_geom IS NOT NULL limit 1;"})})},_getGridData:function(a,b){var c=this;this._urlGrid?this._getTileGrid(L.Util.template(this._urlGrid,L.Util.extend({s:this.options.subdomains[Math.floor(Math.random()*this.options.subdomains.length)]},this._getTileCoords(a))),a,function(a,d){b("loading"===a?{layer:c,results:"loading"}:d?{layer:c,results:[d]}:{layer:c,results:null})}):b({layer:c,results:null})},_stylesToCartoCss:function(a){var b={},c={fill:"polygon-fill","fill-opacity":"polygon-opacity","marker-color":"marker-fill","marker-size":function(a){var c=8;"large"===a?c=16:"medium"===a&&(c=12),b["marker-height"]=c,b["marker-width"]=c},stroke:"line-color","stroke-opacity":"line-opacity","stroke-width":"line-width"};for(var d in a){var e=a[d];"function"==typeof c[d]?c[d](e):"string"==typeof c[d]&&(b[c[d]]=e)}return"#layer"+JSON.stringify(b).replace(/"/g,"").replace(/,/g,";")}});b.exports=function(a){return a=a||{},a.type||(a.type="cartodb"),new f(a)}},{"../mixin/grid":103,"../util/util":117,reqwest:53}],90:[function(a,b,c){"use strict";a("leaflet.markercluster");var d=L.MarkerClusterGroup.extend({options:{showCoverageOnHover:!1},initialize:function(a){var b,c=this;return L.Util.setOptions(this,a),a.cluster===!0&&(a.cluster={}),a.cluster.iconCreateFunction=new c.IconCreateFunction(a.cluster.clusterIcon),L.Util.setOptions(this,a.cluster),a.clustered=a.cluster.iconCreateFunction("getInfo"),delete a.cluster,this._markercluster=L.MarkerClusterGroup.prototype.initialize.call(this),this._currentShownBounds=null,this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._queue=[],this.L=L.npmap.layer[a.type](a),b=setInterval(function(){c.L._loaded&&(clearInterval(b),c.addLayer(c.L),c.fire("ready"),c.readyFired=!0,c._loaded=!0)},0),this},onAdd:function(a){this._map=a,this._addAttribution(),this.options.zoomToBounds&&this.L.on("ready",function(){a.fitBounds(this.getBounds())}),L.MarkerClusterGroup.prototype.onAdd.call(this,a)},onRemove:function(a){this._removeAttribution(),L.MarkerClusterGroup.prototype.onRemove.call(this,a),delete this._map},_addAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.addAttribution(a)},_removeAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(a)},IconCreateFunction:function(a){function b(){var a=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style"),c="";b.type="text/css",c+=".leaflet-cluster-anim .leaflet-marker-icon, .leaflet-cluster-anim .leaflet-marker-shadow {",c+="-webkit-transition: -webkit-transform 0.2s ease-out, opacity 0.2s ease-in;",c+="-moz-transition: -moz-transform 0.2s ease-out, opacity 0.2s ease-in;",c+="-o-transition: -o-transform 0.2s ease-out, opacity 0.2s ease-in;",c+="transition: transform 0.2s ease-out, opacity 0.2s ease-in;",c+="}";for(var e=0;e<i.length;e++){var f=d(i[e]);for(var g in f)c+=".marker-cluster-custom-"+i[e].maxNodes.toString()+" "+("main"===g?"":g)+" {"+f[g]+"}\n"}b.styleSheet?b.styleSheet.cssText=c:b.appendChild(document.createTextNode(c)),a.appendChild(b)}function c(a){if("[object Array]"!==Object.prototype.toString.call(a)&&(a=f(a)),a){var b=(299*a[0]+587*a[1]+144*a[2])/1e3;return b>127?"#000":"#fff"}return!1}function d(a){function b(a){var b=[];for(var c in a)b.push(c+": "+a[c]+"; ");return b.join("")}function c(a,b){var c={};for(var d in a)c[d]=b(a[d]);return c}var d={main:{"background-clip":"padding-box",background:g("rgba("+f(a.color)[0]+", "+f(a.color)[1]+", "+f(a.color)[2]+", 0.4)"),"border-radius":.5*(a.size+a.outerRing)+"px"},div:{background:g("rgba("+f(a.color)[0]+", "+f(a.color)[1]+", "+f(a.color)[2]+", 0.9)"),"border-radius":a.size/2+"px",height:a.size+"px","margin-left":a.outerRing/2+"px","margin-top":a.outerRing/2+"px","text-align":"center",width:a.size+"px"},span:{color:"rgb("+f(a.fontColor)[0]+", "+f(a.fontColor)[1]+", "+f(a.fontColor)[2]+")",display:"block",font:'12px Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height":a.size+"px"}};return c(d,b)}function e(a){if("getInfo"===a)return i;for(var b,c,d=a.getChildCount(),e=0;e<i.length;e++){var f=i[e];if(d<=f.maxNodes){b="marker-cluster-custom-"+f.maxNodes.toString(),c=f.size+f.outerRing;break}}return new L.DivIcon({className:b,html:"<div><span>"+d+"</span></div>",iconSize:new L.Point(c,c)})}function f(a){var b=!1;return"string"==typeof a&&(a=a.replace("#",""),3===a.length&&(a=a.replace(/(.)(.)(.)/g,"$1$1$2$2$3$3")),a.match(/[\da-fA-F]{6}$/)&&(b=[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)])),b}function g(a){var b,c=!1,d="rgba(0,0,0,0.1)",e=document.createElement("div");try{e.style.color=d,"rgba"===e.style.color.substr(0,4)&&(c=!0)}catch(a){}return a?c?a:(b=a.replace(/^rgba\(/g,"rgb(,").replace(")","").split(","),b[1]=Math.floor(parseInt(b[1],10)+255*(1-parseFloat(b[4],10))),b[2]=Math.floor(parseInt(b[2],10)+255*(1-parseFloat(b[4],10))),b[3]=Math.floor(parseInt(b[3],10)+255*(1-parseFloat(b[4],10))),b[1]>255&&(b[1]=255),b[2]>255&&(b[2]=255),b[3]>255&&(b[3]=255),b=b.slice(0,4).join(",").replace("(,","(")+")"):c}function h(a){for(var b=0;b<i.length;b++)i[b].name&&a[i[b].name]&&(L.Util.extend(i[b],a[i[b].name]),!a[i[b].name].fontColor&&a[i[b].name].color&&(i[b].fontColor=c(f(a[i[b].name].color))))}var i=[{color:"#000",fontColor:"#fff",maxNodes:9,name:"small",outerRing:22,size:20},{color:"#000",fontColor:"#fff",maxNodes:99,name:"medium",outerRing:24,size:35},{color:"#000",fontColor:"#fff",maxNodes:1/0,name:"large",outerRing:24,size:50}];return a&&("string"==typeof a?h({small:{color:a},medium:{color:a},large:{color:a}}):"[object Object]"===Object.prototype.toString.call(a)?h(a):"[object Array]"===Object.prototype.toString.call(a)&&(i=a)),b(),e}});b.exports=function(a){return new d(a)}},{"leaflet.markercluster":47}],91:[function(a,b,c){"use strict";var d=a("csv2geojson"),e=a("../util/util"),f=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b=this;if(L.Util.setOptions(this,this._toLeaflet(a)),"string"==typeof a.data)return b._create(a,a.data),this;var c=a.url;e.strict(c,"string"),e.loadFile(c,"text",function(c){c?b._create(a,c):b.fire("error",{message:"There was an error loading the CSV file."})})},_create:function(a,b){var c=this;d.csv2geojson(b,{},function(b,d){if(b){var e={message:b};c.fire("error",e),c.errorFired=e}else L.GeoJSON.prototype.initialize.call(c,d,a),c.fire("ready"),c.readyFired=!0,c._loaded=!0;return c})}});b.exports=function(a){return a=a||{},a.type||(a.type="csv"),a.cluster?L.npmap.layer._cluster(a):new f(a)}},{"../mixin/geojson":102,"../util/util":117,csv2geojson:9}],92:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){if(L.Util.setOptions(this,this._toLeaflet(a)),"object"==typeof a.data)this._create(a,a.data);else if("string"==typeof a.url){var b=this,c=a.url;d.loadFile(c,"json",function(c){if(c)b._create(a,c);else{var d={message:"There was an error loading the GeoJSON file."};b.fire("error",d),b.errorFired=d}})}else this._create(a)},_create:function(a,b){var c=this;try{L.GeoJSON.prototype.initialize.call(c,b,a),c.fire("ready"),c.readyFired=!0,c._loaded=!0}catch(a){var d={message:"The response was not a valid GeoJSON object."};c.fire("error",d),c.errorFired=d}return c}});b.exports=function(a){return a=a||{},a.type||(a.type="geojson"),a.cluster?L.npmap.layer._cluster(a):new e(a)}},{"../mixin/geojson":102,"../util/util":117}],93:[function(a,b,c){"use strict";var d=a("reqwest"),e=a("../util/util"),f=L.GeoJSON.extend({includes:[a("../mixin/geojson")],options:{branch:"master"},initialize:function(a){var b=this,c=e.supportsCors();if(L.Util.setOptions(this,this._toLeaflet(a)),"http:"===window.location.protocol&&window.attachEvent&&!window.addEventListener){var f={message:"The data cannot load from GitHub because you are using an old browser."};b.fire("error",f),b.errorFired=f}else"object"==typeof a.data?this._create(a,a.data):(e.strict(a.path,"string"),e.strict(a.repo,"string"),e.strict(a.user,"string"),d({crossOrigin:"yes"===c,error:function(a){var c=L.extend(a,{message:"There was an error loading the data from GitHub."});b.fire("error",c),b.errorFired=c},success:function(c){var d=c.content||c.data.content;b._create(a,JSON.parse(window.atob(d.replace(/\s/g,""))))},type:"json"+("yes"===c?"":"p"),url:"https://api.github.com/repos/"+a.user+"/"+a.repo+"/contents/"+a.path+"?ref="+a.branch+("yes"===c?"":"?callback=?")}))},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,b,a),this.fire("ready"),this.readyFired=!0,this._loaded=!0,this}});b.exports=function(a){return a=a||{},a.type||(a.type="github"),a.cluster?L.npmap.layer._cluster(a):new f(a)}},{"../mixin/geojson":102,"../util/util":117,reqwest:53}],94:[function(a,b,c){"use strict";var d=a("@mapbox/togeojson"),e=a("../util/util"),f=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b=this;if(L.Util.setOptions(this,this._toLeaflet(a)),"string"==typeof a.data)return b._create(a,a.data),this;var c=a.url;e.strict(c,"string"),e.loadFile(c,"xml",function(c){if(c)b._create(a,c);else{var d={message:"There was an error loading the KML file."};b.fire("error",d),b.errorFired=d}})},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,d.kml((new DOMParser).parseFromString(b,"text/xml")),a),this.fire("ready"),this.readyFired=!0,this._loaded=!0,this}});b.exports=function(a){return a=a||{},a.type||(a.type="kml"),a.cluster?L.npmap.layer._cluster(a):new f(a)}},{"../mixin/geojson":102,"../util/util":117,"@mapbox/togeojson":5}],95:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=a("reqwest"),f=a("../util/util"),g=L.TileLayer.extend({_formatPattern:/\.((?:png|jpg)\d*)(?=$|\?)/,includes:[a("../mixin/grid")],options:{accessToken:function(){return d&&d.mapbox&&d.mapbox.access_token?d.mapbox.access_token:null}(),errorTileUrl:L.Util.emptyImageUrl,format:"png",subdomains:["a","b","c","d"]},statics:{FORMATS:["jpg","jpg70","jpg80","jpg90","png","png32","png64","png128","png256"]},initialize:function(a){var b;if(!a.id&&!a.tileJson)throw new Error('Mapbox layers require either an "id" or a "tileJson" property.');a.format&&f.strictOneOf(a.format,g.FORMATS),b=a.tileJson||a.id,L.Util.setOptions(this,a),L.TileLayer.prototype.initialize.call(this,void 0,a),this._hasInteractivity=!1,this._loadTileJson(b)},getTileUrl:function(a){var b=this.options.tiles,c=L.Util.template(b[Math.floor(Math.abs(a.x+a.y)%b.length)],a);return c?c.replace(this._formatPattern,(L.Browser.retina?"@2x":"")+"."+this.options.format):c},onAdd:function(a){this._map=a,L.TileLayer.prototype.onAdd.call(this,this._map)},onRemove:function(){L.TileLayer.prototype.onRemove.call(this,this._map),delete this._map},_getGridData:function(a,b){var c=this;c._getTileGrid(c._getTileGridUrl(a),a,function(a,d){b("loading"===a?{layer:c,results:"loading"}:d?{layer:c,results:[d]}:{layer:c,results:null})})},_loadTileJson:function(a){if("string"==typeof a){var b=this;e({crossOrigin:!0,error:function(a){var c=L.extend(a,{message:"There was an error loading the data from Mapbox."});b.fire("error",c),b.errorFired=c},success:function(a){b._setTileJson(a)},type:"json",url:"https:"===window.location.protocol?"https://api.mapbox.com/v4/"+a+".json?access_token="+b.options.accessToken+"&secure=1":"http://a.tiles.mapbox.com/v4/"+a+".json?access_token="+b.options.accessToken})}else"object"==typeof a&&this._setTileJson(a)},_setTileJson:function(a){var b,c=this;return f.strict(a,"object"),b={attribution:function(){return c.options.attribution?c.options.attribution:a.attribution?a.attribution:null}(),bounds:a.bounds?this._toLeafletBounds(a.bounds):null,grids:a.grids?a.grids:null,maxZoom:a.maxzoom,minZoom:a.minzoom,tiles:a.tiles,tms:"tms"===a.scheme},"undefined"==typeof this.options.attribution&&(b.attribution=a.attribution),this.options.clickable!==!1&&(this._hasInteractivity="object"==typeof a.grids),"undefined"==typeof this.options.maxZoom&&(b.maxZoom=a.maxzoom),"undefined"==typeof this.options.minZoom&&(b.minZoom=a.minzoom),this.options.format=this.options.format||a.tiles[0].match(this._formatPattern)[1],L.extend(this.options,b),this.tileJson=a,this.redraw(),c.fire("ready"),c.readyFired=!0,this},_toLeafletBounds:function(a){return new L.LatLngBounds([[a[1],a[0]],[a[3],a[2]]])},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});b.exports=function(a){return a=a||{},a.type||(a.type="mapbox"),new g(a)}},{"../../keys.json":2,"../mixin/grid":103,"../util/util":117,reqwest:53}],96:[function(a,b,c){"use strict";var d=a("reqwest"),e=a("../util/util"),f=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b,c=this,f=e.supportsCors();return a.minutesAgo&&(b=new Date(new Date-6e4*a.minutesAgo).toISOString().slice(0,-5)+"-0000"),e.strict(a.id,"string"),L.Util.setOptions(this,this._toLeaflet(a)),d({crossOrigin:"yes"===f,success:function(a){var b,d=a&&(a.response||a.data&&a.data.response);if(d)if(d.feedMessageResponse&&d.feedMessageResponse.messages&&d.feedMessageResponse.messages.message){var e={features:[],type:"FeatureCollection"},f=d.feedMessageResponse.messages.message;L.Util.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++)b=f[g],e.features.push({geometry:{coordinates:[b.longitude,b.latitude],type:"Point"},properties:b,type:"Feature"});if(e.features.length)c._create(c.options,e);else{var h;b="The SPOT service returned invalid data.",h={message:b},c.fire("error",h),c.errorFired=h,c._map&&c._map.notify.danger(b)}}else b="The SPOT service returned the following error message: "+d.errors.error.text,c.fire("error",{message:b}),c._map&&c._map.notify.danger(b);else b="The SPOT service is unresponsive.",c.fire("error",{message:b}),c._map&&c._map.notify.danger(b)},type:"json"+("yes"===f?"":"p"),url:"https://api.findmespot.com/spot-main-web/consumer/rest-api/2.0/public/feed/"+a.id+(a.latest?"/latest":"/message")+"?dir=DESC&sort=timeInMili"+(a.password?"&feedPassword="+a.password:"")+(b?"&startDate="+b:"")}),this},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,b,a),this.fire("ready"),this.readyFired=!0,this._loaded=!0,this}});b.exports=function(a){return a=a||{},a.type||(a.type="spot"),a.cluster?L.npmap.layer._cluster(a):new f(a)}},{"../mixin/geojson":102,"../util/util":117,reqwest:53}],97:[function(a,b,c){"use strict";var d,e=a("../util/util");d=L.TileLayer.extend({options:{errorTileUrl:L.Util.emptyImageUrl},initialize:function(a){return e.strict(a.url,"string"),L.Browser.retina&&a.retinaId?a.url=a.url.replace("{{retina}}",a.retinaId):a.url=a.url.replace("{{retina}}",""),a.supportsSsl?a.url=a.url.replace("{{protocol}}","https://"):a.url=a.url.replace("{{protocol}}","http://"),L.Util.setOptions(this,a),L.TileLayer.prototype.initialize.call(this,a.url,a),this.fire("ready"),this.readyFired=!0,this}}),b.exports=function(a){return a=a||{},a.type||(a.type="tiled"),new d(a)}},{"../util/util":117}],98:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.TileLayer.WMS.extend({initialize:function(a){return d.strict(a.layers,"string"),d.strict(a.url,"string"),L.TileLayer.WMS.prototype.initialize.call(this,a.url,a),this.fire("ready"),this.readyFired=!0,this}});b.exports=function(a){return a=a||{},a.type||(a.type="wms"),new e(a)}},{"../util/util":117}],99:[function(a,b,c){"use strict";var d=a("../util/util"),e=L.TileLayer.extend({options:{noWrap:!0,tileGroupPrefix:"TileGroup",tilesPerTileGroup:256,tolerance:1},initialize:function(a,b){L.TileLayer.prototype.initialize.call(this,a,b),d.strict(b.height,"number"),d.strict(b.url,"string"),d.strict(b.width,"number")},beforeAdd:function(a){var b,c,d,e,f,g,h=L.point(this.options.width,this.options.height);for(this._imageSize=[h],this._gridSize=[this._getGridSize(h)];h.x>this.options.tileSize||h.y>this.options.tileSize;)h=h.divideBy(2).floor(),this._imageSize.push(h),this._gridSize.push(this._getGridSize(h));this._imageSize.reverse(),this._gridSize.reverse(),b=this._gridSize.length-1,this.options.maxNativeZoom=b,e=this._gridSize[b],c=e.x*this.options.tileSize,d=e.y*this.options.tileSize,f=a.unproject([0,0],b),g=a.unproject([c,d],b),this.options.bounds=new L.LatLngBounds([f,g]),L.TileLayer.prototype.beforeAdd.call(this,a)},onAdd:function(a){var b=a.getSize(),c=this._getBestFitZoom(b),d=this._imageSize[c],e=a.options.crs.pointToLatLng(new L.Point(d.x/2,(d.y+("block"===a.getContainer().parentNode.parentNode.childNodes[0].style.display?25:0))/2),c);L.TileLayer.prototype.onAdd.call(this,a),a.options.center=e,a.options.maxZoom=this.options.maxNativeZoom,a.options.zoom=c,a.setView(e,c,!1),this.fire("ready"),this.readyFired=!0},getBounds:function(){return this.options.bounds},getTileUrl:function(a){return this.options.g=this.options.tileGroupPrefix+this._getTileGroup(a),L.TileLayer.prototype.getTileUrl.call(this,a)},_addTile:function(a,b){var c,d=this._imageSize[this._getZoomForUrl()],e=this._gridSize[this._getZoomForUrl()],f=L.GridLayer.prototype.getTileSize.call(this),g=L.TileLayer.prototype.getTileSize.call(this),h=this._tileCoordsToKey(a),i=L.point(d.x%f.x,d.y%f.y).unscaleBy(f);L.TileLayer.prototype._addTile.call(this,a,b),c=this._tiles[h].el,d.x%f.x>0&&a.x===e.x-1&&(c.style.width=g.scaleBy(i).x+"px"),d.y%f.y>0&&a.y===e.y-1&&(c.style.height=g.scaleBy(i).y+"px")},_getBestFitZoom:function(a){for(var b,c=this.options.tolerance,d=this._imageSize.length-1;d;){if(b=this._imageSize[d],b.x*c<a.x&&b.y*c<a.y)return d;d--}return d},_getGridSize:function(a){var b=this.options.tileSize;return L.point(Math.ceil(a.x/b),Math.ceil(a.y/b))},_getTileGroup:function(a){for(var b,c=this._getZoomForUrl(),d=0,e=0;e<c;e++)b=this._gridSize[e],d+=b.x*b.y;return d+=a.y*this._gridSize[c].x+a.x,Math.floor(d/this.options.tilesPerTileGroup)}});b.exports=function(a){return a=a||{},a.type||(a.type="zoomify"),new e(a.url,a)}},{"../util/util":117}],100:[function(a,b,c){"use strict";var d,e=a("./preset/baselayers.json"),f=a("./preset/colors.json"),g=a("humane-js"),h=a("nanobar"),i=a("./preset/overlays.json"),j=a("./util/util");a("./popup.js"),function(){var a=f.gold;L.Circle.mergeOptions(a),L.CircleMarker.mergeOptions(a),L.Control.Attribution.mergeOptions({prefix:'<a href="https://www.nps.gov/npmap/disclaimer/" target="_blank">Disclaimer</a>'}),L.Map.addInitHook(function(){function a(){var a=j.getOuterDimensions(d.childNodes[2]).width,e=j.getChildElementsByClassName(b,"leaflet-control-overview")[0];a?a+=15:a=10,e&&!j.isHidden(e)?c.style["margin-right"]=j.getOuterDimensions(e).width+"px":c.style["margin-right"]=0,c.style["max-width"]=j.getOuterDimensions(b).width-a+"px"}var b=this.getContainer(),c=j.getChildElementsByClassName(b,"leaflet-control-attribution")[0],d=j.getChildElementsByClassName(b,"leaflet-control-container")[0],e=this;this.options.attributionControl&&(this.attributionControl._update=function(){var a=[],b=[];for(var c in this._attributions)if(this._attributions[c]>0){var d=-1;if(c){for(var f=0;f<a.length;f++)if(a[f]===c){d=f;break}d===-1&&a.push(c)}}this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(" | ")),this._container.innerHTML=b.join(" | "),"function"==typeof e._updateImproveLinks&&e._updateImproveLinks()},this.on("resize",a),a()),"function"==typeof e._updateImproveLinks&&e.on("moveend",e._updateImproveLinks)}),L.Polygon.mergeOptions(a),L.Polyline.mergeOptions({color:a.color,opacity:a.opacity,weight:a.weight})}(),d=L.Map.extend({options:{bounceAtZoomLimits:!1,wheelPxPerZoomLevel:120,worldCopyJump:!0,zoomDelta:1,zoomSnap:1},initialize:function(a){var b=!1,c=L.DomUtil.create("div","npmap-container"),d=L.DomUtil.create("div","npmap-map"),e=L.DomUtil.create("div","npmap-map-wrapper"),f=this,i=L.DomUtil.create("div","npmap-modules"),k=L.DomUtil.create("div","npmap"+(L.Browser.ie6||L.Browser.ie7?" npmap-oldie":"")+(L.Browser.retina?" npmap-retina":"")),l=L.DomUtil.create("div","npmap-toolbar"),m=L.DomUtil.create("ul","left"),n=L.DomUtil.create("ul","right"),o=!1;if(a=f._toLeaflet(a),L.Util.setOptions(this,a),a.div.insertBefore(k,a.div.hasChildNodes()?a.div.childNodes[0]:null),k.appendChild(i),k.appendChild(c),l.appendChild(m),l.appendChild(n),c.appendChild(l),c.appendChild(e),e.appendChild(d),a.div=d,a.zoomControl=!1,L.Map.prototype.initialize.call(f,a.div,a),f._addEvents(f,a),f._controllingCursor="map",f._controllingInteractivity="map",f._defaultCursor=f.getContainer().style.cursor,f.on("autopanstart",function(){f._setCursor("")}),f.notify=g.create({baseCls:"humane-bootstrap",container:d}),f.notify.danger=f.notify.spawn({addnCls:"humane-bootstrap-danger"}),f.notify.info=f.notify.spawn({addnCls:"humane-bootstrap-info"}),f.notify.success=f.notify.spawn({addnCls:"humane-bootstrap-success"}),f.notify.warning=f.notify.spawn({addnCls:"humane-bootstrap-warning"}),f._progress=new h({bg:"#d29700",id:"npmap-progress",target:d}),f._loaded||f.setView(a.center,a.zoom),a.baseLayers.length){var p,q,r=[];for(q=0;q<a.baseLayers.length;q++)p=a.baseLayers[q],"zoomify"===p.type&&r.push(p);if(r.length){for(o=!0,q=0;q<r.length;q++)if(p=r[q],p.visible||"undefined"==typeof p.visible){p.visible=!0,p.L=L.npmap.layer.zoomify(p),f._addEvents(p.L,p),p.L.addTo(f);break}}else for(q=0;q<a.baseLayers.length;q++)p=a.baseLayers[q],p.zIndex=0,b||!p.visible&&"undefined"!=typeof p.visible?p.visible=!1:(p.visible=!0,b=!0,"arcgisserver"===p.type?p.L=f._createArcGisServerLayer(p):p.L=L.npmap.layer[p.type](p),f._addEvents(p.L,p),f.addLayer(p.L))}if(!o&&a.overlays.length)for(var s=1,t=0;t<a.overlays.length;t++){var u=a.overlays[t];if("string"==typeof u);else{if("zoomify"===u.type)throw new Error('Zoomify layers can only be added in the "baseLayers" config property.');if(u.visible||"undefined"==typeof u.visible){if(u.visible=!0,u.zIndex=s,u.preset)switch(u.preset){case"nps-places-pois":u.L=L.npmap.preset.places.pois(u)}else"arcgisserver"===u.type?u.L=f._createArcGisServerLayer(u):u.L=L.npmap.layer[u.type](u);f._addEvents(u.L,u),f.addLayer(u.L),s++}else u.visible=!1}}return j.checkNpsNetwork(function(a){f._onNpsNetwork=a,"function"==typeof f._updateImproveLinks&&f._updateImproveLinks()}),f._initializeModules(),f._setupPopup(),f._setupTooltip(),this},_addEvents:function(a,b){if(b.events&&b.events.length)for(var c=0;c<b.events.length;c++){var d=b.events[c],e=d.context||null;d.single===!0?a.once(d.type,d.fn,e):a.on(d.type,d.fn,e),"error"===d.type&&a.errorFired?a.fire("error",a.errorFired):"load"===d.type&&a._loaded?a.fire("load"):"ready"===d.type&&a.readyFired&&a.fire("ready")}},_createArcGisServerLayer:function(a){return L.npmap.layer[a.type][a.tiled===!0?"tiled":"dynamic"](a)},_initializeModules:function(){if(this.options&&this.options.modules&&L.Util.isArray(this.options.modules)&&this.options.modules.length){var a,b,c=null,d=this,e=this.options.modules,f=0;for(this._divWrapper=this._container.parentNode.parentNode,this._divModules=j.getChildElementsByClassName(this._divWrapper.parentNode.parentNode,"npmap-modules")[0],this._divModuleButtons=L.DomUtil.create("div","npmap-modules-buttons",this._container.parentNode),this._buttonCloseModules=L.DomUtil.create("button","npmap-modules-buttons-button",this._divModuleButtons),this._buttonCloseModules.style.backgroundImage="url("+window.L.Icon.Default.imagePath+"/font-awesome/times"+(L.Browser.retina?"@2x":"")+".png)",this._buttonCloseModules.setAttribute("alt","Close"),L.DomEvent.addListener(this._buttonCloseModules,"click",d.closeModules,this),b=0;b<e.length;b++){var g,h,i,k=L.DomUtil.create("div","module",this._divModules),l=L.DomUtil.create("h2","title",k),m=L.DomUtil.create("div","content",k),n=e[b];"custom"!==n.type&&(this.options.modules[b]=n=L.npmap.module[n.type](n).addTo(this)),g=n.content,h=n.icon,i=l.innerHTML=n.title,"string"==typeof g?m.innerHTML=g:"nodeType"in g&&m.appendChild(g),a=L.DomUtil.create("button","npmap-modules-buttons-button",this._divModuleButtons),a.id="npmap-modules-buttons_"+i.replace(/ /g,"_"),a.setAttribute("alt",i),a.style.backgroundImage="url("+window.L.Icon.Default.imagePath+"/font-awesome/"+h+(L.Browser.retina?"@2x":"")+".png)",k.id="npmap-module_"+i.replace(/ /g,"_"),"number"==typeof n.width&&n.width>f&&(f=n.width),L.DomEvent.addListener(a,"click",function(){d.showModule(this.id.replace("npmap-modules-buttons_",""))}),c||n.visible!==!0||(c=i)}if(0!==f&&(this._divModules.style.width=f+"px"),c)this.showModule(c);else for(b=1;b<this._divModuleButtons.childNodes.length;b++)a=this._divModuleButtons.childNodes[b],a.style.display="inline-block"}},_setCursor:function(a){this._container.style.cursor=a},_setupPopup:function(){function a(){k.off("click",c).off("dragstart",d).off("movestart",d).off("zoomstart",d),g&&(k._progress.go(100),k._setCursor(""))}function b(b){var h,l=[];e=!1,f=!1,k.on("click",c).on("dragstart",d).on("movestart",d).on("zoomstart",d);for(var m in k._layers)h=k._layers[m],"object"!=typeof h.options||"undefined"!=typeof h.options.popup&&h.options.popup===!1||"function"!=typeof h._handleClick||h._hasInteractivity===!1||l.push(h);if(l.length){var n,o,p=0,q=0,r=b.latlng.wrap(),s=[];for(g=!1,n=0;n<l.length;n++)h=l[n],h.options&&"arcgisserver"===h.options.type&&(g=!0),h._handleClick(r,function(a){a&&s.push(a),p++});g&&(k._progress.go(1),k._setCursor("wait")),o=setInterval(function(){if(q++,g&&k._progress.go(q),e||f)clearInterval(o),a();else if((l.length===p||q>98)&&(clearInterval(o),a(),q>98&&k.notify.danger("One or more servers failed to respond."),s.length)){for(var b=[],c=0;c<s.length;c++){var d=s[c];"undefined"!=typeof d.results?d.results&&"loading"!==d.results&&b.push(d):b.push(d)}if(b.length){var h=L.npmap.popup({autoPanPaddingTopLeft:j._getAutoPanPaddingTopLeft(k.getContainer()),maxHeight:i?j._getAvailableVerticalSpace(k)-84:null,maxWidth:i?j._getAvailableHorizontalSpace(k)-77:null});h.setContent(h._handleResults(b,k.options.popup)).setLatLng(r).openOn(k)}}},100)}}function c(){e=!0}function d(){f=!0}var e,f,g,h=0,i=!0,k=this;"undefined"!=typeof k.options.detectAvailablePopupSpace&&k.options.detectAvailablePopupSpace===!1&&(i=!1),k.on("dblclick",function(){h++}),k.on("click",function(a){h=0,"map"===k._controllingInteractivity&&setTimeout(function(){h||b(a)},200)})},_setupTooltip:function(){function a(){if("map"===e._controllingCursor&&d(),e._tooltips.length){var a,b,c=!1,f=g._container.childNodes,h="";if(f.length){var i=[];for(a=0;a<f.length;a++){for(var k=f[a],l=!0,m=0;m<e._tooltips.length;m++)if(b=e._tooltips[m],b.added&&b.layerId===parseInt(k.id.replace("tooltip-",""),10)){l=!1;break}l&&i.push(k)}if(i.length){for(a=0;a<i.length;a++){var n=i[a];n.parentNode.removeChild(n)}c=!0}h=g.getHtml()}for(a=0;a<e._tooltips.length;a++)b=e._tooltips[a],b.added||(c=!0,h+='<div id="tooltip-'+b.layerId+'">'+j.unescapeHtml(b.html)+"</div>",b.added=!0);g.isVisible()?(c&&g.setHtml(h),g.setPosition(e._cursorEvent.containerPoint)):g.show(e._cursorEvent.containerPoint,h)}else g.hide(),g.setHtml("")}function b(a){var b,c=[];for(b=0;b<f.length;b++)f[b]===a&&c.push(a);if(c.length)for(b=0;b<c.length;b++)f.splice(f.indexOf(c[b]),1)}function c(a){var b,c=[];for(b=0;b<e._tooltips.length;b++){var d=e._tooltips[b];d.layerId===a&&c.push(d)}if(c.length)for(b=0;b<c.length;b++)e._tooltips.splice(e._tooltips.indexOf(c[b]),1)}function d(){f.length?e._setCursor("pointer"):"wait"!==e.getContainer().style.cursor&&e._setCursor("")}var e=this,f=[],g=e.infoboxControl?e.infoboxControl:L.npmap.tooltip({map:e});e._tooltips=[],L.DomEvent.on(j.getChildElementsByClassName(e.getContainer(),"leaflet-popup-pane")[0],"mousemove",function(a){L.DomEvent.stopPropagation(a),g.hide()}),e.on("mousemove",function(d){if(e._cursorEvent=d,"map"===e._controllingCursor){a();for(var g in e._layers){var h=e._layers[g];"function"==typeof h._handleMousemove&&h._hasInteractivity!==!1&&h._handleMousemove(e._cursorEvent.latlng.wrap(),function(d){if("loading"!==d.results){var g=d.layer,h=g._leaflet_id;if(b(h),c(h),d.results&&(f.push(h),g.options&&g.options.tooltip))for(var i=0;i<d.results.length;i++){var k,l=d.results[i];"function"==typeof g.options.tooltip?k=j.handlebars(g.options.tooltip(l)):"string"==typeof g.options.tooltip&&(k=j.unescapeHtml(j.handlebars(g.options.tooltip,l))),k&&e._tooltips.indexOf(k)===-1&&e._tooltips.push({html:k,layerId:h})}a()}})}}}),e.on("mouseout",function(){g.hide()})},_toLeaflet:function(a){if(!a.div)throw new Error("The map config object must have a div property");if("string"!=typeof a.div&&"object"!=typeof a.div)throw new Error("The map config object must be either a string or object");if(a.baseLayers===!1||L.Util.isArray(a.baseLayers)&&!a.baseLayers.length?a.baseLayers=[]:a.baseLayers=function(){var b=!1;if(a.baseLayers&&L.Util.isArray(a.baseLayers)&&a.baseLayers.length)for(var c=0;c<a.baseLayers.length;c++){var d=a.baseLayers[c];if("string"==typeof d){var f=d.split("-");d=f[1]?j.clone(e[f[0]][f[1]]):j.clone(e[f])}d.visible===!0||"undefined"==typeof d.visible?b?d.visible=!1:(d.visible=!0,b=!0):d.visible=!1,d.zIndex=0,a.baseLayers[c]=d}if(b)return a.baseLayers;var g=j.clone(e.nps.parkTiles);return g.visible=!0,g.zIndex=0,[g]}(),a.center=function(){var b=a.center;return b?new L.LatLng(b.lat,b.lng):new L.LatLng(39.06,-96.02)}(),"string"==typeof a.div&&(a.div=document.getElementById(a.div)),a.layers&&L.Util.isArray(a.layers)&&a.layers.length){a.overlays=a.layers;for(var b=0;b<a.overlays.length;b++){var c=a.overlays[b];"string"==typeof c&&(c=a.overlays[b]=j.clone(i[c]))}}else a.overlays&&L.Util.isArray(a.overlays)||(a.overlays=[]);return"number"!=typeof a.maxZoom&&(a.maxZoom=19),0!==a.baseLayers.length&&a.maxZoom>a.baseLayers[0].maxZoom&&(a.maxZoom=a.baseLayers[0].maxZoom),delete a.layers,a.zoom="number"==typeof a.zoom?a.zoom:4,0!==a.baseLayers.length&&(a.baseLayers[0].minZoom>a.zoom?a.zoom=a.baseLayers[0].minZoom:a.baseLayers[0].maxZoom<a.zoom&&(a.zoom=a.baseLayers[0].maxZoom)),a},_updateImproveLinks:function(){if(this.attributionControl){var a=j.getChildElementsByClassName(this.attributionControl._container,"improve-park-tiles");if(a&&a.length){var b=this.getCenter(),c=a[0],d=b.lat.toFixed(5),e=b.lng.toFixed(5),f=this.getZoom();c.href=this._onNpsNetwork?"http://insidemaps.nps.gov/places/editor/#background=mapbox-satellite&map="+f+"/"+e+"/"+d+"&overlays=park-tiles-overlay":"https://www.nps.gov/npmap/tools/park-tiles/improve/#"+f+"/"+d+"/"+e}}},closeModules:function(){var a=this._divModuleButtons.childNodes;this._buttonCloseModules.style.display="none",this._divWrapper.style.left="0",this._divModules.style.display="none";for(var b=1;b<a.length;b++){var c=a[b];L.DomUtil.removeClass(c,"active"),c.style.display="inline-block"}this.invalidateSize()},showModule:function(a){var b,c=this._divModules,d=c.childNodes,e=this.options.modules;for(a=a.replace(/_/g," "),b=0;b<e.length;b++){var f=e[b],g="none";f.title===a&&(g="block"),f.visible="block"===g,d[b].style.display=g}for(c.style.display="block",this._divWrapper.style.left=j.getOuterDimensions(c).width+"px",this.invalidateSize(),b=0;b<this._divModuleButtons.childNodes.length;b++){var h=this._divModuleButtons.childNodes[b];0===b?h.style.display="inline-block":e.length>1?h.style.display="inline-block":h.style.display="none",
h.id.replace("npmap-modules-buttons_","").replace(/_/g," ")===a?L.DomUtil.addClass(h,"active"):L.DomUtil.removeClass(h,"active")}},showModules:function(){var a=this._divModuleButtons.childNodes;this._buttonCloseModules.style.display="inline-block",this._divModules.style.display="block",this._divWrapper.style.left=j.getOuterDimensions(this._divModules).width+"px";for(var b=1;b<a.length;b++)a[b].style.display="inline-block";this.invalidateSize()}}),b.exports=function(a){return new d(a)}},{"./popup.js":106,"./preset/baselayers.json":107,"./preset/colors.json":108,"./preset/overlays.json":109,"./util/util":117,"humane-js":44,nanobar:49}],101:[function(a,b,c){"use strict";var d=a("reqwest");b.exports={_boundsToExtent:function(a){var b=a.getNorthEast(),c=a.getSouthWest();return{spatalReference:{wkid:4326},xmax:b.lng,xmin:c.lng,ymax:b.lat,ymin:c.lat}},_cleanUrl:function(a){return a=L.Util.trim(a),"/"!==a[a.length-1]&&(a+="/"),a},_getMetadata:function(){var a=this;d({success:function(b){if(b.error)a.fire("error",b.error),a.errorFired=b.error;else{var c=b.capabilities;"string"==typeof c&&c.toLowerCase().indexOf("query")===-1&&(a._hasInteractivity=!1),a._metadata=b,a.fire("ready",b),a.readyFired=!0}},type:"jsonp",url:a._serviceUrl+"?f=json"})},_handleClick:function(a,b){var c=this;c.identify(a,function(a){if(a){var d=a.results;if(d&&d.length){for(var e={layer:c,subLayers:[]},f=0;f<d.length;f++){for(var g=null,h=d[f],i=0;i<e.subLayers.length;i++){var j=e.subLayers[i];if(j.name===h.layerName){g=j;break}}g?g.results.push(h.attributes):e.subLayers.push({name:h.layerName,popup:{description:{format:"table"},title:"{{["+h.displayFieldName+"]}}"},results:[h.attributes]})}b(e)}else b(null)}else b(null)})},_updateAttribution:function(){var a=this._map,b=a.getBounds(),c=[],d=a.getZoom();this.options.attribution&&this._map.attributionControl.removeAttribution(this.options.attribution);for(var e=0;e<this._dynamicAttributionData.length;e++)for(var f=this._dynamicAttributionData[e],g=0;g<f.coverageAreas.length;g++){var h=f.coverageAreas[g],i=h.bbox;if(d>=h.zoomMin&&d<=h.zoomMax&&b.intersects(L.latLngBounds(L.latLng(i[0],i[3]),L.latLng(i[2],i[1])))){c.push(f.attribution);break}}c.length&&(this.options.attribution=c.join(", "),a.attributionControl.addAttribution(this.options.attribution))},getLayers:function(){return this._layerParams?this._layerParams.layers.split(":")[1]:this.options.layers},identify:function(a,b){var c=this._map,e=c.getSize(),f={f:"json",geometry:JSON.stringify({spatialReference:{wkid:4326},x:a.lng,y:a.lat}),geometryType:"esriGeometryPoint",imageDisplay:e.x+","+e.y+",96",layers:"visible:"+this.getLayers(),mapExtent:JSON.stringify(this._boundsToExtent(c.getBounds())),returnGeometry:!1,sr:"4326",tolerance:6};d({data:f,error:function(){b(null)},success:function(a){b(a)},type:"jsonp",url:this._serviceUrl+"identify"})}}},{reqwest:53}],102:[function(a,b,c){"use strict";var d=a("../util/topojson"),e=a("../util/util");b.exports={_types:{LineString:"line",MultiLineString:"line",Point:"point",Polygon:"polygon"},addData:function(a){if(/\btopology\b/i.test(a.type))for(var b in a.objects){var c=d.feature(a,a.objects[b]);this._checkGeometryType(c),L.GeoJSON.prototype.addData.call(this,c)}else this._checkGeometryType(a),L.GeoJSON.prototype.addData.call(this,a)},onAdd:function(a){this._map=a,this._addAttribution(),this.options.zoomToBounds&&this.on("ready",function(){a.fitBounds(this.getBounds())}),L.GeoJSON.prototype.onAdd.call(this,a)},onRemove:function(a){delete this._map,this._removeAttribution(),L.GeoJSON.prototype.onRemove.call(this,a)},_addAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.addAttribution(a)},_checkGeometryType:function(a){if(this._geometryTypes||(this._geometryTypes=[]),a.geometry&&a.geometry.type){var b=this._types[a.geometry.type];this._geometryTypes.indexOf(b)===-1&&this._geometryTypes.push(b)}},_removeAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(a)},_toLeaflet:function(a){var b,c={fill:"fillColor","fill-opacity":"fillOpacity",stroke:"color","stroke-opacity":"opacity","stroke-width":"weight"};if("undefined"==typeof a.clickable||a.clickable===!0){var d=null,f=!0,g=null;a.onEachFeature=function(b,c){var h=0;c.on("click",function(c){var d=c.target;g||(g=d._map,"undefined"!=typeof g.options.detectAvailablePopupSpace&&g.options.detectAvailablePopupSpace===!1&&(f=!1)),"map"===g._controllingInteractivity?(h=0,setTimeout(function(){if(!h)if(d._popup)d.openPopup();else{var i=g.getContainer(),j=L.npmap.popup({autoPanPaddingTopLeft:e._getAutoPanPaddingTopLeft(i),maxHeight:f?e._getAvailableVerticalSpace(g)-84:null,maxWidth:f?e._getAvailableHorizontalSpace(g)-77:null}),k=b.properties,l=j._resultToHtml(k,a.popup,null,null,g.options.popup);l&&("string"==typeof l&&(l=e.unescapeHtml(l)),"Point"===b.geometry.type?(j.setContent(l),d.bindPopup(j).openPopup()):j.setContent(l).setLatLng(c.latlng.wrap()).openOn(d._map))}},200)):g.fireEvent("click",c)}),c.on("dblclick",function(a){h++,a.containerPoint=a.target._map.latLngToContainerPoint(a.latlng),a.target._map.fireEvent("dblclick",a)}),c.on("mouseout",function(a){if(d){for(var b=null,c=a.target._map._tooltips,e=0;e<c.length;e++){var f=c[e];if(d.layerId===f.layerId){b=e;break}}null!==b&&c.splice(b,1),d=null}}),c.on("mouseover",function(c){var f=a.tooltip;if(f){var g,h=b.properties;if("function"==typeof f?g=f(h):"string"==typeof f&&(g=e.handlebars(f,h)),g){var i=c.target,j={html:g,layerId:i._leaflet_id};i._map._tooltips.push(j),d=j}}})}}return a.pointToLayer=function(b,c){var d,e,f,g={"marker-color":"#000000","marker-size":"medium","marker-library":"maki","marker-symbol":null},h=b.properties;if(d="function"==typeof a.styles?a.styles(h):a.styles,d&&d.point)if(d="function"==typeof d.point?d.point(h):d.point)if("string"==typeof d.iconUrl)g=new L.Icon(d);else{for(e in g)f=d[e],f&&(g[e]=f);if(!d.ignoreFeatureStyles)for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}else{if(!d.ignoreFeatureStyles)for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}else{for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}return new L.Marker(c,L.extend(a,{icon:g,keyboard:!1}))},a.style=function(d){var e=function(){var a=d.geometry.type.toLowerCase();return a.indexOf("line")!==-1?"line":a.indexOf("point")!==-1?"point":a.indexOf("polygon")!==-1?"polygon":void 0}();if("point"!==e){var f,g,h=0,i={};f="object"==typeof d.properties?d.properties:{};for(g in c)"undefined"!=typeof f[g]&&null!==f[g]&&""!==f[g]&&(i[c[g]]=f[g]);if(b="function"==typeof a.styles?a.styles(f):a.styles,b&&(b="function"==typeof b[e]?b[e](f):b[e]))for(g in c)"undefined"!=typeof b[g]&&null!==b[g]&&""!==b[g]&&(i[c[g]]=b[g]);for(g in i){h++;break}if(h)return i}},a}}},{"../util/topojson":116,"../util/util":117}],103:[function(a,b,c){var d=a("reqwest"),e=a("../util/tilemath");b.exports={_cache:{},_getTileCoords:function(a){var b=this._map.getZoom();return{x:e.long2tile(a.lng,b),y:e.lat2tile(a.lat,b),z:b}},_getTileGrid:function(a,b,c){if(this._cache[a]){var e=this._cache[a];if("empty"===e)c(null,null);else{var f=this._getTileGridPoint(b,e);"loading"===e?c("loading",f):c(e,f)}}else{var g=this;g._cache[a]="loading",d({crossOrigin:!0,error:function(){g._cache[a]="empty",c(null,null)},success:function(d){d?(g._cache[a]=d,c(d,g._getTileGridPoint(b,d))):(g._cache[a]="empty",c(null,null))},timeout:2e3,type:"json",url:a})}},_getTileGridPoint:function(a,b){var c=this._map;if(c&&"object"==typeof b){var d=c.project(a.wrap()),e=4,f=256,g=c.options.crs.scale(c.getZoom())/f;return b.data[b.keys[this._utfDecode(b.grid[Math.floor((d.y-(Math.floor(d.y/f)+g)%g*f)/e)].charCodeAt(Math.floor((d.x-(Math.floor(d.x/f)+g)%g*f)/e)))]]}return null},_getTileGridUrl:function(a){var b=this.options.grids,c=this._getTileCoords(a);return L.Util.template(b[Math.floor(Math.abs(c.x+c.y)%b.length)],c)},_handleClick:function(a,b){this._getGridData(a,b)},_handleMousemove:function(a,b){this._getGridData(a,b)},_utfDecode:function(a){return a>=93&&a--,a>=35&&a--,a-32}}},{"../util/tilemath":115,reqwest:53}],104:[function(a,b,c){"use strict";b.exports={addTo:function(a){return this._map=a,this}}},{}],105:[function(a,b,c){"use strict";var d=a("../util/geocode"),e=a("../util/route"),f=a("../util/util");a("../icon/maki");var g=L.Class.extend({options:{visible:!0},includes:[a("../mixin/module")],initialize:function(a){var b=document.createElement("button"),c=document.createElement("button"),d=document.createElement("button"),e=document.createElement("div"),f=this,g=document.createElement("p");return L.Util.setOptions(this,a),g.innerHTML="Search for a location by address or name. Drag stops to reorder.",e.appendChild(g),this._ul=document.createElement("ul"),e.appendChild(this._ul),this._actions=document.createElement("div"),this._actions.className="actions",this._options=document.createElement("div"),this._options.className="clearfix",b.className=d.className="btn btn-link",d.innerHTML="Options",L.DomEvent.addListener(b,"click",function(){this._addLi()},this),this._options.appendChild(b),this._options.appendChild(d),this._actions.appendChild(this._options),this._buttonPrimary=document.createElement("button"),this._buttonPrimary.className="btn btn-primary",this._buttonPrimary.innerHTML=b.innerHTML="Add Stop",L.DomEvent.addListener(this._buttonPrimary,"click",function(){if("Add Stop"===f._buttonPrimary.innerHTML){var a=f._getFirstValue();f._ul.innerHTML="",f._addLi(a),f._addLi()}},this),this._actions.appendChild(this._buttonPrimary),c.className="btn btn-link",c.innerHTML="clear",L.DomEvent.addListener(c,"click",this._clear,this),this._actions.appendChild(c),e.appendChild(this._actions),this._directions=document.createElement("div"),this._directions.className="directions",this._directions.style.display="none",e.appendChild(this._directions),this._disclaimer=document.createElement("p"),this._disclaimer.className="disclaimer",this._disclaimer.innerHTML="DISCLAIMER: These directions are for planning purposes only. While the National Park Service strives to provide the most accurate information possible, please use caution when driving in unfamiliar locations and check directions against the content provided by each Park's website. The National Park Service assumes no responsibility for information provided by NPS partners.",e.appendChild(this._disclaimer),this.content=e,this.icon="car",this.title=this.type="Directions",this.visible=a&&a.visible||!1,this._addLiFirst(),this._addDraggableListeners(),this},_dragSource:null,_icon:{iconAnchor:[13.5,37],iconRetinaUrl:window.L.Icon.Default.imagePath+"/module/directions/stop-{{letter}}@2x.png",iconSize:[27,37],iconUrl:window.L.Icon.Default.imagePath+"/module/directions/stop-{{letter}}.png",popupAnchor:[0,-40]},_letters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_markers:[],_route:[],_styles:[{color:"#818171",opacity:1,weight:6},{color:"#c16b2b",opacity:1,weight:4}],_addDraggableListeners:function(){for(var a=0;a<this._ul.childNodes.length;a++){var b=this._ul.childNodes[a];L.DomEvent.addListener(b,"dragend",this._handleDragEnd,this).addListener(b,"dragenter",this._handleDragEnter,this).addListener(b,"dragleave",this._handleDragLeave,this).addListener(b,"dragover",this._handleDragOver,this).addListener(b,"dragstart",this._handleDragStart,this)}},_addLi:function(a,b){var c="url("+window.L.Icon.Default.imagePath+"/module/directions/times"+(L.Browser.retina?"@2x":"")+".png)",e=document.createElement("button"),f=document.createElement("div"),g=document.createElement("input"),h=document.createElement("label"),i=this._letters[this._ul.childNodes.length],j=document.createElement("li"),k=this;f.className="remove",h.htmlFor="stop-"+i,h.innerHTML=i,j.appendChild(h),j.draggable=!0,g.id="stop-"+i,g.onkeypress=function(a){13===a.keyCode&&g.value&&g.value.length>0&&d.esri(g.value,function(a){if(a&&a.results){var b=a.results[0];b&&(g.value=b.name,b.letter=i,k._addMarker(b),k._markers.length>1&&k.route())}})},g.type="text",a&&(g.value=a),f.appendChild(g),e.className="ir remove",e.innerHTML="Remove stop",L.DomEvent.addListener(e,"click",function(){var a=this.parentNode,b=a.childNodes[0].innerHTML,c=!1,d=a.parentNode;if(d.removeChild(a),0===d.childNodes.length)k._clear();else{if(1===d.childNodes.length){var e=k._getFirstValue();d.innerHTML="",k._addLiFirst(e)}for(var f=0;f<k._markers.length;f++){var g=k._markers[f];if(g._letter===b){c=!0,k._map.removeLayer(g),k._markers.splice(f,1);break}}c&&(k._clearRoute(),k._markers.length>1&&k.route()),k._refreshLetters()}}).addListener(e,"onmouseout",function(){this.style.backgroundImage=c}).addListener(e,"onmouseover",function(){this.style.backgroundImage="url("+window.L.Icon.Default.imagePath+"/module/directions/times-over"+(L.Browser.retina?"@2x":"")+".png)"}),e.style.backgroundImage=c,j.appendChild(f),j.appendChild(e),this._ul.appendChild(j),this._options.style.display="block",this._buttonPrimary.innerHTML="Get Directions",b&&g.focus()},_addLiFirst:function(a){var b=document.createElement("button"),c=document.createElement("div"),e=document.createElement("input"),f=document.createElement("label"),g=document.createElement("li"),h=this;f.htmlFor="stop-A",f.innerHTML="A",g.appendChild(f),e.className="search",e.id="stop-A",e.type="text",e.onkeypress=function(a){13===a.keyCode&&e.value&&e.value.length>0&&d.esri(e.value,function(a){if(a&&a.results){var b=a.results[0];b&&(b.letter="A",h._ul.innerHTML="",h._addLi(b.name),h._addLi(null,!0),h._addMarker(b))}})},c.appendChild(e),b.className="search ir",b.innerHTML="Search for a location",b.style.backgroundImage="url("+window.L.Icon.Default.imagePath+"/font-awesome/search"+(L.Browser.retina?"@2x":"")+".png)",L.DomEvent.addListener(b,"click",function(){e.value&&e.value.length>0&&h._geocode(e)}),c.appendChild(b),g.appendChild(c),g.draggable=!0,this._ul.appendChild(g),this._options.style.display="none",this._buttonPrimary.innerHTML="Add Stop",a&&(e.value=a)},_addMarker:function(a){var b,c=L.extend({},this._icon),d=a.latLng,e=a.letter;L.extend(c,{iconRetinaUrl:f.handlebars(c.iconRetinaUrl,{letter:e}),iconUrl:f.handlebars(c.iconUrl,{letter:e})}),b=new L.Marker({lat:d[0],lng:d[1]},{icon:new L.Icon(c)}),b._letter=e,b._name=a.name,this._markers.push(b.bindPopup('<div class="title">'+a.name+"</div>").addTo(this._map))},_clear:function(){this._directions.innerHTML="",this._directions.style.display="none",this._ul.innerHTML="",this._addLiFirst();for(var a=0;a<this._markers.length;a++)this._map.removeLayer(this._markers[a]);this._clearRoute()},_clearRoute:function(){if(this._route.length){for(var a=0;a<this._route.length;a++)this._map.removeLayer(this._route[a]);this._directions.innerHTML="",this._directions.style.display="none",this._route=[]}},_formatDistance:function(a){var b=Math.round(a/1609.344)/10;return 0===b?Math.round(3.28084*a)+" ft":b+" mi"},_getFirstValue:function(){return this._ul.childNodes[0].childNodes[1].childNodes[0].value||null},_handleDragEnd:function(a){a.target.style.opacity="1"},_handleDragEnter:function(a){a.target.classList.add("over")},_handleDragLeave:function(a){a.target.classList.remove("over")},_handleDrop:function(a){var b=a.target;return a.stopPropagation&&a.stopPropagation(),b._dragSource!=b&&(b._dragSource.innerHTML=b.innerHTML,b.innerHTML=a.dataTransfer.getData("text/html")),!1},_handleDragOver:function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="move",!1},_handleDragStart:function(a){var b=a.target;b.style.opacity="0.4",b._dragSource=b,a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/html",b.innerHTML)},_refreshLetters:function(){for(var a=0;a<this._ul.childNodes.length;a++){var b=this._ul.childNodes[a].childNodes,c=L.extend({},this._icon),d=b[0],e=this._letters[a],g=this._markers[a],h="stop-"+e;d.htmlFor=h,d.innerHTML=e,b[1].childNodes[0].id=h,g&&(g._letter=e,L.extend(c,{iconRetinaUrl:f.handlebars(c.iconRetinaUrl,{letter:e}),iconUrl:f.handlebars(c.iconUrl,{letter:e})}),g.setIcon(new L.Icon(c)))}},route:function(){for(var a=[],b=this,c=0;c<b._markers.length;c++)a.push(b._markers[c].getLatLng());e.mapbox.route(a,function(a){if(a&&a.routes&&a.routes.length){var c,d=a.routes[0],e=d.steps,f='<div class="maneuver-header"><h2>Driving Directions to '+b._markers[b._markers.length-1]._name+'</h2><span class="info">ROUTE: '+Math.round(d.distance/1609.344)+" MI, "+Math.round(d.duration/60)+' MIN </span><h3 class="location"><span class="identifier">A</span><span class="name">'+b._markers[0]._name+'</span></h3></div><ol class="maneuvers">';for(c=0;c<b._styles.length;c++){var g=new L.GeoJSON({geometry:a.routes[0].geometry,properties:{},type:"Feature"},L.extend({clickable:!1},b._styles[c]));b._route.push(g),g.addTo(b._map)}for(c=0;c<e.length;c++){var h=e[c];f+="<li>"+h.maneuver.instruction+("undefined"==typeof h.distance?"":'<span class="distance">'+b._formatDistance(h.distance)+"</span>")+"</li>"}b._directions.innerHTML=f+'</ol><div class="maneuver-footer"><h3 class="location"><span class="identifier">B</span><span class="name">'+b._markers[b._markers.length-1]._name+"</span></h3></div>",b._directions.style.display="block",b._map.fitBounds(b._route[0].getBounds(),{paddingBottomRight:[15,0],paddingTopLeft:[15,30]})}})}});b.exports=function(a){return new g(a)}},{"../icon/maki":84,"../mixin/module":104,"../util/geocode":112,"../util/route":114,"../util/util":117}],106:[function(a,b,c){"use strict";var d=a("./util/util"),e=L.Popup.extend({options:{autoPanPadding:null,autoPanPaddingBottomRight:[20,20],autoPanPaddingTopLeft:[20,20],maxWidth:null,minWidth:250,offset:[0,-1]},_data:[],_html:null,_results:[],initialize:function(a){L.Util.setOptions(this,a),L.Popup.prototype.initialize.call(this,this.options)},onAdd:function(a){window.addEventListener&&this._content.addEventListener("DOMMouseScroll",this._handleMouseWheel,!1),this._content.onmousewheel=this._handleMouseWheel,L.Popup.prototype.onAdd.apply(this,[a])},setContent:function(a){if("string"==typeof a){var b=document.createElement("div");b.innerHTML=a,a=b}return"number"==typeof this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth+"px"),"number"==typeof this.options.minWidth&&(a.style.minWidth=this.options.minWidth+"px"),L.Popup.prototype.setContent.call(this,a),this},_back:function(){this.setContent(this._html).update(),this._html=null},_createAction:function(a,b,c){var e=document.createElement("a"),f=document.createElement("li");if(f.appendChild(e),e.innerHTML=d.handlebars(a.text,b),a.menu){for(var g=L.DomUtil.create("ul","menu",c),h=0;h<a.menu.length;h++)!function(){var c=a.menu[h],e=document.createElement("a"),f=document.createElement("li");e.innerHTML=d.handlebars(c.text,b),L.DomEvent.addListener(e,"click",function(){var a=null;try{a=this.parentNode.parentNode.parentNode.parentNode.npmap_data}catch(a){}g.style.display="none",c.handler(a)}),f.appendChild(e),g.appendChild(f)}();L.DomEvent.addListener(e,"click",function(a){this._toggleMenu(g,a)},this)}else a.handler&&L.DomEvent.addListener(e,"click",function(){var b=null;try{b=this.parentNode.parentNode.parentNode.parentNode.npmap_data}catch(a){}a.handler(b)});return f},_handleMouseWheel:function(a){if(a){var b=a.wheelDelta,c=this.parentNode;L.DomUtil.hasClass(c,"leaflet-popup-scrolled")&&(0===c.scrollTop&&b>0?d.cancelEvent():c.scrollTop===c.scrollHeight-d.getOuterDimensions(c).height&&b<0&&d.cancelEvent())}},_handleResults:function(a,b){function c(a){return a.options&&a.options.popup?a.options.popup:null}var d;if(b&&"function"==typeof b){var e=b(a);d=document.createElement("div"),"string"==typeof e?d.innerHTML=e:d=e}else if(a.length>1)d=this._resultsToHtml(a);else{var f,g=[],h=a[0],i=h.results;if(i&&i.length)for(f=0;f<i.length;f++)g.push({layerConfig:c(h.layer),result:i[f],resultConfig:null});else if(h.subLayers&&h.subLayers.length)for(f=0;f<h.subLayers.length;f++){var j=h.subLayers[f];if(j.results&&j.results.length)for(var k=0;k<j.results.length;k++)g.push({layerConfig:c(h.layer),result:j.results[k],resultConfig:j.popup||null})}if(1===g.length){var l=g[0];d=this._resultToHtml(l.result,l.layerConfig,l.resultConfig)}else d=this._resultsToHtml(a)}return d},_more:function(a){this._html=this.getContent(),this.setContent(this._results[a]).update()},_resultToHtml:function(a,b,c,e,f){var g;if(f&&"function"==typeof f){var h=f(a);return g=document.createElement("div"),"string"==typeof h?g.innerHTML=h:g=h,g}if(b&&"function"==typeof b)return g=L.DomUtil.create("div","layer"),g.innerHTML=b(a),g.npmap_data=a,g;var i,j,k,l,m,n,o,p=b;if(g=L.DomUtil.create("div","layer"),g.npmap_data=a,p||(p=c?c:{description:{format:"table"}}),p.title&&(m=null,m="function"==typeof p.title?p.title(a):p.title,m&&"string"==typeof m&&(n=L.DomUtil.create("div","title",g),n.innerHTML=d.unescapeHtml(d.handlebars(m,a)))),p.description&&(k=L.DomUtil.create("div","content",g),m=null,m="function"==typeof p.description?p.description(a):p.description,m&&("list"===m.format?m=d.dataToList(a,m.fields):"table"===m.format&&(m=d.dataToTable(a,m.fields)),j=L.DomUtil.create("div","description",k),"string"==typeof m?j.innerHTML=d.unescapeHtml(d.handlebars(m,a)):"nodeType"in m&&j.appendChild(m))),p.media){l=[];for(var q=0;q<p.media.length;q++)a[p.media[q].id.replace("{{","").replace("}}","")]&&l.push(p.media[q]);if(l.length){var r=d.mediaToList(a,l);r&&(k||(k=L.DomUtil.create("div","content",g)),r.className="clearfix media",k.appendChild(r))}}if(p.actions&&(m=null,m="function"==typeof p.actions?p.actions(a):p.actions))if(i=L.DomUtil.create("div","actions",g),L.Util.isArray(m)){o=document.createElement("ul"),i.appendChild(o);for(var s=0;s<m.length;s++)o.appendChild(this._createAction(m[s],a,i))}else"string"==typeof m?i.innerHTML=d.unescapeHtml(d.handlebars(m,a)):"nodeType"in m&&i.appendChild(m);if(e){var t=document.createElement("a"),u=document.createElement("li");L.DomEvent.addListener(t,"click",this._back,this),t.innerHTML="&#171; Back",u.appendChild(t),i?i.childNodes[0].insertBefore(u,i.childNodes[0].childNodes[0]):(o=document.createElement("ul"),o.appendChild(u),L.DomUtil.create("div","actions",g).appendChild(o))}return g},_resultsToHtml:function(a){function b(){f._more(this.id)}for(var c=document.createElement("div"),e=0,f=this,g=0;g<a.length;g++){var h,i,j,k,l,m,n,o,p,q,r,s=L.DomUtil.create("div","layer",c),t=L.DomUtil.create("div","title",s),u=a[g];if(u.layer.options&&(u.layer.options.popup&&(m=u.layer.options.popup),u.layer.options.name?t.innerHTML=u.layer.options.name:t.innerHTML="Unnamed"),u.results&&u.results.length)for(j=L.DomUtil.create("div","content",s),r=document.createElement("ul"),k=0;k<u.results.length;k++){var v=u.results[k];for(h=document.createElement("a"),n=document.createElement("li"),q=this._resultToHtml(v,m,p,!0),l=0;l<q.childNodes.length;l++)if(i=q.childNodes[l],L.DomUtil.hasClass(i,"title")){o=d.stripHtml(i.innerHTML);break}o||(o="Untitled"),L.DomEvent.addListener(h,"click",function(){f._more(this.id)}),this._results[e]=q,h.id=e,h.innerHTML=o,n.appendChild(h),r.appendChild(n),j.appendChild(r),e++}else if(u.subLayers&&u.subLayers.length)for(j=L.DomUtil.create("div","content",s),k=0;k<u.subLayers.length;k++){var w=L.DomUtil.create("div","sublayer",j),x=L.DomUtil.create("div","title",w),y=L.DomUtil.create("div","content",w),z=u.subLayers[k];for(x.innerHTML=z.name,r=document.createElement("ul"),y.appendChild(r),l=0;l<z.results.length;l++){var A=z.results[l];z.popup&&(p=z.popup),h=document.createElement("a"),n=document.createElement("li"),q=this._resultToHtml(A,m,p,!0);for(var B=0;B<q.childNodes.length;B++)if(i=q.childNodes[B],L.DomUtil.hasClass(i,"title")){o=d.stripHtml(i.innerHTML);break}o||(o="Untitled"),L.DomEvent.addListener(h,"click",b),this._results[e]=q,h.id=e,h.innerHTML=o,n.appendChild(h),r.appendChild(n),e++}}}return c},_toggleMenu:function(a,b){if(a.style.display&&"none"!==a.style.display)a.style.display="none";else{var c=b.toElement;a.style.bottom="0",a.style.display="block",a.style.left=c.offsetLeft+"px"}}});b.exports=function(a){return new e(a)}},{"./util/util":117}],107:[function(a,b,c){b.exports={bing:{aerial:{icon:"aerial",layer:"aerial",maxZoom:19,minZoom:0,name:"Bing Aerial",type:"bing"},aerialLabels:{icon:"aerial",layer:"aerialwithlabels",maxZoom:19,minZoom:0,name:"Bing Hybrid",type:"bing"},roads:{icon:"street",layer:"road",maxZoom:19,minZoom:0,name:"Bing Roads",type:"bing"}},cartodb:{darkMatter:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors, &copy; <a href='https://cartodb.com/attributions'>CartoDB</a>",icon:"street",name:"CartoDB Dark Matter",retinaId:"@2x",type:"tiled",url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}{{retina}}.png"},darkMatterNoLabels:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors, &copy; <a href='https://cartodb.com/attributions'>CartoDB</a>",icon:"street",name:"CartoDB Dark Matter (No Labels)",retinaId:"@2x",type:"tiled",url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_nolabels/{z}/{x}/{y}{{retina}}.png"},positron:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors, &copy; <a href='https://cartodb.com/attributions'>CartoDB</a>",icon:"street",name:"CartoDB Positron",retinaId:"@2x",type:"tiled",url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{{retina}}.png"},positronNoLabels:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors, &copy; <a href='https://cartodb.com/attributions'>CartoDB</a>",icon:"street",name:"CartoDB Positron (No Labels)",retinaId:"@2x",type:"tiled",url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}{{retina}}.png"}},esri:{gray:{attribution:"Copyright: &copy;2013 Esri, DeLorme, NAVTEQ",maxZoom:16,minZoom:1,name:"Esri Light Gray",tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},imagery:{attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",icon:"aerial",maxZoom:19,minZoom:1,name:"Esri Imagery",popup:!1,tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},nationalGeographic:{attribution:"Esri",maxZoom:16,minZoom:1,name:"Esri National Geographic",popup:!1,tiled:!0,type:"arcgisserver",url:"https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"},oceans:{attribution:"Esri",maxZoom:16,minZoom:1,name:"Esri Oceans",tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},shadedRelief:{attribution:"Esri, USGS",icon:"topo",maxZoom:13,minZoom:1,name:"Esri Shaded Relief",popup:!1,tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer"},streets:{attribution:"Esri",dynamicAttribution:"https://static.arcgis.com/attribution/World_Street_Map?f=json",icon:"street",maxZoom:19,minZoom:1,name:"Esri Streets",tiled:!0,type:"arcgisserver",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"},terrain:{attribution:"Esri, NOAA, USGS",icon:"topo",maxZoom:17,minZoom:1,name:"Esri Terrain",popup:!1,tiled:!0,type:"arcgisserver",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},topographic:{attribution:"Esri",dynamicAttribution:"https://static.arcgis.com/attribution/World_Street_Map?f=json",icon:"topo",maxZoom:17,minZoom:1,name:"Esri Topo",popup:!1,tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}},mapbox:{dark:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.dark",name:"Mapbox Dark",type:"mapbox"},emerald:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.emerald",name:"Mapbox Emerald",type:"mapbox"},highContrast:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.high-contrast",name:"Mapbox High Contrast",type:"mapbox"},landsatLive:{attribution:"Imagery courtesy <a href='http://landsat.usgs.gov/' target='_blank'>USGS</a>",icon:"aerial",id:"mapbox.landsat-live-32",maxZoom:12,minZoom:7,name:"Mapbox Landsat Live",type:"mapbox"},light:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.light",name:"Mapbox Light",type:"mapbox"},outdoors:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"topo",id:"mapbox.outdoors",name:"Mapbox Outdoors",type:"mapbox"},pencil:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.pencil",name:"Mapbox Pencil",type:"mapbox"},runBikeAndHike:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"topo",id:"mapbox.run-bike-hike",name:"Mapbox Run, Bike, and Hike",type:"mapbox"},satellite:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a>",icon:"aerial",id:"mapbox.satellite",maxNativeZoom:18,name:"Mapbox Satellite",type:"mapbox"},satelliteLabels:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"aerial",id:"mapbox.streets-satellite",maxNativeZoom:18,name:"Mapbox Hybrid",type:"mapbox"},streets:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"street",id:"mapbox.streets-basic",name:"Mapbox Streets",type:"mapbox"},terrain:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"topo",id:"mapbox.streets",name:"Mapbox Terrain",type:"mapbox"}},nps:{darkStreets:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",id:"nps.68926899",lightOrDark:"dark",name:"Park Tiles Slate OSM",type:"mapbox"},lightStreets:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",id:"nps.g9ndno9j",lightOrDark:"light",name:"NPS Light",type:"mapbox"},neutralTerrain:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",id:"nps.g9nccg3d",lightOrDark:"light",name:"NPS Neutral Terrain",
type:"mapbox"},parkTiles:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck58pyquo009v01p99xebegr9",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Standard",type:"tiled"},parkTilesSlate:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck5cpvc2e0avf01p9zaw4co8o",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Slate",type:"tiled"},parkTilesImagery:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck72fwp2642dv07o7tbqinvz4",maxZoom:16,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Imagery",type:"tiled"},parkTilesLight:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck5cpia2u0auf01p9vbugvcpv",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Light",type:"tiled"},parkTiles3:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck58pyquo009v01p99xebegr9",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Standard",type:"tiled"},parkTiles3Slate:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck5cpvc2e0avf01p9zaw4co8o",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Slate",type:"tiled"},parkTiles3Imagery:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck72fwp2642dv07o7tbqinvz4",maxZoom:16,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Imagery",type:"tiled"},parkTiles3Light:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",tilesize:"256",style_id:"ck5cpia2u0auf01p9vbugvcpv",maxZoom:18,access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",username:"atlas-user",name:"Park Tiles Light",type:"tiled"},parkTiles3Legacy:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",clickable:!1,icon:"nps",id:"nps.397cfb9a,nps.3cf3d4ab,nps.b0add3e6",lightOrDark:"light",name:"Park Tiles 3 Standard",type:"mapbox"},parkTiles3ImageryLegacy:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",clickable:!1,icon:"nps",id:"nps.2c589204,nps.25abf75b,nps.7531d30a",lightOrDark:"dark",name:"Park Tiles 3 Imagery",type:"mapbox"},parkTiles3LightLegacy:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",clickable:!1,icon:"nps",id:"nps.1ee61ddf,nps.7f508801,nps.5748cf33",lightOrDark:"light",name:"Park Tiles 3 Light",type:"mapbox"},parkTiles3SlateLegacy:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",clickable:!1,icon:"nps",id:"nps.9e521899,nps.17f575d9,nps.e091bdaf",lightOrDark:"dark",name:"Park Tiles 3 Slate",type:"mapbox"},parkTilesOSM:{access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",maxZoom:18,name:"Park Tiles Standard OSM",style_id:"ck5cqlsyj0axg01p9dq9d96rf",tilesize:"256",type:"tiled",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",username:"atlas-user"},parkTilesImageryOSM:{access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",lightOrDark:"dark",maxZoom:18,name:"Park Tiles Imagery OSM",style_id:"ck76c2s2y05u406mswr48rlwq",tilesize:"256",type:"tiled",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",username:"atlas-user"},parkTilesSlateOSM:{access_token:"pk.eyJ1IjoiYXRsYXMtdXNlciIsImEiOiJjazFmdGx2bjQwMDAwMG5wZmYwbmJwbmE2In0.lWXK2UexpXuyVitesLdwUg",attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",lightOrDark:"dark",maxZoom:18,name:"Park Tiles Slate OSM",style_id:"ck5cq4xtz0aw601p9gd6oac03",tilesize:"256",type:"tiled",url:"https://atlas-stg.geoplatform.gov/styles/v1/{username}/{style_id}/tiles/{tilesize}/{z}/{x}/{y}@2x?access_token={access_token}",username:"atlas-user"},satelliteNight:{attribution:"&copy; <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox</a> &copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap</a> contributors",icon:"nps",id:"nps.g9o0im10",lightOrDark:"dark",name:"NPS Satellite at Night",type:"mapbox"}},openstreetmap:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",icon:"street",name:"OpenStreetMap",type:"tiled",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},stamen:{terrain:{attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='https://creativecommons.org/licenses/by/3.0/'>CC BY 3.0</a>. Data &copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors.",icon:"topo",maxZoom:18,minZoom:0,name:"Stamen Terrain",subdomains:"abcd",type:"tiled",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg"},toner:{attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='https://creativecommons.org/licenses/by/3.0/'>CC BY 3.0</a>. Data &copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors.",icon:"street",maxZoom:20,minZoom:0,name:"Stamen Toner",subdomains:"abcd",type:"tiled",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"},watercolor:{attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='https://creativecommons.org/licenses/by/3.0/'>CC BY 3.0</a>. Data &copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors.",maxZoom:16,minZoom:3,name:"Stamen Watercolor",subdomains:"abcd",type:"tiled",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"}}}},{}],108:[function(a,b,c){b.exports={marigold:{color:"#fff4ad",colorBlind:!0,fill:!0,fillColor:"#fff4ad",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},daisy:{color:"#ddcc77",colorBlind:!0,fill:!0,fillColor:"#ddcc77",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},mustard:{color:"#d98d38",fill:!0,fillColor:"#d98d38",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},gold:{color:"#d39800",fill:!0,fillColor:"#d39800",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},chesnut:{color:"#bf815d",fill:!0,fillColor:"#bf815d",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},clementine:{color:"#d95f02",fill:!0,fillColor:"#d95f02",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},salmon:{color:"#fa946e",fill:!0,fillColor:"#fa946e",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},rose:{color:"#d46655",fill:!0,fillColor:"#d46655",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},coral:{color:"#cc6677",colorBlind:!0,fill:!0,fillColor:"#cc6677",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},berry:{color:"#aa4499",colorBlind:!0,fill:!0,fillColor:"#aa4499",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},scarlet:{color:"#882255",colorBlind:!0,fill:!0,fillColor:"#882255",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},lilac:{color:"#896c9c",fill:!0,fillColor:"#896c9c",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},violet:{color:"#7570b3",fill:!0,fillColor:"#7570b3",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},currant:{color:"#5f3663",fill:!0,fillColor:"#5f3663",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},breeze:{color:"#88ccee",colorBlind:!0,fill:!0,fillColor:"#88ccee",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},chill:{color:"#1b99aa",fill:!0,fillColor:"#1b99aa",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},steele:{color:"#32557d",fill:!0,fillColor:"#32557d",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},sapphire:{color:"#332288",colorBlind:!0,fill:!0,fillColor:"#332288",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},turquoise:{color:"#44aa99",colorBlind:!0,fill:!0,fillColor:"#44aa99",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},meadow:{color:"#1b9e77",fill:!0,fillColor:"#1b9e77",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},eucalyptus:{color:"#558877",fill:!0,fillColor:"#558877",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},sycamore:{color:"#999933",colorBlind:!0,fill:!0,fillColor:"#999933",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},emerald:{color:"#117733",colorBlind:!0,fill:!0,fillColor:"#117733",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},russett:{color:"#7a4810",fill:!0,fillColor:"#7a4810",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},sand:{color:"#8f7657",fill:!0,fillColor:"#8f7657",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},nickel:{color:"#6c6c6c",fill:!0,fillColor:"#6c6c6c",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},night:{color:"#1f1f1f",colorBlind:!0,fill:!0,fillColor:"#1f1f1f",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},white:{color:"#ffffff",colorBlind:!0,fill:!0,fillColor:"#ffffff",fillOpacity:.2,opacity:.5,stroke:!0,weight:3}}},{}],109:[function(a,b,c){b.exports={esri:{grayLabels:{attribution:"Copyright: &copy;2013 Esri, DeLorme, NAVTEQ",maxZoom:16,minZoom:1,name:"Esri Light Gray Labels",tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer"},imageryLabels:{attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",maxZoom:19,minZoom:1,popup:!1,name:"Esri Boundaries & Places",tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"},oceansLabels:{attribution:"Esri",maxZoom:16,minZoom:1,name:"Esri Ocean Labels",tiled:!0,type:"arcgisserver",url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer"}},nps:{places:{buildings:{name:"Buildings",table:"buildings",type:"cartodb",user:"nps"},parkingLots:{name:"Parking Lots",table:"parking_lots",type:"cartodb",user:"nps"},pointsOfInterest:{name:"Points of Interest",table:"points_of_interest",type:"cartodb",user:"nps"},roads:{name:"Roads",table:"roads",type:"cartodb",user:"nps"},trails:{name:"Trails",table:"trails",type:"cartodb",user:"nps"}}}}},{}],110:[function(a,b,c){"use strict";var d=a("reqwest"),e=L.GeoJSON.extend({_include:[{type:"Visitor Center",symbol:"visitor-center",minZoomFactor:5,maxZoom:22,priority:1},{type:"Entrance Station",symbol:"entrance-station",minZoomFactor:6,maxZoom:22,priority:1},{type:"Information",symbol:"information",minZoomFactor:6,maxZoom:22,priority:2},{type:"Fee Booth",symbol:"entrance-station",minZoomFactor:6,maxZoom:22,priority:2},{type:"Ranger Station",symbol:"ranger-station",minZoomFactor:7,maxZoom:22,priority:2},{type:"Lodge",symbol:"lodging",minZoomFactor:7,maxZoom:22,priority:2},{type:"Lodging",symbol:"lodging",minZoomFactor:7,maxZoom:22,priority:2},{type:"Campground",symbol:"campground",minZoomFactor:7,maxZoom:22,priority:2},{type:"RV Campground",symbol:"rv-campground",minZoomFactor:7,maxZoom:22,priority:2},{type:"Store",symbol:"store",minZoomFactor:7,maxZoom:22,priority:3},{type:"Gift Shop",symbol:"souvenir",altSymbol:"souvenir-shop",minZoomFactor:7,maxZoom:22,priority:3},{type:"Trailhead",symbol:"trailhead",minZoomFactor:8,maxZoom:22,priority:3},{type:"Gas Station",symbol:"gas-station",minZoomFactor:8,maxZoom:22,priority:3},{type:"Food Service",symbol:"food-service",minZoomFactor:8,maxZoom:22,priority:3},{type:"Picnic Area",symbol:"picnic-area",minZoomFactor:8,maxZoom:22,priority:3},{type:"Airport",symbol:"airport",minZoom:16,maxZoom:22,priority:4},{type:"Beach",symbol:"beach-access",minZoom:16,maxZoom:22,priority:3},{type:"Hospital",symbol:"hospital",minZoom:16,maxZoom:22,priority:3},{type:"Campsite",symbol:"campsite",minZoom:16,maxZoom:22,priority:3},{type:"Shelter",symbol:"shelter",minZoom:16,maxZoom:22,priority:3},{type:"Bus Stop / Shuttle Stop",symbol:"bus-stop",minZoom:16,maxZoom:22,priority:3},{type:"Emergency Telephone",symbol:"emergency-telephone",minZoom:16,maxZoom:22,priority:3},{type:"Bookstore",symbol:"bookstore",minZoom:16,maxZoom:22,priority:3},{type:"Trail Marker",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"First Aid Station",symbol:"first-aid",minZoom:16,maxZoom:22,priority:3},{type:"Historic Marker",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:3},{type:"Historic Site",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:3},{type:"Horse Camp",symbol:"horseback-riding",minZoom:16,maxZoom:22,priority:3},{type:"Metro Stop / Subway Entrance",symbol:"letter-m",minZoom:16,maxZoom:22,priority:3},{type:"Library",symbol:"library",minZoom:16,maxZoom:22,priority:3},{type:"Lighthouse",symbol:"lighthouse",minZoom:16,maxZoom:22,priority:3},{type:"Marina",symbol:"marina",minZoom:16,maxZoom:22,priority:3},{type:"Museum",symbol:"museum",minZoom:16,maxZoom:22,priority:3},{type:"Post Office",symbol:"post-office",minZoom:16,maxZoom:22,priority:3},{type:"Restroom",symbol:"restrooms",minZoom:16,maxZoom:22,priority:3},{type:"Overlook",symbol:"scenic-viewpoint",minZoom:16,maxZoom:22,priority:3},{type:"Viewpoint",symbol:"scenic-viewpoint",minZoom:16,maxZoom:22,priority:3},{type:"Self Guiding Trail",symbol:"self-guiding-trail",minZoom:16,maxZoom:22,priority:3},{type:"Cabin",symbol:"shelter-cabin",minZoom:16,maxZoom:22,priority:3},{type:"Memorial",symbol:"statue",minZoom:16,maxZoom:22,priority:3},{type:"Monument",symbol:"statue",minZoom:16,maxZoom:22,priority:3},{type:"Telephone",symbol:"telephone",minZoom:16,maxZoom:22,priority:3},{type:"Cinema",symbol:"theater",minZoom:16,maxZoom:22,priority:3},{type:"Ferry Terminal",symbol:"vehicle-ferry",minZoom:16,maxZoom:22,priority:3},{type:"Waterfall",symbol:"waterfall",minZoom:16,maxZoom:22,priority:3},{type:"Amphitheater",symbol:"amphitheater",minZoom:16,maxZoom:22,priority:4},{type:"ATM",symbol:"atm",minZoom:16,maxZoom:22,priority:4},{type:"Bicycle Trail",symbol:"bicycle-trail",minZoom:16,maxZoom:22,priority:4},{type:"Boat Launch",symbol:"boat-launch",minZoom:16,maxZoom:22,priority:4},{type:"Primitive Camping",symbol:"campsite",minZoom:16,maxZoom:22,priority:4},{type:"Canoe / Kayak Access",symbol:"canoe-access",minZoom:16,maxZoom:22,priority:4},{type:"Cave Entrance",symbol:"cave",minZoom:16,maxZoom:22,priority:4},{type:"Cross-Country Ski Trail",symbol:"cross-country-ski-trail",minZoom:16,maxZoom:22,priority:4},{type:"Dam",symbol:"dam",minZoom:16,maxZoom:22,priority:4},{type:"Downhill Ski Trail",symbol:"downhill-skiing",minZoom:16,maxZoom:22,priority:4},{type:"Fountain",symbol:"drinking-water",minZoom:16,maxZoom:22,priority:4},{type:"Potable Water",symbol:"drinking-water",minZoom:16,maxZoom:22,priority:4},{type:"Fishing",symbol:"fishing",minZoom:16,maxZoom:22,priority:4},{type:"Food Box / Food Cache",symbol:"food-cache",minZoom:16,maxZoom:22,priority:4},{type:"Four-Wheel Drive Trail",symbol:"four-wheel-drive-road",minZoom:16,maxZoom:22,priority:4},{type:"Motorized Trail",symbol:"four-wheel-drive-road",minZoom:16,maxZoom:22,priority:4},{type:"Golf Course",symbol:"golfing",minZoom:16,maxZoom:22,priority:4},{type:"Historic Building",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Historic Cabin",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Historic Ruins",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Historic Ship",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Wreck",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Historic Mine",symbol:"historic-feature",minZoom:16,maxZoom:22,priority:4},{type:"Horseback Riding",symbol:"horseback-riding",minZoom:16,maxZoom:22,priority:4},{type:"Ice Rink",symbol:"ice-skating",minZoom:16,maxZoom:22,priority:4},{type:"Interpretive Exhibit",symbol:"interpretive-exhibit",minZoom:16,maxZoom:22,priority:4},{type:"Laundry",symbol:"laundry",minZoom:16,maxZoom:22,priority:4},{type:"Litter Receptacle",symbol:"litter-receptacle",minZoom:16,maxZoom:22,priority:4},{type:"Tower",symbol:"lookout-tower",minZoom:16,maxZoom:22,priority:4},{type:"Garage",symbol:"mechanic",minZoom:16,maxZoom:22,priority:4},{type:"Motorcycle Trail",symbol:"motor-bike-trail",minZoom:16,maxZoom:22,priority:4},{type:"Parking Lot",symbol:"parking",minZoom:16,maxZoom:22,priority:4},{type:"Playground",symbol:"playground",minZoom:16,maxZoom:22,priority:4},{type:"Mailbox",symbol:"post-office",minZoom:16,maxZoom:22,priority:4},{type:"Radiator Water",symbol:"radiator-water",minZoom:16,maxZoom:22,priority:4},{type:"Recycling",symbol:"recycling",minZoom:16,maxZoom:22,priority:4},{type:"Floating Restroom",symbol:"restrooms",minZoom:16,maxZoom:22,priority:4},{type:"Sailing",symbol:"sailing",minZoom:16,maxZoom:22,priority:4},{type:"Dump Station",symbol:"sanitary-disposal-station",minZoom:16,maxZoom:22,priority:4},{type:"Scuba Diving",symbol:"scuba-diving",minZoom:16,maxZoom:22,priority:4},{type:"Seaplane Base",symbol:"sea-plane",minZoom:16,maxZoom:22,priority:4},{type:"Gazebo",symbol:"shelter",minZoom:16,maxZoom:22,priority:4},{type:"Hut",symbol:"shelter",minZoom:16,maxZoom:22,priority:4},{type:"Pavilion",symbol:"shelter",minZoom:16,maxZoom:22,priority:4},{type:"Showers",symbol:"showers",minZoom:16,maxZoom:22,priority:4},{type:"Information Board",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"Information Map",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"Directional Sign",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"Gateway Sign",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"Regulatory Sign",symbol:"sign",minZoom:16,maxZoom:22,priority:4},{type:"Sledding",symbol:"sledding",minZoom:16,maxZoom:22,priority:4},{type:"Snowmobile Trail",symbol:"snowmobile-trail",minZoom:16,maxZoom:22,priority:4},{type:"Spring",symbol:"spring",minZoom:16,maxZoom:22,priority:4},{type:"Stable",symbol:"stable",minZoom:16,maxZoom:22,priority:4},{type:"Sculpture",symbol:"statue",minZoom:16,maxZoom:22,priority:4},{type:"Swimming Area",symbol:"swimming",minZoom:16,maxZoom:22,priority:4},{type:"Non-Motorized Trail",symbol:"trailhead",minZoom:16,maxZoom:22,priority:4},{type:"Trail Register",symbol:"trailhead",minZoom:16,maxZoom:22,priority:4},{type:"Dumpster",symbol:"trash-dumpster",minZoom:16,maxZoom:22,priority:4},{type:"Tunnel",symbol:"tunnel",minZoom:16,maxZoom:22,priority:4},{type:"Webcam",symbol:"webcam",minZoom:16,maxZoom:22,priority:4},{type:"Wheelchair Accessible",symbol:"wheelchair-accessible",minZoom:16,maxZoom:22,priority:4},{type:"Wi-Fi",symbol:"wi-fi",minZoom:16,maxZoom:22,priority:4},{type:"Windsurfing Area",symbol:"wind-surfing",minZoom:16,maxZoom:22,priority:4},{type:"Zebra Mussel Decontamination Station",symbol:"zebra-mussel-decontamination-station",minZoom:16,maxZoom:22,priority:4},{type:"All-Terrain Vehicle Trail",symbol:"all-terrain-trail",minZoom:16,maxZoom:22,priority:5},{type:"Campfire Ring",symbol:"campfire",minZoom:16,maxZoom:22,priority:5},{type:"Flag Pole",symbol:"flagpole",minZoom:16,maxZoom:22,priority:5},{type:"Mile Marker",symbol:"sign",minZoom:16,maxZoom:22,priority:5},{type:"Trail Sign",symbol:"sign",minZoom:16,maxZoom:22,priority:5},{type:"Weather Shelter",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Picnic Table",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Barn",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Greenhouse",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Ranch",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Building Under Construction",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Bunker",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Public Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Administrative Office",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Commercial Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Headquarters",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Industrial Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Office",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Retail Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Education Center",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"School Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"University Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Cathedral",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Chapel",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Church",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Apartments",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Detached Home",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Dormitory",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"House",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Residential Building",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Row House",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Static Mobile Home",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Shed",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Warehouse",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Battlefield",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Cannon",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Battlefield Marker",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Brochure Box",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Bike Rack",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Canyoneering Route",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Climbing Route",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Park",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Grill",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Athletic Field",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Steps",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Totem Pole",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Bench",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Canal",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Cemetery / Graveyard",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Grave",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fence",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Garden",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Gate",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Dyke (Levee)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Lock",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Military Area",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Quarry (Mine)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Shaft (Mine)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Oilfield",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Point of Interest",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Reserve",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Reservoir",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fortification",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Windmill",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Arroyo",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Reef (Bar)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Shoal (Bar)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Basin",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Bay",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Cape",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Cliff",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Desert",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Dune",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Forest",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Woods",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Glacier",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Grove",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Tree",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Harbor",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Island",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Isthmus",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Lake",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Lava",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Natural Feature",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Mountain Pass (Saddle / Gap)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Peak",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Grassland",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Plain",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Prairie",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Plateau",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Rapids",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Ridge",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Arch",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Pillar",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Rock Formation",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Sea",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Strait (Channel)",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Stream",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Swamp",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fumarole",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Geyser",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Hot Spring",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Mud Pot",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Canyon",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Valley",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Volcano",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Wetland",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Bridge",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Traffic Signals",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Turning Circle",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Airstrip",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Landing Strip",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Electric Vehicle Parking",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Roadside Pullout",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Train Station",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fire Hydrant",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fire Station",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Patrol Cabin",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Police",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Water Well",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Water Access",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Anchorage",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Boat Dock",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Boat Storage",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Buoy",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Mooring",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fish Cleaning",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Fish Hatchery",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Dog Sled Trail",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Backcountry Ski Trail",symbol:null,minZoom:16,maxZoom:22,priority:5},{type:"Snowshoe Trail",symbol:null,minZoom:16,maxZoom:22,priority:5}],includes:[a("../../mixin/geojson")],options:{environment:"production",prioritization:!0,types:[],unitCodes:[]},rows:null,initialize:function(a){var b,c,e=this;if(L.Util.setOptions(this,this._toLeaflet(a)),b=' SELECT     "minzoompoly"."minzoompoly" AS "m",    "point"."name" AS "n",    "point"."icon" AS "t",    "point"."unit_code" AS "u",    ST_X("point"."the_geom") AS "x",    ST_Y("point"."the_geom") AS "y" FROM     "point" JOIN "minzoompoly" ON     "minzoompoly"."unit_code" = "point"."unit_code"',this.options.types.length){for(b+=" AND (",c=0;c<this.options.types.length;c++){var f=e._include.filter(function(a){return a.type===this.options.types[c]});if(f.length>0){var g=f[0].altSymbol||f[0].symbol;b+="point.icon ='"+g+"' OR "}}if(b=b.slice(0,b.length-4)+")",this.options.unitCodes.length){for(b+=" AND (",c=0;c<this.options.unitCodes.length;c++)b+='"minzoompoly"."unit_code"=\''+this.options.unitCodes[c]+"' OR ";b=b.slice(0,b.length-4)+")"}}else if(this.options.unitCodes.length){
for(b+=" AND (",c=0;c<this.options.unitCodes.length;c++)b+='"minzoompoly"."unit_code"=\''+this.options.unitCodes[c]+"' OR ";b=b.slice(0,b.length-4)+")"}d({data:{cb:(new Date).getTime(),q:b},error:function(a){var b=L.extend(a,{message:"There was an error loading the data from Places."});e.fire("error",b),e.errorFired=b},success:function(a){var b;if(a&&a.responseText)if(e._rows=JSON.parse(a.responseText).rows,e._rows.length){var c=e._rows.length;for(L.GeoJSON.prototype.initialize.call(e,null,e.options);c--;){var d=e._rows[c],f=function(){for(var a,b=0;b<e._include.length;b++)if(null!==d.t&&(e._include[b].symbol===d.t||e._include[b].altSymbol===d.t||e._include[b].type===d.t)){a=e._include[b];break}if(a)return a}();if(f){var g=f.symbol;b={lat:d.y,lng:d.x,minZoom:d.m,name:d.n,symbol:g,type:f.type,unitCode:d.u},L.Util.extend(d,b),delete d.m,delete d.n,delete d.t,delete d.u,delete d.x,delete d.y,d.marker=new L.Marker({lat:d.lat,lng:d.lng},{icon:e._getIcon(!0,g),title:d.name||d.type||"",zIndexOffset:f.priority*-1e3}).bindPopup(function(){var a='<div class="layer" style="min-width:250px;">';return d.name&&(a+='<div class="title">'+d.name+"</div>"),d.type&&(a+='<div class="description"><p>'+d.type+"</p></div>"),a}()),L.Util.extend(d.marker,b)}else e._rows.splice(c,1)}if(e.options.prioritization)e._update();else for(c=0;c<e._rows.length;c++)e._map.addLayer(e._rows[c].marker);e.fire("ready"),e._loaded=!0,e.readyFired=!0}else b={message:"No records were returned from Places."},e.fire("error",b),e.errorFired=b;else b={message:"There was an error loading the data from Places."},e.fire("error",b),e.errorFired=b;return e},type:"POST",url:"https://carto.nps.gov/user/parktiles/api/v2/sql"})},onAdd:function(a){var b=this;b._map=a,b.options.prioritization&&b._map.on("moveend",function(){b._rows&&b._rows.length&&b._update()}),L.GeoJSON.prototype.onAdd.call(this,this._map)},_getIcon:function(a,b){return b?L.npmap.icon.npmapsymbollibrary({"marker-color":a?"000000":"117733","marker-size":"medium","marker-symbol":b+"-white"}):L.icon({iconAnchor:[3,3],iconRetinaUrl:window.L.Icon.Default.imagePath+"/dots/dot-"+(a?"black":"green")+"-6@2x.png",iconSize:[6,6],iconUrl:window.L.Icon.Default.imagePath+"/dots/dot-"+(a?"black":"green")+"-6.png",popupAnchor:[2,-6]})},_update:function(){var a,b,c,d=this,e=[],f=d._map.getBounds().pad(.1),g=d.getLayers();for(b=0;b<d._include.length;b++)a=d._include[b],("number"==typeof a.minZoomFactor||d._map.getZoom()>=a.minZoom)&&e.push(a.type);for(b=g.length;b--;)c=g[b],e.indexOf(c.type)!==-1&&f.contains(c.getLatLng())||d.removeLayer(c);for(b=0;b<d._rows.length;b++){var h;if(c=d._rows[b].marker,h=c.type,e.indexOf(h)>-1&&f.contains(c.getLatLng())){var i;if(a=function(){for(var a,b=0;b<d._include.length;b++)if(d._include[b].type===h){a=d._include[b];break}if(a)return a}(),i=a.minZoomFactor,"number"==typeof i){var j=c.minZoom,k=16;"number"==typeof j&&j+i<16&&(k=j+i),d._map.getZoom()>=k?d.addLayer(c):d.hasLayer(c)&&d.removeLayer(c)}else d.hasLayer(c)||d.addLayer(c)}}}});b.exports=function(a){return a=a||{},a.type||(a.type="geojson"),a.cluster?L.npmap.layer._cluster(a):new e(a)}},{"../../mixin/geojson":102,reqwest:53}],111:[function(a,b,c){"use strict";var d=a("./util/util"),e=L.Class.extend({initialize:function(a){if(L.setOptions(this,a),this._map=this.options.map,!this._map)throw new Error("No map configured for tooltip");this._container=L.DomUtil.create("div","leaflet-tooltip"),this._map._tooltipContainer.appendChild(this._container)},_hide:function(){this._container.style.display="none",L.DomUtil.removeClass(this._container,"leaflet-tooltip-fade"),this._map.activeTip===this&&delete this._map.activeTip},_show:function(){this._container.style.display="inline-block",L.DomUtil.addClass(this._container,"leaflet-tooltip-fade")},getHtml:function(){return this._container.innerHTML},hide:function(){this._hide()},isVisible:function(){return"none"!==this._container.style.display},setHtml:function(a){if("string"==typeof a)this._container.innerHTML=d.unescapeHtml(a);else{for(;this._container.hasChildNodes();)this._container.removeChild(this._container.firstChild);this._container.appendChild(this._content)}this._sizeChanged=!0},setPosition:function(a){var b=this._container,c=d.getOuterDimensions(b),e=this._map.getSize(),f=L.point(15,0);a.x+c.width>e.x-f.x-5?(b.style.left="auto",b.style.right=e.x-a.x+(f.x-5)+"px"):(b.style.left=a.x+f.x+"px",b.style.right="auto"),a.y+c.height>e.y?(b.style.top="auto",b.style.bottom=e.y-a.y+"px"):(b.style.top=a.y+"px",b.style.bottom="auto")},show:function(a,b){this._map.activeTip&&this._map.activeTip!==this&&this._map.activeTip._hide(),this._map.activeTip=this,b&&this.setHtml(b),this.setPosition(a),this._show()}});L.Map.addInitHook(function(){this._tooltipContainer=L.DomUtil.create("div","leaflet-tooltip-container",this._container)}),b.exports=function(a){return new e(a)}},{"./util/util":117}],112:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=a("reqwest"),f=a("../util/util");b.exports={_formatBingResult:function(a){var b=a.bbox,c=a.geocodePoints[0].coordinates;return{bounds:[[b[0],b[1]],[b[2],b[3]]],latLng:[c[0],c[1]],name:a.name}},_formatEsriResult:function(a){var b=a.extent,c=a.feature.geometry;return{bounds:[[b.ymin,b.xmin],[b.ymax,b.xmax]],latLng:[c.y,c.x],name:a.name}},_formatMapboxResult:function(a){var b=a.bbox,c=a.center;return{bounds:[[b[1],b[0]],[b[3],b[2]]],latLng:[c[1],c[0]],name:a.place_name}},_formatMapquestResult:function(a){var b=a.adminArea5||null,c=a.adminArea4||null,d=a.adminArea1||null,e=a.street||null,f=a.adminArea3||null,g=(e?e+", ":"")+(b||c)+", "+f+" "+d;return{bounds:null,latLng:[a.latLng.lat,a.latLng.lng],name:g}},_formatMapzenResult:function(a){var b=a.geometry.coordinates,c=a.properties;return{bounds:null,latLng:[b[1],b[0]],name:c.label||c.name}},_formatNominatimResult:function(a){var b=a.boundingbox;return{bounds:[[b[0],b[3]],[b[1],b[2]]],latLng:[a.lat,a.lon],name:a.display_name}},bing:function(a,b){var c=this;e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},jsonpCallback:"jsonp",success:function(a){var d={};if(a){for(var e=[],f=0;f<a.resourceSets[0].resources.length;f++)e.push(c._formatBingResult(a.resourceSets[0].resources[f]));d.results=e,d.success=!0}else d.message="The response from the Bing service was invalid. Please try again.",d.success=!1;b(d)},type:"jsonp",url:f.buildUrl("https://dev.virtualearth.net/REST/v1/Locations",{include:"queryParse",includeNeighborhood:1,key:d.bing.key,query:a})})},esri:function(a,b,c){var d=this,g={f:"json",text:a};c=c?L.extend(g,c):g,e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){var c={};if(a){for(var e=[],f=0;f<a.locations.length;f++)e.push(d._formatEsriResult(a.locations[f]));c.results=e,c.success=!0}else c.message="The response from the Esri service was invalid. Please try again.",c.success=!1;b(c)},type:"jsonp",url:f.buildUrl("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find",c)})},mapbox:function(a,b){var c=this;e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){if(a)if(a.features&&a.features.length){for(var d=[],e=0;e<a.features.length;e++)d.push(c._formatMapboxResult(a.features[e]));b({results:d,success:!0})}else b({message:"No locations found.",success:!0});else b({message:"The geocode failed. Please try again.",success:!1})},type:"json",url:f.buildUrl("https://api.mapbox.com/geocoding/v5/mapbox.places/"+a.replace(/ /g,"+").replace(/,/g,"+")+".json",{access_token:d.mapbox.access_token})})},mapquest:function(a,b){var c=this;console.info("The MapQuest Geocoding API is limited to 15,000 transactions a month. We recommend using the `esri` provider, as it supports much higher limits for NPS maps."),e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){if(a)if(a.results&&a.results[0]&&a.results[0].locations&&a.results[0].locations.length){for(var d=[],e=0;e<a.results[0].locations.length;e++)d.push(c._formatMapquestResult(a.results[0].locations[e]));b({results:d,success:!0})}else b({message:"No locations found.",success:!0});else b({message:"The geocode failed. Please try again.",success:!1})},type:"jsonp",url:f.buildUrl("https://www.mapquestapi.com/geocoding/v1/address",{key:d.mapquest.key,location:a,thumbMaps:!1})})},mapzen:function(a,b){var c=this;e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){if(a)if(a.features&&a.features.length){for(var d=[],e=0;e<a.features.length;e++)d.push(c._formatMapzenResult(a.features[e]));b({results:d,success:!0})}else b({message:"No locations found.",success:!0});else b({message:"The geocode failed. Please try again.",success:!1})},type:"json",url:f.buildUrl("https://search.mapzen.com/v1/search",{api_key:d.mapzen.api_key,text:a})})},nominatim:function(a,b){var c=this;console.info("The MapQuest Nominatim API is limited to 15,000 transactions a month. We recommend using the `esri` provider, as it supports much higher limits for NPS maps."),e({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},jsonpCallback:"json_callback",success:function(a){var d={};if(a){for(var e=[],f=0;f<a.length;f++)e.push(c._formatNominatimResult(a[f]));d.results=e,d.success=!0}else d.message="The response from the Nominatim service was invalid. Please try again.",d.success=!1;b(d)},type:"jsonp",url:f.buildUrl("https://open.mapquestapi.com/nominatim/v1/search.php",{addressdetails:1,dedupe:1,format:"json",key:d.mapquest.key,q:a})})}}},{"../../keys.json":2,"../util/util":117,reqwest:53}],113:[function(a,b,c){b.exports=function(a,b){function c(){h--,0===h&&b&&b()}function d(a){try{document.styleSheets[a].cssRules?c():document.styleSheets[a].rules&&document.styleSheets[a].rules.length?c():setTimeout(function(){d(a)},250)}catch(b){setTimeout(function(){d(a)},250)}}function e(a){a=a.toLowerCase();var b=a.indexOf("js");return a=a.indexOf("css"),(b!==-1||a!==-1)&&(b>a?"js":"css")}function f(a){var b=document.createElement("link");b.href=a,b.rel="stylesheet",b.type="text/css",b.onload=c,b.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&c()},document.getElementsByTagName("head")[0].appendChild(b)}for(var g,h=0,i=document.styleSheets.length-1,j=0;j<a.length;j++)if(h++,g=a[j],"css"===e(g)&&(f(g),i++,!window.opera&&navigator.userAgent.indexOf("MSIE")===-1&&d(i)),"js"===e(g)){var k=document.createElement("script");k.onload=c,k.src=g,k.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(k)}}},{}],114:[function(a,b,c){"use strict";var d=a("../../keys.json"),e=a("reqwest");b.exports={mapbox:function(){return{route:function(a,b,c){var f="";c=c||"driving";for(var g=0;g<a.length;g++){var h=a[g];g&&(f+=";"),f+=h.lng+","+h.lat}e({crossOrigin:!0,error:function(){b({message:"The route failed. Please check your network connection.",success:!1})},success:function(a){b(a)},type:"json",url:"https://api.mapbox.com/v4/directions/mapbox."+c+"/"+f+".json?access_token="+d.mapbox.access_token+"&alternatives=false&instructions=html"})}}}()}},{"../../keys.json":2,reqwest:53}],115:[function(a,b,c){"use strict";b.exports={lat2tile:function(a,b){return Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*Math.pow(2,b))},long2tile:function(a,b){return Math.floor((a+180)/360*Math.pow(2,b))},tile2lat:function(a,b){var c=Math.PI-2*Math.PI*a/Math.pow(2,b);return 180/Math.PI*Math.atan(.5*(Math.exp(c)-Math.exp(-c)))},tile2long:function(a,b){return a/Math.pow(2,b)*360-180}}},{}],116:[function(a,b,c){b.exports=function(){function a(a,b){function c(b){var c=a.arcs[b],d=c[0],e=[0,0];return c.forEach(function(a){e[0]+=a[0],e[1]+=a[1]}),[d,e]}var d={},e={};b.forEach(function(a){var b,f,g=c(a),h=g[0],i=g[1];if(b=e[h])if(delete e[b.end],b.push(a),b.end=i,f=d[i]){delete d[f.start];var j=f===b?b:b.concat(f);d[j.start=b.start]=e[j.end=f.end]=j}else if(f=e[i]){delete d[f.start],delete e[f.end];var j=b.concat(f.map(function(a){return~a}).reverse());d[j.start=b.start]=e[j.end=f.start]=j}else d[b.start]=e[b.end]=b;else if(b=d[i])if(delete d[b.start],b.unshift(a),b.start=h,f=e[h]){delete e[f.end];var k=f===b?b:f.concat(b);d[k.start=f.start]=e[k.end=b.end]=k}else if(f=d[h]){delete d[f.start],delete e[f.end];var k=f.map(function(a){return~a}).reverse().concat(b);d[k.start=f.end]=e[k.end=b.end]=k}else d[b.start]=e[b.end]=b;else if(b=d[h])if(delete d[b.start],b.unshift(~a),b.start=i,f=e[i]){delete e[f.end];var k=f===b?b:f.concat(b);d[k.start=f.start]=e[k.end=b.end]=k}else if(f=d[i]){delete d[f.start],delete e[f.end];var k=f.map(function(a){return~a}).reverse().concat(b);d[k.start=f.end]=e[k.end=b.end]=k}else d[b.start]=e[b.end]=b;else if(b=e[i])if(delete e[b.end],b.push(~a),b.end=h,f=e[h]){delete d[f.start];var j=f===b?b:b.concat(f);d[j.start=b.start]=e[j.end=f.end]=j}else if(f=d[h]){delete d[f.start],delete e[f.end];var j=b.concat(f.map(function(a){return~a}).reverse());d[j.start=b.start]=e[j.end=f.start]=j}else d[b.start]=e[b.end]=b;else b=[a],d[b.start=h]=e[b.end=i]=b});var f=[];for(var g in e)f.push(e[g]);return f}function b(b,c,d){function f(a){a<0&&(a=~a),(l[a]||(l[a]=[])).push(k)}function g(a){a.forEach(f)}function h(a){a.forEach(g)}function i(a){"GeometryCollection"===a.type?a.geometries.forEach(i):a.type in m&&(k=a,m[a.type](a.arcs))}var j=[];if(arguments.length>1){var k,l=[],m={LineString:g,MultiLineString:h,Polygon:h,MultiPolygon:function(a){a.forEach(h)}};i(c),l.forEach(arguments.length<3?function(a,b){j.push(b)}:function(a,b){d(a[0],a[a.length-1])&&j.push(b)})}else for(var n=0,o=b.arcs.length;n<o;++n)j.push(n);return e(b,{type:"MultiLineString",arcs:a(b,j)})}function c(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return d(a,b)})}:d(a,b)}function d(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:e(a,b)};return null==b.id&&delete c.id,c}function e(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[a<0?~a:a],e=0,g=d.length;e<g;++e)b.push(c=d[e].slice()),j(c,e);a<0&&f(b,g)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;d<e;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function g(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function h(a){return a.map(g)}function i(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(i)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=m(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return h(a.arcs)},MultiPolygon:function(a){return a.arcs.map(h)}};return i(b)}function f(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function g(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function h(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;l<k;++l)for(var m=l+1;m<k;++m){var n,o=j[l],p=j[m];(n=f[o])[i=g(n,p)]!==p&&n.splice(i,0,p),(n=f[p])[i=g(n,o)]!==o&&n.splice(i,0,o)}return f}function i(a,b){function c(a){g.remove(a),a[1][2]=b(a),g.push(a)}var d,e=m(a.transform),f=n(a.transform),g=l(k),h=0;for(b||(b=j),a.arcs.forEach(function(a){var c=[];a.forEach(e);for(var f=1,h=a.length-1;f<h;++f)d=a.slice(f-1,f+2),d[1][2]=b(d),c.push(d),g.push(d);a[0][2]=a[h][2]=1/0;for(var f=0,h=c.length;f<h;++f)d=c[f],d.previous=c[f-1],d.next=c[f+1]});d=g.pop();){var i=d.previous,o=d.next;d[1][2]<h?d[1][2]=h:h=d[1][2],i&&(i.next=o,i[2]=d[2],c(i)),o&&(o.previous=i,o[0]=d[0],c(o))}return a.arcs.forEach(function(a){a.forEach(f)}),a}function j(a){return Math.abs((a[0][0]-a[2][0])*(a[1][1]-a[0][1])-(a[0][0]-a[1][0])*(a[2][1]-a[0][1]))}function k(a,b){return a[1][2]-b[1][2]}function l(a){function b(b){for(var c=e[b];b>0;){var d=(b+1>>1)-1,f=e[d];if(a(c,f)>=0)break;e[f.index=b]=f,e[c.index=b=d]=c}}function c(b){for(var c=e[b];;){var d=b+1<<1,f=d-1,g=b,h=e[g];if(f<e.length&&a(e[f],h)<0&&(h=e[g=f]),d<e.length&&a(e[d],h)<0&&(h=e[g=d]),g===b)break;e[h.index=b]=h,e[c.index=b=g]=c}}var d={},e=[];return d.push=function(){for(var a=0,c=arguments.length;a<c;++a){var d=arguments[a];b(d.index=e.push(d)-1)}return e.length},d.pop=function(){var a=e[0],b=e.pop();return e.length&&(e[b.index=0]=b,c(0)),a},d.remove=function(d){var f=d.index,g=e.pop();return f!==e.length&&(e[g.index=f]=g,(a(g,d)<0?b:c)(f)),f},d}function m(a){if(!a)return o;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function n(a){if(!a)return o;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function o(){}return{version:"1.4.0",mesh:b,feature:c,neighbors:h,presimplify:i}}()},{}],117:[function(a,b,c){"use strict";var d=a("helper-dateformat"),e=a("handlebars"),f=a("reqwest"),g=function(a,b){return encodeURIComponent("SELECT * FROM nps.npmap_read_cache('"+btoa(a)+"','"+btoa(b)+"');")};e.registerHelper("dateFormat",d),e.registerHelper("ifCond",function(a,b,c,d){switch(b){case"!=":return a!=c?d.fn(this):d.inverse(this);case"!==":return a!==c?d.fn(this):d.inverse(this);case"==":return a==c?d.fn(this):d.inverse(this);case"===":return a===c?d.fn(this):d.inverse(this);case"<":return a<c?d.fn(this):d.inverse(this);case"<=":return a<=c?d.fn(this):d.inverse(this);case">":return a>c?d.fn(this):d.inverse(this);case">=":return a>=c?d.fn(this):d.inverse(this);case"&&":return a&&c?d.fn(this):d.inverse(this);case"||":return a||c?d.fn(this):d.inverse(this);default:return d.inverse(this)}}),e.registerHelper("toInt",function(a){return parseInt(a,10)}),e.registerHelper("toLowerCase",function(a){return a.toLowerCase()}),e.registerHelper("toUpperCase",function(a){return a.toUpperCase()}),function(){function a(a){var b,d,e,f,g,h,i;for(h=a.length,g=0,i="";g<h;){do b=c[255&a.charCodeAt(g++)];while(g<h&&b===-1);if(b===-1)break;do d=c[255&a.charCodeAt(g++)];while(g<h&&d===-1);if(d===-1)break;i+=String.fromCharCode(b<<2|(48&d)>>4);do{if(e=255&a.charCodeAt(g++),61===e)return i;e=c[e]}while(g<h&&e===-1);if(e===-1)break;i+=String.fromCharCode((15&d)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61===f)return i;f=c[f]}while(g<h&&f===-1);if(f===-1)break;i+=String.fromCharCode((3&e)<<6|f)}return i}function b(a){var b,c,e,f,g,h;for(g=a.length,f=0,h="";f<g;){if(b=255&a.charCodeAt(f++),f===g){h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4),h+="==";break}if(c=a.charCodeAt(f++),f===g){h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4|(240&c)>>4),h+=d.charAt((15&c)<<2),h+="=";break}e=a.charCodeAt(f++),h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4|(240&c)>>4),h+=d.charAt((15&c)<<2|(192&e)>>6),h+=d.charAt(63&e)}return h}var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";window.btoa||(window.btoa=b),window.atob||(window.atob=a)}(),b.exports={_checkDisplay:function(a,b){a.style&&"none"===a.style.display&&(b.push(a),a.style.display="block")},checkNpsNetwork:function(a){this.reqwest({crossOrigin:!0,error:function(){a(!1)},success:function(b){a(b&&b.success?!0:!1)},type:"json",url:"https://insidemaps.nps.gov/test/inside"})},_getAutoPanPaddingTopLeft:function(a){var b=this.getChildElementsByClassName(a,"leaflet-top");return[this.getOuterDimensions(b[0]).width+20,this.getOuterDimensions(b[1]).height+20]},_getAvailableHorizontalSpace:function(a){var b,c=a.getContainer(),d=this.getChildElementsByClassName(c,"leaflet-bottom")[0],e=this.getChildElementsByClassName(c,"leaflet-top")[0],f=this.getOuterDimensions(d).width;return this.getOuterDimensions(e).width>f&&(f=this.getOuterDimensions(e).width),b=this.getOuterDimensions(c).width-f-this.getOuterDimensions(this.getChildElementsByClassName(c,"leaflet-top")[1]).width,b>249?b:250},_getAvailableVerticalSpace:function(a){var b,c=a.getContainer(),d=this.getChildElementsByClassName(c,"leaflet-bottom")[0],e=this.getChildElementsByClassName(c,"leaflet-bottom")[1],f=this.getOuterDimensions(d).height;return this.getOuterDimensions(e).height>f&&(f=this.getOuterDimensions(e).height),b=this.getOuterDimensions(c).height-f-this.getOuterDimensions(this.getChildElementsByClassName(c,"leaflet-top")[1]).height,b>149?b:150},_lazyLoader:a("./lazyloader.js"),_parseLocalUrl:function(a){return a.replace(window.location.origin,"")},appendCssFile:function(a,b){"string"==typeof a&&(a=[a]),this._lazyLoader(a,b)},appendJsFile:function(a,b){"string"==typeof a&&(a=[a]),this._lazyLoader(a,b)},buildUrl:function(a,b){var c=[];if(!b)return a;c.push(a+"?");for(var d in b)c.push(encodeURIComponent(d)),c.push("="),c.push(encodeURIComponent(b[d])),c.push("&");return c.pop(),c.join("")},cancelEvent:function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1},clone:function(a){return JSON.parse(JSON.stringify(a))},dataToList:function(a,b){var c=document.createElement("dl");for(var d in a){var e=!0;if(b&&L.Util.isArray(b)&&b.indexOf(d)===-1&&(e=!1),e){var f=document.createElement("dd"),g=document.createElement("dt");g.innerHTML=d,f.innerHTML=a[d],c.appendChild(g),c.appendChild(f)}}return c},dataToTable:function(a,b){var c,d,e=document.createElement("table"),f=document.createElement("tbody");if(e.appendChild(f),L.Util.isArray(b)){d={};for(var g=0;g<b.length;g++)c=b[g],"string"==typeof c?d[c]={title:c}:d[c.field]=c}for(var h in a){var i=!1;if(d){for(c in d)if(c===h){i=!0;break}}else i=!0;if(i){var j=document.createElement("td"),k=document.createElement("td"),l=document.createElement("tr");d?j.innerHTML=d[h].title:j.innerHTML=h,d&&d[h]&&d[h].separator?k.innerHTML=a[h].replace(d[h].separator,"<br/>"):k.innerHTML=a[h],d&&d[h]&&d[h].process&&(k.innerHTML=d[h].process(k.innerHTML)),l.appendChild(j),l.appendChild(k),f.appendChild(l)}}return e},escapeHtml:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},getChildElementsByClassName:function(a,b){function c(a){var d=a.children;if("string"==typeof a.className&&a.className.indexOf(b)!==-1)for(var f=a.className.split(" "),g=0;g<f.length;g++)if(f[g]===b){e.push(a);break}if(d&&d.length)for(var h=0;h<d.length;h++)c(d[h])}for(var d=a.childNodes,e=[],f=0;f<d.length;f++)c(d[f]);return e},getChildElementsByNodeName:function(a,b){function c(a){var d=a.children;if("string"==typeof a.nodeName&&a.nodeName.toLowerCase()===b&&e.push(a),d&&d.length)for(var f=0;f<d.length;f++)c(d[f])}var d=a.childNodes,e=[];b=b.toLowerCase();for(var f=0;f<d.length;f++)c(d[f]);return e},getElementsByClassName:function(a){for(var b=[],c=new RegExp("(^|\\s)"+a+"(\\s|$)"),d=document.getElementsByTagName("*"),e=0;e<d.length;e++)c.test(d[e].className)&&b.push(d[e]);return b},getEventObject:function(a){return a||(a=window.event),a},getEventObjectTarget:function(a){var b;return b=a.target?a.target:a.srcElement,3===b.nodeType&&(b=b.parentNode),b},getNextSibling:function(a){do a=a.nextSibling;while(a&&1!==a.nodeType);return a},getOffset:function(a){for(var b=0,c=0;null!==a;b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent);return{left:b,top:c}},getOuterDimensions:function(a){var b=0,c=0;if(a){var d=[],e=a.parentNode;if(this._checkDisplay(a,d),"npmap"!==a.id&&e)for(this._checkDisplay(e,d);e.id&&"npmap"!==e.id&&"npmap-map"!==e.id;)e=e.parentNode,e&&this._checkDisplay(e,d);b=a.offsetHeight,c=a.offsetWidth,d.reverse();for(var f=0;f<d.length;f++)d[f].style.display="none"}return{height:b,width:c}},getOuterHtml:function(a){if(!a||!a.tagName)return"";var b,c,d=document.createElement("div");return d.appendChild(a.cloneNode(!1)),c=d.innerHTML,b=c.indexOf(">")+1,c=c.substring(0,b)+a.innerHTML+c.substring(b),d=null,c},getPosition:function(a){var b={left:0,top:0},c=this.getOffset(a),d=this.getOffset(a.parentNode);return b.left=c.left-d.left,b.top=c.top-d.top,b},getPreviousSibling:function(a){do a=a.previousSibling;while(a&&1!==a.nodeType);return a},getPropertyCount:function(a){if(Object.keys)return Object.keys(a).length;var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c.length},handlebars:function(a,b){return(a=e.compile(a))(b)},isHidden:function(a){return null===a.offsetParent},isLocalUrl:function(a){return a.indexOf(window.location.hostname)>=0||!/^(?:[a-z]+:)?\/\//i.test(a)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},linkify:function(a,b,c){var d="\\b(https?://[-A-Z0-9+&@#/%?=~_|!:,.;]*[A-Z0-9+&@#/%=~_|])",e=new RegExp(d,"gi"),f=new RegExp(">"+d+"</a>","gi"),g=a.replace(e,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>");if(b){var h=g.match(f);if(h)for(var i=0;i<h.length;i++){var j=h[i].substr(1,h[i].length-5).replace(/https?:\/\//gi,""),k=j.substr(0,b)+(j.length>b?"&hellip;":"");j.length-1===b&&(k=k.substr(0,b)+j.substr(b,1)),g=g.replace(h[i],">"+k+"</a>")}}return g},loadFile:function(a,b,c){if(this.isLocalUrl(a))if("xml"===b){var d=new XMLHttpRequest;d.onload=function(){var a=this.responseText;c(!!a&&a)},d.open("get",this._parseLocalUrl(a),!0),d.send()}else f({error:function(){c(!1)},success:function(a){c(a?"text"===b?a.responseText:a:!1)},type:b,url:this._parseLocalUrl(a)});else this.rawRequest(a,"json",function(d,e){if(d)if(a.match(/https?:\/\/.+?\.carto(db)?.com\//g))c(e);else{var f="callback_"+Math.random().toString(32).substr(2),h="https://carto.nps.gov/user/nps/api/v2/sql?q="+g(a,window.location.href)+"&callback="+f,i=document.createElement("script");i.src=h,window[f]=function(a){if(i&&a){i.parentNode.removeChild(i),i=null;var d=a&&a.rows&&a.rows[0]&&a.rows[0].npmap_read_cache,e=!d||a&&a.error;if(!e)if("json"===b){var f=atob(d).replace(/\\r\\n/g,"\n");f=f.replace(/\\n/g,"\n"),c(f)}else{var g=atob(d);try{g=JSON.parse(g),g=g.data?g.data:g}catch(a){}c(g)}}},document.querySelector("head").appendChild(i),setTimeout(window[f],3e3)}else c(e)})},mediaToList:function(a,b){function c(a){var b,c,d,g=i.childNodes,h=g.length;for(c=0;c<g.length;c++)if(d=g[c],"none"!==d.style.display){b=c;break}if(b+a<h&&b+a>-1)for(c=0;c<g.length;c++)d=g[c],c===b+a?d.style.display="block":d.style.display="none";b+a<=0?L.DomUtil.addClass(f,"disabled"):L.DomUtil.removeClass(f,"disabled"),b+a+1>=h?L.DomUtil.addClass(e,"disabled"):L.DomUtil.removeClass(e,"disabled")}for(var d,e,f,g=document.createElement("div"),h={focus:function(a){for(var b=a.match(new RegExp("[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}(}){0,1}","g")),c=[],d=0;d<b.length;d++)c.push({href:"http://focus.nps.gov/AssetDetail?assetID="+b[d],src:"http://focus.nps.gov/GetAsset/"+b[d]+"/thumb/xlarge"});return c}},i=document.createElement("ul"),j=0;j<b.length;j++){var k=b[j],l=h[k.type];if(l){d=l(a[k.id.replace("{{","").replace("}}","")]);for(var m=0;m<d.length;m++){var n=document.createElement("a"),o=d[m],p=document.createElement("img"),q=[],r=document.createElement("li");"number"==typeof k.height&&(q+="height:"+k.height+"px;"),"number"==typeof k.width&&(q+="width:"+k.width+"px;"),q.length&&(p.style.cssText=q),p.src=o.src,n.appendChild(p),n.href=o.href,n.target="_blank",r.appendChild(n),r.style.display=m>0?"none":"block",i.appendChild(r)}}}if(i.className="clearfix",g.appendChild(i),i.childNodes.length>1){var s=document.createElement("div");e=document.createElement("button"),f=document.createElement("button"),s.style.float="right",f=document.createElement("button"),f.setAttribute("class","btn btn-circle disabled prev"),f.innerHTML="&lt;",e=document.createElement("button"),e.setAttribute("class","btn btn-circle next"),e.innerHTML="&gt;",L.DomEvent.addListener(f,"click",function(){c(-1)}),L.DomEvent.addListener(e,"click",function(){c(1)}),s.appendChild(f),s.appendChild(e),g.appendChild(s)}return g},parseDomainFromUrl:function(a){var b=a.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return b&&b[1]},putCursorAtEndOfInput:function(a){if(a.setSelectionRange){var b=2*a.value.length;a.setSelectionRange(b,b)}},rawRequest:function(a,b,c){"https:"===window.location.protocol&&(a=a.replace(/^http:\/\//,"https://"));var d=new XMLHttpRequest,e=!1;d.onreadystatechange=function(){var a=this.DONE||4;if(this.readyState===a)if(200===this.status){var f=d.responseText;if("json"===b)try{f=JSON.parse(f),f.error&&(e=!0,c(f.error))}catch(a){e=!0,c(a)}e||c(null,f)}else c(this)},d.open("GET",a,!0),d.send(null)},reqwest:f,strict:function(a,b){if(typeof a!==b)throw new Error("Invalid argument: "+b+" expected")},strictInstance:function(a,b,c){if(!(a instanceof b))throw new Error("Invalid argument: "+c+" expected")},strictOneOf:function(a,b){if(b.indexOf(a)===-1)throw new Error("Invalid argument: "+a+" given, valid values are "+b.join(", "))},stripHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText||""},supportsCors:function(){return"withCredentials"in new XMLHttpRequest?"yes":"undefined"!=typeof XDomainRequest?"partial":"no"},unescapeHtml:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}}},{"./lazyloader.js":113,handlebars:42,"helper-dateformat":43,reqwest:53}]},{},[4]);